
> auditforecaster@0.1.0 lint
> next lint --format json

node.exe : `next 
lint` is deprecated 
and will be removed 
in Next.js 16.
At line:1 char:1
+ & "C:\Program Files
\nodejs/node.exe" 
"C:\Program 
Files\nodejs/node_mo 
...
+ ~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~
    + CategoryInfo   
           : NotSpe  
  cified: (`next l   
 int` is ... in N    
ext.js 16.:Strin    
g) [], RemoteExc    
eption
    + FullyQualified 
   ErrorId : Native  
  CommandError
 
For new projects, 
use create-next-app 
to choose your 
preferred linter.
For existing 
projects, migrate to 
the ESLint CLI:
npx 
@next/codemod@canary 
next-lint-to-eslint-c
li .

[{"filePath":"C:\\Use
rs\\shaun\\Antigrabit
y Workspace\\auditfor
ecaster\\src\\app\\(d
ashboard)\\dashboard\
\__tests__\\integrati
on.test.tsx","message
s":[{"ruleId":"@types
cript-eslint/no-expli
cit-any","severity":2
,"message":"Unexpecte
d any. Specify a 
different type.","lin
e":87,"column":18,"no
deType":"TSAnyKeyword
","messageId":"unexpe
ctedAny","endLine":87
,"endColumn":21,"sugg
estions":[{"messageId
":"suggestUnknown","f
ix":{"range":[3211,32
14],"text":"unknown"}
,"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3211,3214],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":102,"col
umn":18,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":102,"endColu
mn":21,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[3826,3829],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3826,3829],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":115,"col
umn":18,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":115,"endColu
mn":21,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[4398,4401],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
4398,4401],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":118,"col
umn":18,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":118,"endColu
mn":21,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[4534,4537],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
4534,4537],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":4,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { render, 
screen } from '@testi
ng-library/react'\r\n
import { vi, 
describe, it, 
expect, beforeEach } 
from 
'vitest'\r\nimport 
BuilderSchedulePage 
from '../builder/sche
dule/page'\r\nimport 
EquipmentPage from '.
./assets/equipment/pa
ge'\r\nimport 
FleetPage from '../as
sets/fleet/page'\r\ni
mport { prisma } 
from '@/lib/prisma'\r
\n\r\n// Mock 
Next.js Link\r\nvi.mo
ck('next/link', () 
=> ({\r\n    
default: ({ 
children, href }: { 
children: 
React.ReactNode; 
href: string }) => 
<a href={href}>{child
ren}</a>\r\n}))\r\n\r
\n// Mock Lucide icon
s\r\nvi.mock('lucide-
react', () => ({\r\n 
   Calendar: () => 
<div data-testid=\"ca
lendar-icon\" 
/>,\r\n    
ClipboardList: () => 
<div data-testid=\"cl
ipboard-icon\" 
/>,\r\n    Plus: () 
=> <div data-testid=\
"plus-icon\" />,\r\n 
   Search: () => 
<div data-testid=\"se
arch-icon\" />,\r\n  
  Filter: () => <div 
data-testid=\"filter-
icon\" />,\r\n    X: 
() => <div data-testi
d=\"x-icon\" />,\r\n 
   Printer: () => 
<div data-testid=\"pr
inter-icon\" />,\r\n 
   Car: () => <div da
ta-testid=\"car-icon\
" />,\r\n    Wrench: 
() => <div data-testi
d=\"wrench-icon\" 
/>,\r\n    
AlertTriangle: () => 
<div data-testid=\"al
ert-triangle-icon\" 
/>,\r\n    
CheckCircle: () => 
<div data-testid=\"ch
eck-circle-icon\" 
/>,\r\n    
MoreHorizontal: () 
=> <div data-testid=\
"more-horizontal-icon
\" />,\r\n    Edit: 
() => <div data-testi
d=\"edit-icon\" 
/>,\r\n    Trash: () 
=> <div data-testid=\
"trash-icon\" 
/>,\r\n    
ChevronRight: () => 
<div data-testid=\"ch
evron-right-icon\" 
/>,\r\n    
ChevronLeft: () => 
<div data-testid=\"ch
evron-left-icon\" 
/>,\r\n    
ChevronsLeft: () => 
<div data-testid=\"ch
evrons-left-icon\" 
/>,\r\n    
ChevronsRight: () => 
<div data-testid=\"ch
evrons-right-icon\" 
/>,\r\n    Gauge: () 
=> <div data-testid=\
"gauge-icon\" 
/>,\r\n    MapPin: 
() => <div data-testi
d=\"map-pin-icon\" 
/>,\r\n    Settings: 
() => <div data-testi
d=\"settings-icon\" 
/>,\r\n    User: () 
=> <div data-testid=\
"user-icon\" />,\r\n 
   LogOut: () => 
<div data-testid=\"lo
g-out-icon\" />,\r\n 
   Menu: () => <div d
ata-testid=\"menu-ico
n\" 
/>,\r\n}))\r\n\r\n// 
Mock auth\r\nvi.mock(
'@/auth', () => 
({\r\n    auth: vi.fn
().mockResolvedValue(
{ user: { id: '1', 
builderId: 
'builder-1' } 
})\r\n}))\r\n\r\n// 
Mock sync provider\r\
nvi.mock('@/providers
/sync-provider', () 
=> ({\r\n    
useSync: vi.fn().mock
ReturnValue({\r\n    
    engine: {\r\n    
        enqueue: vi.f
n().mockResolvedValue
(true)\r\n        
}\r\n    
})\r\n}))\r\n\r\n// 
Mock env\r\nvi.mock('
@/lib/env', () => 
({\r\n    env: {\r\n 
       NEXTAUTH_URL: 
'http://localhost:300
0',\r\n        
DATABASE_URL: 'postgr
es://localhost:5432/d
b',\r\n        
NEXTAUTH_SECRET: 
'secret'\r\n    
}\r\n}))\r\n\r\n// 
Mock useToast\r\nvi.m
ock('@/components/ui/
use-toast', () => 
({\r\n    useToast: 
() => ({\r\n        
toast: vi.fn()\r\n   
 })\r\n}))\r\n\r\ndes
cribe('Dashboard 
Integration Tests', 
() => {\r\n    
beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n    
})\r\n\r\n    
describe('Builder 
Schedule Page', () 
=> {\r\n        
it('renders schedule 
page with jobs', 
async () => {\r\n    
        vi.mocked(pri
sma.job.findMany).moc
kResolvedValue([\r\n 
               {\r\n 
                   
id: '1',\r\n         
           
lotNumber: 
'123',\r\n           
         
streetAddress: 'Main 
St',\r\n             
       
scheduledDate: new 
Date(),\r\n          
          status: 
'Scheduled',\r\n     
               
builder: { name: 
'Test Builder' }\r\n 
               }\r\n 
           ] as 
any)\r\n\r\n         
   const Page = 
await BuilderSchedule
Page()\r\n           
 
render(Page)\r\n\r\n 
           expect(scr
een.getByText('Builde
r Schedule')).toBeInT
heDocument()\r\n     
       expect(screen.
getByText('Upcoming J
obs')).toBeInTheDocum
ent()\r\n            
expect(screen.getByTe
xt('123 - Main St')).
toBeInTheDocument()\r
\n        })\r\n    
})\r\n\r\n    
describe('Equipment 
Page', () => {\r\n   
     it('renders 
equipment page with 
items', async () => 
{\r\n            vi.m
ocked(prisma.equipmen
t.findMany).mockResol
vedValue([\r\n       
         { id: '1', 
name: 'Blower Door', 
type: 'Testing', 
status: 'Active' 
}\r\n            ] 
as any)\r\n\r\n      
      render(await 
EquipmentPage())\r\n 
           expect(scr
een.getByText('Equipm
ent')).toBeInTheDocum
ent()\r\n            
expect(screen.getByTe
xt('Blower Door')).to
BeInTheDocument()\r\n
            expect(sc
reen.getByText('Activ
e')).toBeInTheDocumen
t()\r\n        
})\r\n    })\r\n\r\n 
   describe('FleetPag
e', () => {\r\n      
  it('renders fleet 
page with vehicles', 
async () => {\r\n    
        vi.mocked(pri
sma.vehicle.findMany)
.mockResolvedValue([\
r\n                { 
id: '1', name: 
'Truck 1', 
licensePlate: 
'ABC-123', status: 
'Active', mileage: 
50000 }\r\n          
  ] as any)\r\n      
      vi.mocked(prism
a.user.findMany).mock
ResolvedValue([\r\n  
              { id: 
'1', name: 'Test 
User' }\r\n          
  ] as any)\r\n\r\n  
          
render(await 
FleetPage())\r\n     
       expect(screen.
getByText('Fleet')).t
oBeInTheDocument()\r\
n            expect(s
creen.getByText('Truc
k 1')).toBeInTheDocum
ent()\r\n            
expect(screen.getByTe
xt('ABC-123')).toBeIn
TheDocument()\r\n    
    })\r\n    })\r\n}
)\r\n","usedDeprecate
dRules":[]},{"filePat
h":"C:\\Users\\shaun\
\Antigrabity Workspac
e\\auditforecaster\\s
rc\\app\\(dashboard)\
\dashboard\\admin\\he
alth\\page.tsx","mess
ages":[{"ruleId":"@ty
pescript-eslint/no-un
used-vars","severity"
:1,"message":"'AlertT
riangle' is defined 
but never used.","lin
e":4,"column":38,"nod
eType":null,"messageI
d":"unusedVar","endLi
ne":4,"endColumn":51}
,{"ruleId":"@typescri
pt-eslint/no-unused-v
ars","severity":1,"me
ssage":"'CheckCircle'
 is defined but 
never used.","line":4
,"column":53,"nodeTyp
e":null,"messageId":"
unusedVar","endLine":
4,"endColumn":64},{"r
uleId":"@typescript-e
slint/no-unused-vars"
,"severity":1,"messag
e":"'pendingMutations
' is assigned a 
value but never used.
","line":21,"column":
11,"nodeType":null,"m
essageId":"unusedVar"
,"endLine":21,"endCol
umn":27}],"suppressed
Messages":[],"errorCo
unt":0,"fatalErrorCou
nt":0,"warningCount":
3,"fixableErrorCount"
:0,"fixableWarningCou
nt":0,"source":"impor
t { prisma } from \"@
/lib/prisma\";\r\nimp
ort { Card, 
CardContent, 
CardHeader, 
CardTitle } from \"@/
components/ui/card\";
\r\nimport { Badge } 
from \"@/components/u
i/badge\";\r\nimport 
{ Activity, 
Database, Server, 
AlertTriangle, 
CheckCircle } from \"
lucide-react\";\r\n\r
\nexport const 
metadata = {\r\n    
title: 'System 
Health | AuditForecas
ter',\r\n};\r\n\r\nex
port default async 
function 
HealthPage() {\r\n   
 // Fetch System 
Stats\r\n    const 
errorCount = await pr
isma.systemLog.count(
{\r\n        where: 
{ level: 'ERROR', 
createdAt: { gte: 
new Date(Date.now() 
- 24 * 60 * 60 * 
1000) } }\r\n    
});\r\n\r\n    const 
recentLogs = await pr
isma.systemLog.findMa
ny({\r\n        
orderBy: { 
createdAt: 'desc' 
},\r\n        take: 
10\r\n    
});\r\n\r\n    const 
pendingMutations = 
0; // Placeholder 
until we can query 
Redis/Queue 
directly\r\n\r\n    
return (\r\n        
<div className=\"spac
e-y-8\">\r\n         
   <div>\r\n         
       <h1 
className=\"text-3xl 
font-bold 
tracking-tight 
text-white\">System 
Health</h1>\r\n      
          <p classNam
e=\"text-gray-400 
mt-1\">Real-time 
monitoring of system 
vitals.</p>\r\n      
      </div>\r\n\r\n 
           {/* 
Vitals Cards */}\r\n 
           <div 
className=\"grid 
gap-6 md:grid-cols-3\
">\r\n               
 <Card className=\"bo
rder-white/10 
bg-white/5 backdrop-b
lur-xl\">\r\n        
            
<CardHeader 
className=\"flex 
flex-row 
items-center 
justify-between 
space-y-0 
pb-2\">\r\n          
              
<CardTitle 
className=\"text-sm 
font-medium 
text-gray-300\">API S
tatus</CardTitle>\r\n
                     
   <Server 
className=\"h-4 w-4 
text-emerald-400\" 
/>\r\n               
     
</CardHeader>\r\n    
                
<CardContent>\r\n    
                    
<div 
className=\"text-2xl 
font-bold text-white\
">Operational</div>\r
\n                   
     <p 
className=\"text-xs t
ext-gray-400\">Uptime
: 99.9%</p>\r\n      
              
</CardContent>\r\n   
             
</Card>\r\n\r\n      
          <Card class
Name=\"border-white/1
0 bg-white/5 backdrop
-blur-xl\">\r\n      
              
<CardHeader 
className=\"flex 
flex-row 
items-center 
justify-between 
space-y-0 
pb-2\">\r\n          
              
<CardTitle 
className=\"text-sm 
font-medium text-gray
-300\">Error Rate (24
h)</CardTitle>\r\n   
                     
<Activity 
className={`h-4 w-4 
${errorCount > 0 ? 
'text-red-400' : 'tex
t-emerald-400'}`} 
/>\r\n               
     
</CardHeader>\r\n    
                
<CardContent>\r\n    
                    
<div 
className=\"text-2xl 
font-bold text-white\
">{errorCount}</div>\
r\n                  
      <p 
className=\"text-xs t
ext-gray-400\">Critic
al events 
logged</p>\r\n       
             
</CardContent>\r\n   
             
</Card>\r\n\r\n      
          <Card class
Name=\"border-white/1
0 bg-white/5 backdrop
-blur-xl\">\r\n      
              
<CardHeader 
className=\"flex 
flex-row 
items-center 
justify-between 
space-y-0 
pb-2\">\r\n          
              
<CardTitle 
className=\"text-sm 
font-medium text-gray
-300\">Database</Card
Title>\r\n           
             
<Database 
className=\"h-4 w-4 
text-blue-400\" 
/>\r\n               
     
</CardHeader>\r\n    
                
<CardContent>\r\n    
                    
<div 
className=\"text-2xl 
font-bold text-white\
">Connected</div>\r\n
                     
   <p 
className=\"text-xs t
ext-gray-400\">Latenc
y: 12ms</p>\r\n      
              
</CardContent>\r\n   
             
</Card>\r\n          
  </div>\r\n\r\n     
       {/* Recent 
Logs */}\r\n         
   <Card className=\"
border-white/10 
bg-white/5 backdrop-b
lur-xl\">\r\n        
        
<CardHeader>\r\n     
               
<CardTitle className=
\"text-white\">Recent
 System 
Logs</CardTitle>\r\n 
               
</CardHeader>\r\n    
            
<CardContent>\r\n    
                <div 
className=\"space-y-4
\">\r\n              
          
{recentLogs.length 
=== 0 ? (\r\n        
                    
<p className=\"text-g
ray-500 text-sm\">No 
logs found.</p>\r\n  
                     
 ) : (\r\n           
                 
recentLogs.map(log 
=> (\r\n             
                   
<div key={log.id} 
className=\"flex 
items-start 
justify-between 
border-b 
border-white/5 pb-4 
last:border-0 
last:pb-0\">\r\n     
                     
          <div classN
ame=\"space-y-1\">\r\
n                    
                    
<div 
className=\"flex 
items-center 
gap-2\">\r\n         
                     
              <Badge 
variant=\"outline\" 
className={\r\n      
                     
                     
log.level === 
'ERROR' ? 
\"border-red-500/20 
bg-red-500/10 
text-red-400\" :\r\n 
                     
                     
         log.level 
=== 'WARN' ? \"border
-yellow-500/20 
bg-yellow-500/10 
text-yellow-400\" 
:\r\n                
                     
                   
\"border-blue-500/20 
bg-blue-500/10 
text-blue-400\"\r\n  
                     
                     
}>\r\n               
                     
            
{log.level}\r\n      
                     
                 
</Badge>\r\n         
                     
              <span 
className=\"text-sm 
font-medium text-whit
e\">{log.message}</sp
an>\r\n              
                     
     </div>\r\n      
                     
             <p 
className=\"text-xs 
text-gray-500 
font-mono\">\r\n     
                     
                  
{log.context ? JSON.s
tringify(log.context)
 : ''}\r\n           
                     
        </p>\r\n     
                     
          </div>\r\n 
                     
              <div 
className=\"text-xs 
text-gray-500\">\r\n 
                     
                  
{new Date(log.created
At).toLocaleString()}
\r\n                 
                   
</div>\r\n           
                     
</div>\r\n           
                 
))\r\n               
         )}\r\n      
              
</div>\r\n           
     
</CardContent>\r\n   
         </Card>\r\n 
       </div>\r\n    
);\r\n}\r\n","usedDep
recatedRules":[]},{"f
ilePath":"C:\\Users\\
shaun\\Antigrabity Wo
rkspace\\auditforecas
ter\\src\\app\\(dashb
oard)\\dashboard\\ass
ets\\equipment\\[id]\
\qrcode\\page.tsx","m
essages":[{"ruleId":"
@next/next/no-img-ele
ment","severity":1,"m
essage":"Using 
`<img>` could result 
in slower LCP and 
higher bandwidth. 
Consider using 
`<Image />` from 
`next/image` or a 
custom image loader 
to automatically 
optimize images. 
This may incur 
additional usage or 
cost from your 
provider. See: https:
//nextjs.org/docs/mes
sages/no-img-element"
,"line":44,"column":2
5,"nodeType":"JSXOpen
ingElement","endLine"
:44,"endColumn":83}],
"suppressedMessages":
[],"errorCount":0,"fa
talErrorCount":0,"war
ningCount":1,"fixable
ErrorCount":0,"fixabl
eWarningCount":0,"sou
rce":"import { 
Button } from \"@/com
ponents/ui/button\"\r
\nimport { Card, 
CardContent, 
CardHeader, 
CardTitle } from \"@/
components/ui/card\"\
r\nimport Link from \
"next/link\"\r\nimpor
t { ArrowLeft } from 
\"lucide-react\"\r\ni
mport { prisma } 
from \"@/lib/prisma\"
\r\nimport { 
notFound } from \"nex
t/navigation\"\r\nimp
ort { PrintButton } 
from \"@/components/p
rint-button\"\r\n\r\n
export const dynamic 
= 'force-dynamic'\r\n
\r\nexport default 
async function Equipm
entQRCodePage({ 
params }: { params: 
Promise<{ id: string 
}> }) {\r\n    const 
{ id } = await 
params\r\n    const 
equipment = await pri
sma.equipment.findUni
que({\r\n        
where: { id }\r\n    
})\r\n\r\n    if 
(!equipment) {\r\n   
     notFound()\r\n  
  }\r\n\r\n    // 
The data encoded in 
the QR code. \r\n    
// Ideally this is a 
URL to the 
check-in/out page 
for this item.\r\n   
 // e.g., https://app
.auditforecaster.com/
dashboard/assets/equi
pment/scan?id=...\r\n
    // For local 
dev, we'll just 
encode the ID.\r\n   
 const qrData = 
JSON.stringify({ id: 
equipment.id, type: 
'EQUIPMENT' })\r\n   
 const qrUrl = `https
://api.qrserver.com/v
1/create-qr-code/?siz
e=300x300&data=${enco
deURIComponent(qrData
)}`\r\n\r\n    
return (\r\n        
<div className=\"spac
e-y-6 max-w-md 
mx-auto 
text-center\">\r\n   
         <div 
className=\"flex 
items-center 
justify-start\">\r\n 
               
<Button 
variant=\"ghost\" 
size=\"icon\" 
asChild>\r\n         
           <Link href
=\"/dashboard/assets/
equipment\">\r\n     
                   
<ArrowLeft 
className=\"h-4 
w-4\" />\r\n         
           
</Link>\r\n          
      </Button>\r\n  
          
</div>\r\n\r\n       
     <Card className=
\"print:shadow-none p
rint:border-none\">\r
\n                
<CardHeader>\r\n     
               
<CardTitle>Asset 
Tag</CardTitle>\r\n  
              
</CardHeader>\r\n    
            
<CardContent 
className=\"flex 
flex-col 
items-center 
space-y-6\">\r\n     
               <div 
className=\"border-4 
border-black p-4 
rounded-lg\">\r\n    
                    
<img src={qrUrl} 
alt=\"QR Code\" 
width={200} 
height={200} />\r\n  
                  
</div>\r\n\r\n       
             <div cla
ssName=\"space-y-2\">
\r\n                 
       <h3 
className=\"text-2xl 
font-bold\">{equipmen
t.name}</h3>\r\n     
                   
<p className=\"text-m
uted-foreground font-
mono\">{equipment.ser
ialNumber || 'No 
Serial'}</p>\r\n     
                   
<p 
className=\"text-xs t
ext-muted-foreground\
">{equipment.id}</p>\
r\n                  
  </div>\r\n\r\n     
               
<PrintButton />\r\n  
              
</CardContent>\r\n   
         </Card>\r\n 
       </div>\r\n    
)\r\n}\r\n","usedDepr
ecatedRules":[]},{"fi
lePath":"C:\\Users\\s
haun\\Antigrabity Wor
kspace\\auditforecast
er\\src\\app\\(dashbo
ard)\\dashboard\\dev\
\progress\\page.tsx",
"messages":[{"ruleId"
:"@typescript-eslint/
no-unused-vars","seve
rity":1,"message":"'F
eature' is defined 
but never used.","lin
e":1,"column":26,"nod
eType":null,"messageI
d":"unusedVar","endLi
ne":1,"endColumn":33}
,{"ruleId":"@typescri
pt-eslint/no-explicit
-any","severity":2,"m
essage":"Unexpected 
any. Specify a 
different type.","lin
e":72,"column":83,"no
deType":"TSAnyKeyword
","messageId":"unexpe
ctedAny","endLine":72
,"endColumn":86,"sugg
estions":[{"messageId
":"suggestUnknown","f
ix":{"range":[3255,32
58],"text":"unknown"}
,"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3255,3258],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":1,"fatal
ErrorCount":0,"warnin
gCount":1,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { 
getDevFeatures, 
Feature } from \"@/ap
p/actions/dev\";\r\ni
mport { Card, 
CardContent, 
CardHeader, 
CardTitle } from \"@/
components/ui/card\";
\r\nimport { Badge } 
from \"@/components/u
i/badge\";\r\nimport 
{ Progress } from \"@
/components/ui/progre
ss\";\r\nimport { 
CheckCircle2, 
Circle, Clock, 
AlertCircle, 
Terminal } from \"luc
ide-react\";\r\n\r\ne
xport const metadata 
= {\r\n    title: 
'Development 
Progress | AuditForec
aster',\r\n    
description: 'Track 
development progress 
and feature status',\
r\n};\r\n\r\nfunction
 getStatusColor(statu
s: string) {\r\n    
switch (status) 
{\r\n        case 
'done': return 
'default'; // 
usually 
black/primary\r\n    
    case 
'in-progress': 
return 'secondary'; 
// usually 
gray/blueish\r\n     
   case 'todo': 
return 
'outline';\r\n       
 case 'failed': 
return 
'destructive';\r\n   
     default: return 
'outline';\r\n    }\r
\n}\r\n\r\nfunction g
etStatusIcon(status: 
string) {\r\n    
switch (status) 
{\r\n        case 
'done': return 
<CheckCircle2 
className=\"h-4 w-4 
text-green-500\" 
/>;\r\n        case 
'in-progress': 
return <Clock 
className=\"h-4 w-4 
text-blue-500\" 
/>;\r\n        case 
'todo': return 
<Circle 
className=\"h-4 w-4 
text-gray-400\" 
/>;\r\n        case 
'failed': return 
<AlertCircle 
className=\"h-4 w-4 
text-red-500\" 
/>;\r\n        
default: return 
<Circle 
className=\"h-4 
w-4\" />;\r\n    
}\r\n}\r\n\r\nexport 
default async 
function 
ProgressDashboard() 
{\r\n    const { 
success, data, error 
} = await getDevFeatu
res();\r\n\r\n    if 
(!success || !data) 
{\r\n        return 
(\r\n            
<div className=\"p-6\
">\r\n               
 <h1 
className=\"text-2xl 
font-bold 
text-red-600\">Error 
Loading 
Progress</h1>\r\n    
            
<p>{error || 
\"Unknown error 
occurred\"}</p>\r\n  
          </div>\r\n 
       );\r\n    
}\r\n\r\n    const 
total = data.features
.length;\r\n    
const done = data.fea
tures.filter(f => 
f.status === 
'done').length;\r\n  
  const progress = 
total > 0 ? (done / 
total) * 100 : 
0;\r\n\r\n    return 
(\r\n        <div cla
ssName=\"space-y-6 
p-6\">\r\n           
 <div 
className=\"flex 
items-center justify-
between\">\r\n       
         <div>\r\n   
                 <h1 
className=\"text-3xl 
font-bold tracking-ti
ght\">Development 
Progress</h1>\r\n    
                <p cl
assName=\"text-muted-
foreground\">Real-tim
e status from Agent 
Harness</p>\r\n      
          </div>\r\n 
               <div c
lassName=\"text-right
\">\r\n              
      <div 
className=\"text-2xl 
font-bold\">{Math.rou
nd(progress)}%</div>\
r\n                  
  <div 
className=\"text-sm t
ext-muted-foreground\
">{done} of {total} 
phases 
complete</div>\r\n   
             
</div>\r\n           
 </div>\r\n\r\n      
      <Progress 
value={progress} 
className=\"h-2\" 
/>\r\n\r\n           
 <div 
className=\"grid 
gap-4\">\r\n         
       {data.features
.map((feature) => 
(\r\n                
    <Card 
key={feature.id} clas
sName={feature.status
 === 'in-progress' ? 
'border-blue-500 
border-2' : ''}>\r\n 
                     
  <CardHeader classNa
me=\"pb-2\">\r\n     
                     
  <div 
className=\"flex 
items-center justify-
between\">\r\n       
                     
    <CardTitle 
className=\"text-lg 
flex items-center 
gap-2\">\r\n         
                     
      {getStatusIcon(
feature.status)}\r\n 
                     
              {featur
e.description}\r\n   
                     
        
</CardTitle>\r\n     
                     
      <Badge variant=
{getStatusColor(featu
re.status) as 
any}>\r\n            
                     
   {feature.status.to
UpperCase()}\r\n     
                     
      </Badge>\r\n   
                     
    </div>\r\n       
                 
</CardHeader>\r\n    
                    
<CardContent>\r\n    
                     
   <div 
className=\"mt-2 
space-y-2\">\r\n     
                     
      <div 
className=\"text-sm 
font-semibold text-mu
ted-foreground flex 
items-center 
gap-2\">\r\n         
                     
      <Terminal 
className=\"h-3 
w-3\" />\r\n         
                     
      Verification 
Steps:\r\n           
                     
</div>\r\n           
                     
<ul className=\"list-
disc list-inside 
text-sm space-y-1 
ml-1\">\r\n          
                     
     {feature.verific
ation_steps.map((step
, idx) => (\r\n      
                     
             <li 
key={idx} className=\
"text-muted-foregroun
d\">{step}</li>\r\n  
                     
             ))}\r\n 
                     
          </ul>\r\n  
                     
     </div>\r\n      
                  
</CardContent>\r\n   
                 
</Card>\r\n          
      ))}\r\n        
    </div>\r\n       
 </div>\r\n    );\r\n
}\r\n","usedDeprecate
dRules":[]},{"filePat
h":"C:\\Users\\shaun\
\Antigrabity Workspac
e\\auditforecaster\\s
rc\\app\\(dashboard)\
\dashboard\\page.tsx"
,"messages":[{"ruleId
":"@typescript-eslint
/no-unused-vars","sev
erity":1,"message":"'
CardTitle' is 
defined but never use
d.","line":2,"column"
:41,"nodeType":null,"
messageId":"unusedVar
","endLine":2,"endCol
umn":50}],"suppressed
Messages":[],"errorCo
unt":0,"fatalErrorCou
nt":0,"warningCount":
1,"fixableErrorCount"
:0,"fixableWarningCou
nt":0,"source":"impor
t { prisma } from \"@
/lib/prisma\"\r\nimpo
rt { Card, 
CardContent, 
CardHeader, 
CardTitle } from \"@/
components/ui/card\"\
r\nimport { 
DollarSign, Users, 
HardHat, Activity } 
from \"lucide-react\"
\r\nimport { 
RevenueChart, Builder
DistributionChart } 
from \"@/components/a
nalytics-charts\"\r\n
\r\nimport { 
Metadata } from \"nex
t\"\r\n\r\nexport 
const dynamic = 'forc
e-dynamic'\r\n\r\nexp
ort const metadata: 
Metadata = {\r\n    
title: 
\"Dashboard\",\r\n   
 description: 
\"Overview of your 
inspection tasks, 
recent activity, and 
quick actions.\",\r\n
}\r\n\r\nexport 
default async 
function 
DashboardPage() 
{\r\n    const [\r\n 
       invoicedJobsCo
unt,\r\n        
activeJobsCount,\r\n 
       
buildersCount,\r\n   
     
totalJobsCount,\r\n  
      completedJobsCo
unt\r\n    ] = await 
prisma.$transaction([
\r\n        
prisma.job.count({ 
where: { status: 
'INVOICED' } }),\r\n 
       
prisma.job.count({ 
where: { status: { 
in: ['ASSIGNED', 
'IN_PROGRESS'] } } 
}),\r\n        prisma
.builder.count(),\r\n
        prisma.job.co
unt(),\r\n        
prisma.job.count({ 
where: { status: { 
in: ['COMPLETED', 
'REVIEWED', 
'INVOICED'] } } 
})\r\n    ])\r\n\r\n 
   // Mock revenue 
calculation: $450 
per invoiced job\r\n 
   const 
totalRevenue = 
invoicedJobsCount * 
450\r\n\r\n    const 
completionRate = 
totalJobsCount > 
0\r\n        ? Math.r
ound((completedJobsCo
unt / 
totalJobsCount) * 
100)\r\n        : 
0\r\n\r\n    return 
(\r\n        <div cla
ssName=\"space-y-6\">
\r\n            <div 
className=\"flex 
items-center justify-
between\">\r\n       
         <h1 
className=\"text-3xl 
font-bold tracking-ti
ght\">Dashboard</h1>\
r\n            
</div>\r\n           
 <div 
className=\"grid 
gap-4 md:grid-cols-2 
lg:grid-cols-4\">\r\n
                
<Card>\r\n           
         <CardHeader 
className=\"flex 
flex-row 
items-center 
justify-between 
space-y-0 
pb-2\">\r\n          
              <h2 
className=\"text-sm 
font-medium tracking-
tight\">Total 
Revenue</h2>\r\n     
                   
<DollarSign 
className=\"h-4 w-4 t
ext-muted-foreground\
" />\r\n             
       
</CardHeader>\r\n    
                
<CardContent>\r\n    
                    
<div 
className=\"text-2xl 
font-bold\">${totalRe
venue.toLocaleString(
)}</div>\r\n         
               <p 
className=\"text-xs t
ext-muted-foreground\
">\r\n               
             
{invoicedJobsCount} 
jobs invoiced\r\n    
                    
</p>\r\n             
       
</CardContent>\r\n   
             
</Card>\r\n          
      <Card>\r\n     
               
<CardHeader 
className=\"flex 
flex-row 
items-center 
justify-between 
space-y-0 
pb-2\">\r\n          
              <h2 
className=\"text-sm 
font-medium tracking-
tight\">Active 
Jobs</h2>\r\n        
                
<Activity 
className=\"h-4 w-4 t
ext-muted-foreground\
" />\r\n             
       
</CardHeader>\r\n    
                
<CardContent>\r\n    
                    
<div 
className=\"text-2xl 
font-bold\">{activeJo
bsCount}</div>\r\n   
                     
<p 
className=\"text-xs t
ext-muted-foreground\
">\r\n               
             In 
progress or 
assigned\r\n         
               
</p>\r\n             
       
</CardContent>\r\n   
             
</Card>\r\n          
      <Card>\r\n     
               
<CardHeader 
className=\"flex 
flex-row 
items-center 
justify-between 
space-y-0 
pb-2\">\r\n          
              <h2 
className=\"text-sm 
font-medium tracking-
tight\">Builders</h2>
\r\n                 
       <HardHat 
className=\"h-4 w-4 t
ext-muted-foreground\
" />\r\n             
       
</CardHeader>\r\n    
                
<CardContent>\r\n    
                    
<div 
className=\"text-2xl 
font-bold\">{builders
Count}</div>\r\n     
                   
<p 
className=\"text-xs t
ext-muted-foreground\
">\r\n               
             Active 
partnerships\r\n     
                   
</p>\r\n             
       
</CardContent>\r\n   
             
</Card>\r\n          
      <Card>\r\n     
               
<CardHeader 
className=\"flex 
flex-row 
items-center 
justify-between 
space-y-0 
pb-2\">\r\n          
              <h2 
className=\"text-sm 
font-medium tracking-
tight\">Completion 
Rate</h2>\r\n        
                
<Users 
className=\"h-4 w-4 t
ext-muted-foreground\
" />\r\n             
       
</CardHeader>\r\n    
                
<CardContent>\r\n    
                    
<div 
className=\"text-2xl 
font-bold\">{completi
onRate}%</div>\r\n   
                     
<p 
className=\"text-xs t
ext-muted-foreground\
">\r\n               
             
{completedJobsCount} 
of {totalJobsCount} 
jobs\r\n             
           </p>\r\n  
                  
</CardContent>\r\n   
             
</Card>\r\n          
  </div>\r\n         
   <div 
className=\"grid 
gap-4 md:grid-cols-2 
lg:grid-cols-7\">\r\n
                
<RevenueChart />\r\n 
               <Build
erDistributionChart 
/>\r\n            
</div>\r\n        
</div>\r\n    )\r\n}\
r\n","usedDeprecatedR
ules":[]},{"filePath"
:"C:\\Users\\shaun\\A
ntigrabity Workspace\
\auditforecaster\\src
\\app\\(dashboard)\\d
ashboard\\reports\\[i
d]\\page.tsx","messag
es":[{"ruleId":"@next
/next/no-img-element"
,"severity":1,"messag
e":"Using `<img>` 
could result in 
slower LCP and 
higher bandwidth. 
Consider using 
`<Image />` from 
`next/image` or a 
custom image loader 
to automatically 
optimize images. 
This may incur 
additional usage or 
cost from your 
provider. See: https:
//nextjs.org/docs/mes
sages/no-img-element"
,"line":86,"column":2
5,"nodeType":"JSXOpen
ingElement","endLine"
:86,"endColumn":100},
{"ruleId":"@next/next
/no-img-element","sev
erity":1,"message":"U
sing `<img>` could 
result in slower LCP 
and higher 
bandwidth. Consider 
using `<Image />` 
from `next/image` or 
a custom image 
loader to 
automatically 
optimize images. 
This may incur 
additional usage or 
cost from your 
provider. See: https:
//nextjs.org/docs/mes
sages/no-img-element"
,"line":147,"column":
25,"nodeType":"JSXOpe
ningElement","endLine
":151,"endColumn":27}
,{"ruleId":"@next/nex
t/no-img-element","se
verity":1,"message":"
Using `<img>` could 
result in slower LCP 
and higher 
bandwidth. Consider 
using `<Image />` 
from `next/image` or 
a custom image 
loader to 
automatically 
optimize images. 
This may incur 
additional usage or 
cost from your 
provider. See: https:
//nextjs.org/docs/mes
sages/no-img-element"
,"line":269,"column":
37,"nodeType":"JSXOpe
ningElement","endLine
":269,"endColumn":114
}],"suppressedMessage
s":[],"errorCount":0,
"fatalErrorCount":0,"
warningCount":3,"fixa
bleErrorCount":0,"fix
ableWarningCount":0,"
source":"import { 
prisma } from \"@/lib
/prisma\"\r\nimport 
{ Button } from \"@/c
omponents/ui/button\"
\r\nimport { 
Printer, MapPin, 
Wind, Droplets, Sun 
} from \"lucide-react
\"\r\nimport { 
notFound } from \"nex
t/navigation\"\r\nimp
ort { 
DownloadPDFButton } 
from \"@/components/d
ownload-pdf-button\"\
r\nimport { 
TemplateStructure, 
evaluateLogic, 
Answer } from \"@/lib
/reporting/engine\"\r
\n\r\nexport default 
async function 
ReportPage({ params 
}: { params: 
Promise<{ id: string 
}> }) {\r\n    const 
{ id } = await 
params\r\n    const 
job = await prisma.jo
b.findUnique({\r\n   
     where: { id 
},\r\n        
include: {\r\n       
     builder: 
true,\r\n            
inspector: true,\r\n 
           
inspections: {\r\n   
             
include: {\r\n       
             photos: 
true,\r\n            
        
reportTemplate: 
true\r\n             
   },\r\n            
    orderBy: { 
createdAt: 'desc' 
},\r\n               
 take: 1\r\n         
   },\r\n        
},\r\n    })\r\n\r\n 
   if (!job) 
notFound()\r\n\r\n   
 const inspection = j
ob.inspections[0]\r\n
    if (!inspection) 
notFound()\r\n\r\n   
 // 1. Load Template 
& Answers\r\n    
const structure = (in
spection.reportTempla
te?.structure as 
unknown as 
TemplateStructure) 
|| { pages: [], 
logic: [] }\r\n    
const answers = 
(inspection.answers 
as unknown as 
Record<string, 
Answer>) || {}\r\n   
 const logicState = e
valuateLogic(structur
e, answers)\r\n\r\n  
  // 2. Calculate 
Stats\r\n    const 
score = 
inspection.score || 
0\r\n    const 
maxScore = 
inspection.maxScore 
|| 100\r\n    const 
percentage = 
maxScore > 0 ? 
Math.round((score / 
maxScore) * 100) : 
0\r\n\r\n    // 
Identify Failed 
Items\r\n    const 
flaggedItems: { 
label: string; note: 
string; page: string 
}[] = []\r\n\r\n    s
tructure.pages.forEac
h(page => {\r\n      
  page.sections.forEa
ch(section => {\r\n  
          section.ite
ms.forEach(item => 
{\r\n                
if (!logicState[item.
id]?.visible) 
return\r\n           
     const ans = 
answers[item.id]\r\n 
               if 
(ans?.notes) {\r\n   
                 flag
gedItems.push({\r\n  
                     
 label: 
item.label,\r\n      
                  
note: ans.notes,\r\n 
                     
  page: 
page.title\r\n       
             })\r\n  
              }\r\n  
              if 
(item.type === 
'select' && 
ans?.value === 
'Fail') {\r\n        
            flaggedIt
ems.push({\r\n       
                 
label: 
item.label,\r\n      
                  
note: 'Marked as 
Failed',\r\n         
               page: 
page.title\r\n       
             })\r\n  
              }\r\n  
          })\r\n     
   })\r\n    
})\r\n\r\n    const 
coverPhoto = inspecti
on.photos[0]?.url\r\n
\r\n    return (\r\n 
       <div className
=\"max-w-[210mm] 
mx-auto bg-white 
min-h-screen 
print:p-0 
text-slate-900 
font-sans\">\r\n     
       {/* Print 
Controls */}\r\n     
       <div 
className=\"flex 
justify-end gap-2 
p-8 print:hidden 
bg-slate-50 
border-b\">\r\n      
          
<DownloadPDFButton 
jobId={job.id} 
/>\r\n               
 <Button onClick={() 
=> 
window.print()}>\r\n 
                   
<Printer 
className=\"mr-2 h-4 
w-4\" />\r\n         
           Print 
Report\r\n           
     </Button>\r\n   
         
</div>\r\n\r\n       
     {/* --- PAGE 1: 
COVER --- */}\r\n    
        <div classNam
e=\"h-[297mm] 
relative flex 
flex-col print:break-
after-page 
bg-slate-900 
text-white\">\r\n    
            {/* Hero 
Image Background 
*/}\r\n              
  {coverPhoto && 
(\r\n                
    <div 
className=\"absolute 
inset-0 z-0 opacity-4
0\">\r\n\r\n         
               <img 
src={coverPhoto} 
alt=\"Cover\" 
className=\"w-full 
h-full 
object-cover\" 
/>\r\n               
         <div 
className=\"absolute 
inset-0 
bg-gradient-to-t 
from-slate-900 
via-slate-900/50 
to-transparent\" 
/>\r\n               
     </div>\r\n      
          )}\r\n\r\n 
               <div 
className=\"relative 
z-10 flex-1 flex 
flex-col 
justify-between 
p-16\">\r\n          
          {/* Header 
*/}\r\n              
      <div className=
\"border-l-4 
border-blue-500 
pl-6\">\r\n          
              <h1 
className=\"text-6xl 
font-bold 
tracking-tight mb-4\"
>{inspection.reportTe
mplate?.name || 
'Inspection 
Report'}</h1>\r\n    
                    
<p 
className=\"text-2xl 
text-slate-300 font-l
ight\">Compliance & 
Quality 
Audit</p>\r\n        
            
</div>\r\n\r\n       
             {/* 
Details */}\r\n      
              <div 
className=\"grid 
grid-cols-2 
gap-12\">\r\n        
                <div 
className=\"space-y-6
\">\r\n              
              
<div>\r\n            
                    
<h3 
className=\"text-xs 
font-bold uppercase 
tracking-widest 
text-blue-400 mb-1\">
Property</h3>\r\n    
                     
       <p 
className=\"text-3xl 
font-medium\">{job.st
reetAddress}</p>\r\n 
                     
          <p 
className=\"text-xl t
ext-slate-400\">{job.
city}, TX</p>\r\n    
                     
   </div>\r\n        
                    
<div>\r\n            
                    
<h3 
className=\"text-xs 
font-bold uppercase 
tracking-widest 
text-blue-400 mb-1\">
Client</h3>\r\n      
                     
     <p className=\"t
ext-2xl\">{job.builde
r?.name}</p>\r\n     
                     
  </div>\r\n         
               
</div>\r\n           
             <div cla
ssName=\"space-y-6 
text-right\">\r\n    
                     
   <div>\r\n         
                     
  <h3 
className=\"text-xs 
font-bold uppercase 
tracking-widest 
text-blue-400 
mb-1\">Date</h3>\r\n 
                     
          <p classNam
e=\"text-2xl\">{new D
ate(inspection.create
dAt).toLocaleDateStri
ng()}</p>\r\n        
                    
</div>\r\n           
                 
<div>\r\n            
                    
<h3 
className=\"text-xs 
font-bold uppercase 
tracking-widest 
text-blue-400 mb-1\">
Inspector</h3>\r\n   
                     
        <p className=
\"text-2xl\">{job.ins
pector?.name}</p>\r\n
                     
       </div>\r\n    
                     
   <div>\r\n         
                     
  <h3 
className=\"text-xs 
font-bold uppercase 
tracking-widest 
text-blue-400 mb-1\">
Score</h3>\r\n       
                     
    <div 
className=\"text-5xl 
font-bold text-blue-4
00\">{percentage}%</d
iv>\r\n              
              
</div>\r\n           
             
</div>\r\n           
         </div>\r\n  
              
</div>\r\n\r\n       
         {/* Footer 
Branding */}\r\n     
           <div 
className=\"relative 
z-10 p-8 
bg-slate-950 flex 
justify-between 
items-center 
text-slate-500 
text-sm\">\r\n       
             
<span>Ulrich Energy 
Auditing</span>\r\n  
                  <sp
an>www.ulrich-energy.
com</span>\r\n       
         </div>\r\n  
          
</div>\r\n\r\n       
     {/* --- PAGE 2: 
EXECUTIVE SUMMARY 
--- */}\r\n          
  <div 
className=\"p-12 
min-h-[297mm] print:b
reak-after-page 
bg-white\">\r\n      
          <h2 
className=\"text-3xl 
font-bold 
text-slate-900 mb-8 
pb-4 border-b-2 borde
r-slate-100\">Executi
ve 
Summary</h2>\r\n\r\n 
               {/* 
Context Grid */}\r\n 
               <div 
className=\"grid 
grid-cols-2 gap-8 
mb-12\">\r\n         
           {/* Map 
*/}\r\n              
      <div className=
\"rounded-xl 
overflow-hidden 
border 
border-slate-200 
bg-slate-50 h-64 
relative\">\r\n      
                  
<div 
className=\"absolute 
inset-0 flex 
items-center 
justify-center text-s
late-400\">\r\n      
                     
 <span 
className=\"flex 
items-center 
gap-2\"><MapPin 
className=\"h-4 
w-4\" /> Map 
View</span>\r\n      
                  
</div>\r\n\r\n       
                 
<img\r\n             
               src={`
https://maps.googleap
is.com/maps/api/stati
cmap?center=${encodeU
RIComponent(job.stree
tAddress + ' ' + job.
city)}&zoom=15&size=6
00x400&key=YOUR_API_K
EY`}\r\n             
               
alt=\"Map\"\r\n      
                     
 className=\"w-full 
h-full object-cover 
opacity-75 mix-blend-
multiply\"\r\n       
                 
/>\r\n               
     </div>\r\n\r\n  
                  
{/* Weather & Stats 
*/}\r\n              
      <div 
className=\"grid 
grid-rows-2 
gap-4\">\r\n         
               <div c
lassName=\"bg-blue-50
 rounded-xl p-6 
border 
border-blue-100 flex 
flex-col justify-cent
er\">\r\n            
                <h3 c
lassName=\"text-blue-
900 font-semibold 
mb-4 flex 
items-center 
gap-2\">\r\n         
                     
  <Sun 
className=\"h-5 
w-5\" /> Weather 
Conditions\r\n       
                     
</h3>\r\n            
                <div 
className=\"grid 
grid-cols-2 gap-4 
text-sm\">\r\n       
                     
    <div>\r\n        
                     
       <span classNam
e=\"text-blue-400 
block text-xs upperca
se\">Temp</span>\r\n 
                     
              <span c
lassName=\"font-mediu
m text-lg\">72┬░F</sp
an>\r\n              
                  
</div>\r\n           
                     
<div>\r\n            
                     
   <span className=\"
text-blue-400 block 
text-xs uppercase\">H
umidity</span>\r\n   
                     
            <span cla
ssName=\"font-medium 
text-lg flex 
items-center 
gap-1\"><Droplets 
className=\"h-3 
w-3\" /> 
45%</span>\r\n       
                     
    </div>\r\n       
                     
    <div>\r\n        
                     
       <span classNam
e=\"text-blue-400 
block text-xs upperca
se\">Wind</span>\r\n 
                     
              <span c
lassName=\"font-mediu
m text-lg flex 
items-center 
gap-1\"><Wind 
className=\"h-3 
w-3\" /> 
5mph</span>\r\n      
                     
     </div>\r\n      
                     
 </div>\r\n          
              
</div>\r\n           
             <div cla
ssName=\"bg-slate-50 
rounded-xl p-6 
border 
border-slate-200 
flex flex-col justify
-center\">\r\n       
                     
<h3 className=\"text-
slate-900 
font-semibold 
mb-2\">Inspection 
Score</h3>\r\n       
                     
<div 
className=\"flex 
items-end 
gap-2\">\r\n         
                     
  <span 
className=\"text-5xl 
font-bold text-slate-
900\">{percentage}%</
span>\r\n            
                    
<span className=\"tex
t-slate-500 mb-1\">/ 
100%</span>\r\n      
                     
 </div>\r\n          
                  
<div 
className=\"w-full 
bg-slate-200 h-2 
rounded-full mt-2 ove
rflow-hidden\">\r\n  
                     
         <div classNa
me=\"bg-blue-600 
h-full\" style={{ 
width: 
`${percentage}%` }} 
/>\r\n               
             
</div>\r\n           
             
</div>\r\n           
         </div>\r\n  
              
</div>\r\n\r\n       
         {/* Flagged 
Items */}\r\n        
        <div classNam
e=\"mb-12\">\r\n     
               <h3 
className=\"text-xl 
font-bold 
text-slate-900 
mb-4\">Action Items 
& Notes</h3>\r\n     
               
{flaggedItems.length 
> 0 ? (\r\n          
              <div cl
assName=\"space-y-3\"
>\r\n                
            {flaggedI
tems.map((item, i) 
=> (\r\n             
                   
<div key={i} 
className=\"flex 
gap-4 p-4 bg-red-50 
border 
border-red-100 
rounded-lg\">\r\n    
                     
           <div class
Name=\"flex-none w-1 
bg-red-500 
rounded-full\" 
/>\r\n               
                     
<div>\r\n            
                     
       <h4 className=
\"font-semibold text-
red-900\">{item.label
}</h4>\r\n           
                     
        <p className=
\"text-red-700 
text-sm mt-1\">{item.
note}</p>\r\n        
                     
           <span 
className=\"text-xs 
text-red-400 mt-2 
block uppercase track
ing-wider\">{item.pag
e}</span>\r\n        
                     
       </div>\r\n    
                     
       </div>\r\n    
                     
   ))}\r\n           
             
</div>\r\n           
         ) : (\r\n   
                     
<div className=\"p-6 
bg-green-50 border 
border-green-100 
rounded-lg 
text-green-800 flex 
items-center 
gap-3\">\r\n         
                   
<div className=\"h-8 
w-8 rounded-full 
bg-green-200 flex 
items-center justify-
center\">Γ£ô</div>\r\
n                    
        <div>No 
critical issues or 
notes found. Great 
job!</div>\r\n       
                 
</div>\r\n           
         )}\r\n      
          </div>\r\n 
           
</div>\r\n\r\n       
     {/* --- DYNAMIC 
PAGES --- */}\r\n    
        {structure.pa
ges.map((page) => 
(\r\n                
<div key={page.id} 
className=\"p-12 
min-h-[297mm] print:b
reak-after-page 
bg-white\">\r\n      
              <h2 
className=\"text-2xl 
font-bold 
text-slate-900 mb-8 
pb-4 border-b-2 
border-slate-100 
flex justify-between 
items-center\">\r\n  
                     
 {page.title}\r\n    
                    
<span 
className=\"text-sm 
font-normal text-slat
e-400\">Page {structu
re.pages.indexOf(page
) + 1}</span>\r\n    
                
</h2>\r\n\r\n        
            <div clas
sName=\"space-y-12\">
\r\n                 
       {page.sections
.map((section) => 
(\r\n                
            <div 
key={section.id} clas
sName=\"break-inside-
avoid\">\r\n         
                     
  <h3 
className=\"text-lg 
font-bold 
text-slate-700 mb-4 
bg-slate-50 p-2 
rounded-md border bor
der-slate-100\">\r\n 
                     
              
{section.title}\r\n  
                     
         
</h3>\r\n\r\n        
                     
   <div className=\"s
pace-y-6\">\r\n      
                     
         {section.ite
ms.map((item) => 
{\r\n                
                     
   if (!logicState[it
em.id]?.visible) 
return null\r\n      
                     
             const 
answer = answers[item
.id]\r\n\r\n         
                     
          return 
(\r\n                
                     
       <div 
key={item.id} 
className=\"border-b 
border-slate-100 
pb-6 
last:border-0\">\r\n 
                     
                     
     <div 
className=\"flex 
justify-between 
items-start 
gap-8\">\r\n         
                     
                     
 <div className=\"fle
x-1\">\r\n           
                     
                     
   <p className=\"fon
t-medium 
text-slate-900 mb-1\"
>{item.label}</p>\r\n
                     
                     
              
{answer?.value ? 
(\r\n                
                     
                     
  <div className=\"te
xt-slate-600\">\r\n  
                     
                     
                    {
String(answer.value)}
\r\n                 
                     
                     
 </div>\r\n          
                     
                     
    ) : null}\r\n    
                     
                     
          
{answer?.notes ? 
(\r\n                
                     
                     
  <div 
className=\"mt-2 
text-sm 
text-amber-700 
bg-amber-50 p-2 
rounded border 
border-amber-100 
inline-block\">\r\n  
                     
                     
                    
Note: 
{answer.notes}\r\n   
                     
                     
               
</div>\r\n           
                     
                     
   ) : null}\r\n     
                     
                     
     </div>\r\n      
                     
                     
</div>\r\n           
                     
            
</div>\r\n           
                     
        )\r\n        
                     
       })}\r\n       
                     
    </div>\r\n       
                     
</div>\r\n           
             ))}\r\n 
                   
</div>\r\n           
     </div>\r\n      
      ))}\r\n\r\n    
        {/* --- 
PHOTOS APPENDIX --- 
*/}\r\n            {i
nspection.photos.leng
th > 0 && (\r\n      
          <div 
className=\"p-12 
min-h-[297mm] print:b
reak-after-page 
bg-white\">\r\n      
              <h2 
className=\"text-3xl 
font-bold 
text-slate-900 mb-8 
pb-4 border-b-2 borde
r-slate-100\">Site 
Photos</h2>\r\n      
              <div 
className=\"grid 
grid-cols-2 
gap-8\">\r\n         
               {inspe
ction.photos.map((pho
to) => (\r\n         
                   
<div key={photo.id} c
lassName=\"break-insi
de-avoid bg-slate-50 
p-2 rounded-xl 
border 
border-slate-200 
shadow-sm\">\r\n     
                     
      <div className=
\"aspect-video 
bg-slate-200 
rounded-lg 
overflow-hidden mb-3 
relative\">\r\n\r\n  
                     
             <img 
src={photo.url} 
alt=\"Evidence\" 
className=\"w-full 
h-full 
object-cover\" 
/>\r\n               
                 
</div>\r\n           
                     
<div 
className=\"px-2 
pb-2\">\r\n          
                     
     <p className=\"f
ont-medium 
text-slate-900 text-s
m\">{photo.caption 
|| 'No 
caption'}</p>\r\n    
                     
           <p 
className=\"text-xs 
text-slate-400 
mt-1\">{new Date(phot
o.createdAt).toLocale
String()}</p>\r\n    
                     
       </div>\r\n    
                     
   </div>\r\n        
                
))}\r\n              
      </div>\r\n     
           
</div>\r\n           
 )}\r\n\r\n          
  {/* --- DISCLAIMER 
--- */}\r\n          
  <div 
className=\"p-12 
bg-slate-50 
text-slate-400 
text-xs text-center 
border-t 
border-slate-200 prin
t:break-before-auto\"
>\r\n                
<p className=\"mb-2\"
>┬⌐ {new Date().getFu
llYear()} Ulrich 
Energy Auditing. All 
rights 
reserved.</p>\r\n    
            <p>This 
report is a snapshot 
of conditions at the 
time of inspection. 
Hidden defects may 
exist. This report 
does not constitute 
a warranty or 
guarantee of future 
performance. All 
data is collected 
using 
industry-standard 
equipment and methodo
logies.</p>\r\n      
      </div>\r\n     
   </div>\r\n    )\r\
n}\r\n","usedDeprecat
edRules":[]},{"filePa
th":"C:\\Users\\shaun
\\Antigrabity Workspa
ce\\auditforecaster\\
src\\app\\(dashboard)
\\dashboard\\team\\in
spectors\\page.tsx","
messages":[{"ruleId":
"@typescript-eslint/n
o-unused-vars","sever
ity":1,"message":"'In
spectorInput' is 
defined but never use
d.","line":4,"column"
:10,"nodeType":null,"
messageId":"unusedVar
","endLine":4,"endCol
umn":24}],"suppressed
Messages":[],"errorCo
unt":0,"fatalErrorCou
nt":0,"warningCount":
1,"fixableErrorCount"
:0,"fixableWarningCou
nt":0,"source":"impor
t { prisma } from \"@
/lib/prisma\"\r\nimpo
rt { InspectorDialog 
} from \"@/components
/team/inspector-dialo
g\"\r\nimport { 
InspectorGrid } from 
\"@/components/team/i
nspector-grid\"\r\nim
port { 
InspectorInput } 
from \"@/lib/schemas\
"\r\n\r\nexport 
default async 
function 
InspectorsPage() 
{\r\n    const 
inspectors = await pr
isma.user.findMany({\
r\n        where: 
{\r\n            
role: 
'INSPECTOR'\r\n      
  },\r\n        
include: {\r\n       
     _count: {\r\n   
             select: 
{\r\n                
    jobs: true\r\n   
             }\r\n   
         },\r\n      
      
certifications: 
true,\r\n            
onboarding: true\r\n 
       },\r\n        
orderBy: { name: 
'asc' }\r\n    
})\r\n\r\n    // 
Transform data to 
match InspectorInput 
& id\r\n    const 
formattedInspectors 
= 
inspectors.map(user 
=> ({\r\n        id: 
user.id,\r\n        
name: user.name || 
\"\",\r\n        
email: 
user.email,\r\n      
  phone: undefined, 
// Add phone to User 
model if needed, 
currently not in 
schema\r\n        
role: \"INSPECTOR\" 
as const,\r\n        
hersRaterId: 
user.hersRaterId || 
undefined,\r\n       
 baseRate: 
user.baseRate || 
undefined,\r\n       
 certifications: user
.certifications.map(c
 => ({\r\n           
 name: c.name,\r\n   
         
licenseNumber: 
c.licenseNumber || 
undefined,\r\n       
     expirationDate: 
c.expirationDate || 
undefined\r\n        
})),\r\n        
onboarding: 
user.onboarding ? 
{\r\n            
uniformIssued: user.o
nboarding.uniformIssu
ed,\r\n            
ipadIssued: user.onbo
arding.ipadIssued,\r\
n            
badgePrinted: user.on
boarding.badgePrinted
,\r\n            
trainingComplete: use
r.onboarding.training
Complete,\r\n        
    notes: user.onboa
rding.notes || 
undefined\r\n        
} : undefined,\r\n   
     _count: 
user._count\r\n    
}))\r\n\r\n    
return (\r\n        
<div className=\"spac
e-y-8\">\r\n         
   <div 
className=\"flex 
justify-between 
items-center\">\r\n  
              
<div>\r\n            
        <h1 
className=\"text-3xl 
font-bold 
tracking-tight text-w
hite\">Inspectors</h1
>\r\n                
    <p className=\"te
xt-gray-400 
mt-1\">\r\n          
              Manage 
your field 
inspection team.\r\n 
                   
</p>\r\n             
   </div>\r\n        
        
<InspectorDialog 
mode=\"create\" 
/>\r\n            
</div>\r\n\r\n       
     <InspectorGrid i
nspectors={formattedI
nspectors} />\r\n    
    </div>\r\n    )\r
\n}\r\n","usedDepreca
tedRules":[]},{"fileP
ath":"C:\\Users\\shau
n\\Antigrabity Worksp
ace\\auditforecaster\
\src\\app\\(dashboard
)\\inspections\\[id]\
\run\\page.tsx","mess
ages":[{"ruleId":"@ty
pescript-eslint/no-ex
plicit-any","severity
":2,"message":"Unexpe
cted any. Specify a 
different type.","lin
e":36,"column":44,"no
deType":"TSAnyKeyword
","messageId":"unexpe
ctedAny","endLine":36
,"endColumn":47,"sugg
estions":[{"messageId
":"suggestUnknown","f
ix":{"range":[1293,12
96],"text":"unknown"}
,"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1293,1296],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":63,"colu
mn":55,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":63,"endColumn
":58,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2216,2219],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2216,2219],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":2,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { auth } 
from 
'@/auth'\r\nimport { 
prisma } from '@/lib/
prisma'\r\nimport { 
InspectionRunner } 
from '@/components/re
porting/inspection-ru
nner/runner'\r\nimpor
t { WeatherWidget } 
from '@/components/we
ather-widget'\r\nimpo
rt { redirect } from 
'next/navigation'\r\n
import { 
TemplateStructure } 
from '@/lib/reporting
/engine'\r\n\r\nexpor
t default async 
function 
RunInspectionPage({ 
params }: { params: 
Promise<{ id: string 
}> }) {\r\n    const 
session = await 
auth()\r\n    if 
(!session?.user?.id) 
redirect('/login')\r\
n\r\n    const { id 
} = await 
params\r\n\r\n    
const inspection = 
await prisma.inspecti
on.findUnique({\r\n  
      where: { id 
},\r\n        
include: {\r\n       
     reportTemplate: 
true,\r\n            
job: true\r\n        
}\r\n    })\r\n\r\n  
  if (!inspection) 
return 
<div>Inspection not 
found</div>\r\n    
if (!inspection.repor
tTemplate) return 
<div>Template not 
found</div>\r\n\r\n  
  // Parse template 
structure\r\n    
const structure = ins
pection.reportTemplat
e.structure as 
unknown as TemplateSt
ructure\r\n\r\n    
// Capture for 
closure\r\n    const 
jobId = inspection.jo
bId\r\n\r\n    // 
Use job coordinates 
if available, 
fallback to Austin 
for existing 
jobs\r\n    const 
job = 
inspection.job\r\n   
 const lat = 
job.latitude || 
30.2672\r\n    const 
lng = job.longitude 
|| -97.7431\r\n\r\n  
  async function hand
leComplete(answers: 
any, score: number) 
{\r\n        'use 
server'\r\n        
await prisma.inspecti
on.update({\r\n      
      where: { id 
},\r\n            
data: {\r\n          
      answers,\r\n   
             
score,\r\n           
     status: 
'COMPLETED'\r\n      
      }\r\n        
})\r\n        redirec
t(`/dashboard/jobs/${
jobId}`)\r\n    
}\r\n\r\n    return 
(\r\n        <div cla
ssName=\"space-y-6\">
\r\n            <div 
className=\"flex 
justify-between 
items-start\">\r\n   
             
<div>\r\n            
        <h1 
className=\"text-2xl 
font-bold\">{inspecti
on.reportTemplate.nam
e}</h1>\r\n          
          <p classNam
e=\"text-muted-foregr
ound\">{inspection.jo
b.streetAddress}</p>\
r\n                
</div>\r\n           
     <div className=\
"w-64\">\r\n         
           
<WeatherWidget 
lat={lat} lng={lng} 
/>\r\n               
 </div>\r\n          
  </div>\r\n\r\n     
       <InspectionRun
ner\r\n              
  structure={structur
e}\r\n               
 initialAnswers={insp
ection.answers as 
any || {}}\r\n       
         inspectionId
={inspection.id}\r\n 
               onComp
lete={handleComplete}
\r\n            
/>\r\n        
</div>\r\n    )\r\n}\
r\n","usedDeprecatedR
ules":[]},{"filePath"
:"C:\\Users\\shaun\\A
ntigrabity Workspace\
\auditforecaster\\src
\\app\\actions\\__tes
ts__\\action-items.te
st.ts","messages":[{"
ruleId":"@typescript-
eslint/no-explicit-an
y","severity":2,"mess
age":"Unexpected 
any. Specify a 
different type.","lin
e":21,"column":58,"no
deType":"TSAnyKeyword
","messageId":"unexpe
ctedAny","endLine":21
,"endColumn":61,"sugg
estions":[{"messageId
":"suggestUnknown","f
ix":{"range":[683,686
],"text":"unknown"},"
desc":"Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
683,686],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":22,"colu
mn":29,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":22,"endColumn
":32,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[717,720],"text":"u
nknown"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
717,720],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":34,"colu
mn":48,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":34,"endColumn
":51,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1110,1113],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1110,1113],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":41,"colu
mn":22,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":41,"endColumn
":25,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1386,1389],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1386,1389],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":66,"colu
mn":48,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":66,"endColumn
":51,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2275,2278],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2275,2278],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":74,"colu
mn":22,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":74,"endColumn
":25,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2595,2598],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2595,2598],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":96,"colu
mn":46,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":96,"endColumn
":49,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[3289,3292],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3289,3292],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":98,"colu
mn":18,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":98,"endColumn
":21,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[3387,3390],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3387,3390],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":8,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { 
describe, it, 
expect, vi, 
beforeEach } from 
'vitest'\r\nimport { 
createActionItem, 
getActionItems, updat
eActionItemStatus } 
from '../action-items
'\r\nimport { prisma 
} from '@/lib/prisma'
\r\nimport { 
mockSession } from '@
/test/mocks/auth'\r\n
import { auth } from 
'@/auth'\r\nimport { 
mockReset } from 'vit
est-mock-extended'\r\
n\r\nvi.mock('next/ca
che', () => ({\r\n   
 revalidatePath: vi.f
n()\r\n}))\r\n\r\nvi.
mock('../email', () 
=> ({\r\n    
sendEmail: vi.fn().mo
ckResolvedValue({ 
success: true })\r\n}
))\r\n\r\nimport { 
sendEmail } from '../
email'\r\n\r\ndescrib
e('action-items 
actions', () => 
{\r\n    
beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n       
 vi.mocked(auth).mock
ResolvedValue(mockSes
sion as any)\r\n     
   mockReset(prisma 
as any)\r\n    
})\r\n\r\n    describ
e('createActionItem',
 () => {\r\n        
it('should create 
action item and send 
email', async () => 
{\r\n            
const data = {\r\n   
             
inspectionId: 
'insp-1',\r\n        
        title: 'Fix 
Window',\r\n         
       priority: 
'HIGH',\r\n          
      
assignedToEmail: 'con
tractor@example.com'\
r\n            
}\r\n\r\n            
    ; (prisma.actionI
tem.create as any).mo
ckResolvedValue({\r\n
                    
id: 'item-1',\r\n    
                
...data,\r\n         
           status: 
'OPEN',\r\n          
          
description: 
null,\r\n            
        createdAt: 
new Date(),\r\n      
              
updatedAt: new 
Date()\r\n           
     } as 
any)\r\n\r\n         
   const result = 
await createActionIte
m(data)\r\n\r\n      
      expect(result.s
uccess).toBe(true)\r\
n            expect(p
risma.actionItem.crea
te).toHaveBeenCalledW
ith({\r\n            
    data: expect.obje
ctContaining({\r\n   
                 
title: 'Fix 
Window',\r\n         
           
assignedToEmail: 'con
tractor@example.com'\
r\n                
})\r\n            
})\r\n\r\n           
 expect(sendEmail).to
HaveBeenCalledWith(ex
pect.objectContaining
({\r\n               
 to: 'contractor@exam
ple.com',\r\n        
        subject: expe
ct.stringContaining('
Action 
Required')\r\n       
     }))\r\n        
})\r\n\r\n        
it('should create 
action item without 
email if not 
assigned', async () 
=> {\r\n            
const data = {\r\n   
             
inspectionId: 
'insp-1',\r\n        
        title: 'Fix 
Window',\r\n         
       priority: 
'LOW'\r\n            
}\r\n\r\n            
    ; (prisma.actionI
tem.create as any).mo
ckResolvedValue({\r\n
                    
id: 'item-1',\r\n    
                
...data,\r\n         
           status: 
'OPEN',\r\n          
          
assignedToEmail: 
null,\r\n            
        description: 
null,\r\n            
        createdAt: 
new Date(),\r\n      
              
updatedAt: new 
Date()\r\n           
     } as 
any)\r\n\r\n         
   const result = 
await createActionIte
m(data)\r\n\r\n      
      expect(result.s
uccess).toBe(true)\r\
n            expect(s
endEmail).not.toHaveB
eenCalled()\r\n      
  })\r\n\r\n        
it('should fail if 
unauthorized', async 
() => {\r\n          
  vi.mocked(auth).moc
kResolvedValue(null)\
r\n            const 
data = {\r\n         
       inspectionId: 
'insp-1',\r\n        
        title: 'Fix 
Window',\r\n         
       priority: 
'HIGH'\r\n           
 }\r\n\r\n           
 await expect(createA
ctionItem(data)).reje
cts.toThrow('Unauthor
ized')\r\n        
})\r\n    })\r\n\r\n 
   describe('getActio
nItems', () => {\r\n 
       it('should 
fetch action items', 
async () => {\r\n    
        ; (prisma.act
ionItem.findMany as a
ny).mockResolvedValue
([\r\n               
 { id: 'item-1', 
title: 'Fix Window' 
}\r\n            ] 
as any)\r\n\r\n      
      const result = 
await getActionItems(
'insp-1')\r\n\r\n    
        expect(result
).toHaveLength(1)\r\n
            expect(pr
isma.actionItem.findM
any).toHaveBeenCalled
With(expect.objectCon
taining({\r\n        
        where: { 
inspectionId: 
'insp-1' }\r\n       
     }))\r\n        
})\r\n    })\r\n\r\n 
   describe('updateAc
tionItemStatus', () 
=> {\r\n        
it('should update 
status', async () => 
{\r\n            
await updateActionIte
mStatus('item-1', 
'COMPLETED')\r\n\r\n 
           expect(pri
sma.actionItem.update
).toHaveBeenCalledWit
h({\r\n              
  where: { id: 
'item-1' },\r\n      
          data: { 
status: 'COMPLETED' 
}\r\n            
})\r\n        })\r\n 
   })\r\n})\r\n","use
dDeprecatedRules":[]}
,{"filePath":"C:\\Use
rs\\shaun\\Antigrabit
y Workspace\\auditfor
ecaster\\src\\app\\ac
tions\\__tests__\\adv
anced-analytics.test.
ts","messages":[{"rul
eId":"@typescript-esl
int/no-explicit-any",
"severity":2,"message
":"Unexpected any. 
Specify a different t
ype.","line":26,"colu
mn":74,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":26,"endColumn
":77,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[711,714],"text":"u
nknown"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
711,714],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":47,"colu
mn":82,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":47,"endColumn
":85,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1606,1609],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1606,1609],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":63,"colu
mn":18,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":63,"endColumn
":21,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2197,2200],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2197,2200],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":3,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { 
describe, it, 
expect, vi, 
beforeEach } from 
'vitest'\r\nimport { 
getRevenueForecast, g
etInspectorPerformanc
e } from '../advanced
-analytics'\r\nimport
 { prisma } from '@/l
ib/prisma'\r\nimport 
{ auth } from 
'@/auth'\r\nimport { 
isFeatureEnabled } 
from '@/lib/feature-f
lags'\r\n\r\nvi.mock(
'@/lib/prisma', () 
=> ({\r\n    prisma: 
{\r\n        user: 
{\r\n            
findMany: 
vi.fn()\r\n        
}\r\n    }\r\n}))\r\n
\r\nvi.mock('@/auth',
 () => ({\r\n    
auth: vi.fn()\r\n}))\
r\n\r\nvi.mock('@/lib
/feature-flags', () 
=> ({\r\n    
isFeatureEnabled: vi.
fn()\r\n}))\r\n\r\nde
scribe('Advanced 
Analytics Server 
Actions', () => 
{\r\n    
beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n       
 vi.mocked(auth).mock
ResolvedValue({ 
user: { role: 
'ADMIN' } } as 
any)\r\n        vi.mo
cked(isFeatureEnabled
).mockReturnValue(tru
e)\r\n    })\r\n\r\n 
   describe('getReven
ueForecast', () => 
{\r\n        
it('should return 
forecast data when 
enabled', async () 
=> {\r\n            
const result = await 
getRevenueForecast()\
r\n            expect
(Array.isArray(result
)).toBe(true)\r\n    
        if (Array.isA
rray(result)) {\r\n  
              expect(
result).toHaveLength(
6)\r\n               
 expect(result[0]).to
HaveProperty('project
ed')\r\n            
}\r\n        
})\r\n\r\n        
it('should return 
error if feature 
disabled', async () 
=> {\r\n            v
i.mocked(isFeatureEna
bled).mockReturnValue
(false)\r\n          
  const result = 
await getRevenueForec
ast()\r\n            
expect(result).toEqua
l({ error: 'Feature 
disabled' })\r\n     
   })\r\n\r\n        
it('should return 
error if 
unauthorized', async 
() => {\r\n          
  vi.mocked(auth).moc
kResolvedValue({ 
user: { role: 
'INSPECTOR' } } as 
any)\r\n            
const result = await 
getRevenueForecast()\
r\n            expect
(result).toEqual({ 
error: 
'Unauthorized' 
})\r\n        })\r\n 
   })\r\n\r\n    desc
ribe('getInspectorPer
formance', () => 
{\r\n        
it('should return 
performance data', 
async () => {\r\n    
        vi.mocked(pri
sma.user.findMany).mo
ckResolvedValue([\r\n
                
{\r\n                
    name: 'Inspector 
Gadget',\r\n         
           jobs: 
[\r\n                
        { 
inspections: [{ 
score: 95 }] },\r\n  
                     
 { inspections: [{ 
score: 90 }] }\r\n   
                 
]\r\n                
}\r\n            ] 
as any)\r\n\r\n      
      const result = 
await getInspectorPer
formance()\r\n       
     expect(Array.isA
rray(result)).toBe(tr
ue)\r\n            
if (Array.isArray(res
ult)) {\r\n          
      expect(result[0
].name).toBe('Inspect
or Gadget')\r\n      
          expect(resu
lt[0].jobsCompleted).
toBe(2)\r\n          
      expect(result[0
].avgScore).toBe(92.5
)\r\n            
}\r\n        })\r\n  
  })\r\n})\r\n","used
DeprecatedRules":[]},
{"filePath":"C:\\User
s\\shaun\\Antigrabity
 Workspace\\auditfore
caster\\src\\app\\act
ions\\__tests__\\buil
ders.test.ts","messag
es":[{"ruleId":"@type
script-eslint/no-expl
icit-any","severity":
2,"message":"Unexpect
ed any. Specify a 
different type.","lin
e":24,"column":58,"no
deType":"TSAnyKeyword
","messageId":"unexpe
ctedAny","endLine":24
,"endColumn":61,"sugg
estions":[{"messageId
":"suggestUnknown","f
ix":{"range":[719,722
],"text":"unknown"},"
desc":"Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
719,722],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":25,"colu
mn":29,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":25,"endColumn
":32,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[753,756],"text":"u
nknown"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
753,756],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":34,"colu
mn":45,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":34,"endColumn
":48,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1071,1074],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1071,1074],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":78,"colu
mn":45,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":78,"endColumn
":48,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2658,2661],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2658,2661],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":102,"col
umn":41,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":102,"endColu
mn":44,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[3502,3505],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3502,3505],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":5,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { 
describe, it, 
expect, vi, 
beforeEach } from 
'vitest'\r\nimport { 
createBuilder, 
updateBuilder, 
deleteBuilder } from 
'../builders'\r\nimpo
rt { prisma } from '@
/lib/prisma'\r\nimpor
t { mockSession } 
from '@/test/mocks/au
th'\r\nimport { auth 
} from 
'@/auth'\r\nimport { 
logger } from '@/lib/
logger'\r\nimport { 
mockReset } from 'vit
est-mock-extended'\r\
n\r\n// Mock 
dependencies\r\n// 
prisma is already 
mocked in setup.ts\r\
n\r\nvi.mock('@/auth'
, () => ({\r\n    
auth: vi.fn()\r\n}))\
r\n\r\nvi.mock('next/
cache', () => ({\r\n 
   revalidatePath: vi
.fn()\r\n}))\r\n\r\nd
escribe('builders 
actions', () => 
{\r\n    
beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n       
 // Default to 
authenticated\r\n    
    vi.mocked(auth).m
ockResolvedValue(mock
Session as any)\r\n  
      
mockReset(prisma as 
any)\r\n    
})\r\n\r\n    describ
e('createBuilder', 
() => {\r\n        
it('should create 
builder with valid 
data', async () => 
{\r\n            
const formData = new 
FormData()\r\n       
     
formData.set('name', 
'Test Builder')\r\n  
          formData.se
t('email', 'test@exam
ple.com')\r\n\r\n    
            ; (prisma
.builder.create as an
y).mockResolvedValue(
{\r\n                
    id: '1',\r\n     
               name: 
'Test Builder',\r\n  
                  
email: 'test@example.
com',\r\n            
        phone: 
null,\r\n            
        address: 
null,\r\n            
        createdAt: 
new Date(),\r\n      
              
updatedAt: new 
Date()\r\n           
     })\r\n\r\n      
      const result = 
await createBuilder(f
ormData)\r\n\r\n     
       expect(result.
message).toBe('Builde
r created 
successfully')\r\n   
         expect(prism
a.builder.create).toH
aveBeenCalledWith({\r
\n                
data: expect.objectCo
ntaining({\r\n       
             name: 
'Test Builder',\r\n  
                  
email: 'test@example.
com'\r\n             
   })\r\n            
})\r\n        
})\r\n\r\n        
it('should fail 
validation with 
empty name', async 
() => {\r\n          
  const formData = 
new FormData()\r\n   
         
formData.set('name', 
'')\r\n\r\n          
  const result = 
await createBuilder(f
ormData)\r\n\r\n     
       expect(result.
message).toBe('Failed
 to create 
builder')\r\n        
    expect(logger.err
or).toHaveBeenCalled(
)\r\n        
})\r\n\r\n        
it('should throw 
unauthorized if no 
session', async () 
=> {\r\n            v
i.mocked(auth).mockRe
solvedValue(null)\r\n
            const 
formData = new 
FormData()\r\n\r\n   
         await expect
(createBuilder(formDa
ta)).rejects.toThrow(
'Unauthorized')\r\n  
      })\r\n    
})\r\n\r\n    describ
e('updateBuilder', 
() => {\r\n        
it('should update 
builder with valid 
data', async () => 
{\r\n            
const formData = new 
FormData()\r\n       
     
formData.set('name', 
'Updated 
Builder')\r\n\r\n    
            ; (prisma
.builder.update as an
y).mockResolvedValue(
{\r\n                
    id: '1',\r\n     
               name: 
'Updated 
Builder',\r\n        
            email: 
null,\r\n            
        phone: 
null,\r\n            
        address: 
null,\r\n            
        createdAt: 
new Date(),\r\n      
              
updatedAt: new 
Date()\r\n           
     })\r\n\r\n      
      const result = 
await 
updateBuilder('1', 
null, 
formData)\r\n\r\n    
        expect(result
.message).toBe('Build
er updated 
successfully')\r\n   
         expect(prism
a.builder.update).toH
aveBeenCalledWith({\r
\n                
where: { id: '1' 
},\r\n               
 data: expect.objectC
ontaining({\r\n      
              name: 
'Updated 
Builder'\r\n         
       })\r\n        
    })\r\n        
})\r\n    })\r\n\r\n 
   describe('deleteBu
ilder', () => {\r\n  
      it('should 
delete builder', 
async () => {\r\n    
        ; (prisma.bui
lder.delete as any).m
ockResolvedValue({\r\
n                id: 
'1',\r\n             
   name: 'Deleted 
Builder',\r\n        
        email: 
null,\r\n            
    phone: null,\r\n 
               
address: null,\r\n   
             
createdAt: new 
Date(),\r\n          
      updatedAt: new 
Date()\r\n           
 })\r\n\r\n          
  const result = 
await deleteBuilder('
1')\r\n\r\n          
  expect(result.messa
ge).toBe('Builder 
deleted 
successfully')\r\n   
         expect(prism
a.builder.delete).toH
aveBeenCalledWith({\r
\n                
where: { id: '1' 
}\r\n            
})\r\n        })\r\n 
   })\r\n})\r\n","use
dDeprecatedRules":[]}
,{"filePath":"C:\\Use
rs\\shaun\\Antigrabit
y Workspace\\auditfor
ecaster\\src\\app\\ac
tions\\__tests__\\eko
trope.test.ts","messa
ges":[{"ruleId":"@typ
escript-eslint/no-exp
licit-any","severity"
:2,"message":"Unexpec
ted any. Specify a 
different type.","lin
e":53,"column":85,"no
deType":"TSAnyKeyword
","messageId":"unexpe
ctedAny","endLine":53
,"endColumn":88,"sugg
estions":[{"messageId
":"suggestUnknown","f
ix":{"range":[1465,14
68],"text":"unknown"}
,"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1465,1468],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":54,"colu
mn":62,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":54,"endColumn
":65,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1532,1535],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1532,1535],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":55,"colu
mn":73,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":55,"endColumn
":76,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1610,1613],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1610,1613],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":3,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { 
describe, it, 
expect, vi, 
beforeEach } from 
'vitest'\r\nimport { 
syncToEkotrope } 
from '../ekotrope'\r\
nimport { prisma } 
from '@/lib/prisma'\r
\n\r\n// Mock prisma\
r\nvi.mock('@/lib/pri
sma', () => ({\r\n   
 prisma: {\r\n       
 inspection: {\r\n   
         findUnique: 
vi.fn()\r\n        
},\r\n        job: 
{\r\n            
update: vi.fn()\r\n  
      },\r\n        
integrationLog: 
{\r\n            
create: vi.fn()\r\n  
      }\r\n    
}\r\n}))\r\n\r\n// 
Mock mapToEkotropePro
ject\r\nvi.mock('@/li
b/integrations/ekotro
pe', () => ({\r\n    
mapToEkotropeProject:
 vi.fn().mockReturnVa
lue({ mocked: 
'payload' 
})\r\n}))\r\n\r\n// 
Mock revalidatePath\r
\nvi.mock('next/cache
', () => ({\r\n    
revalidatePath: vi.fn
()\r\n}))\r\n\r\ndesc
ribe('syncToEkotrope'
, () => {\r\n    
beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n    
})\r\n\r\n    
it('should return 
error if inspection 
not found', async () 
=> {\r\n        vi.mo
cked(prisma.inspectio
n.findUnique).mockRes
olvedValue(null)\r\n\
r\n        const 
result = await syncTo
Ekotrope('invalid-id'
)\r\n\r\n        expe
ct(result).toEqual({ 
success: false, 
error: 'Inspection 
or Job not found' 
})\r\n    })\r\n\r\n 
   it('should sync 
successfully and 
update job', async 
() => {\r\n        
const mockInspection 
= {\r\n            
id: 'insp-1',\r\n    
        job: {\r\n   
             id: 
'job-1',\r\n         
       builder: { 
name: 'Builder' 
},\r\n               
 subdivision: { 
name: 'Subdivision' 
}\r\n            
}\r\n        
}\r\n\r\n        vi.m
ocked(prisma.inspecti
on.findUnique).mockRe
solvedValue(mockInspe
ction as any)\r\n    
    vi.mocked(prisma.
job.update).mockResol
vedValue({} as 
any)\r\n        vi.mo
cked(prisma.integrati
onLog.create).mockRes
olvedValue({} as 
any)\r\n\r\n        
const result = await 
syncToEkotrope('insp-
1')\r\n\r\n        ex
pect(result.success).
toBe(true)\r\n       
 expect(result.projec
tId).toBeDefined()\r\
n        expect(prism
a.job.update).toHaveB
eenCalledWith({\r\n  
          where: { 
id: 'job-1' },\r\n   
         data: expect
.objectContaining({\r
\n                
ekotropeProjectId: ex
pect.stringContaining
('EKO-'),\r\n        
        
ekotropeSyncedAt: 
expect.any(Date)\r\n 
           })\r\n    
    })\r\n        exp
ect(prisma.integratio
nLog.create).toHaveBe
enCalledWith({\r\n   
         data: expect
.objectContaining({\r
\n                
service: 
'EKOTROPE',\r\n      
          success: 
true\r\n            
})\r\n        })\r\n 
   })\r\n\r\n    
it('should handle 
errors and log 
failure', async () 
=> {\r\n        vi.mo
cked(prisma.inspectio
n.findUnique).mockRej
ectedValue(new 
Error('DB 
Error'))\r\n\r\n     
   const result = 
await syncToEkotrope(
'insp-1')\r\n\r\n    
    expect(result.suc
cess).toBe(false)\r\n
        expect(result
.error).toBe('DB 
Error')\r\n        ex
pect(prisma.integrati
onLog.create).toHaveB
eenCalledWith({\r\n  
          data: expec
t.objectContaining({\
r\n                
service: 
'EKOTROPE',\r\n      
          success: 
false,\r\n           
     error: 'DB 
Error'\r\n           
 })\r\n        
})\r\n    })\r\n})\r\
n","usedDeprecatedRul
es":[]},{"filePath":"
C:\\Users\\shaun\\Ant
igrabity Workspace\\a
uditforecaster\\src\\
app\\actions\\__tests
__\\email.test.ts","m
essages":[{"ruleId":"
@typescript-eslint/no
-explicit-any","sever
ity":2,"message":"Une
xpected any. Specify 
a different type.","l
ine":14,"column":20,"
nodeType":"TSAnyKeywo
rd","messageId":"unex
pectedAny","endLine":
14,"endColumn":23,"su
ggestions":[{"message
Id":"suggestUnknown",
"fix":{"range":[529,5
32],"text":"unknown"}
,"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
529,532],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":52,"colu
mn":58,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":52,"endColumn
":61,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1356,1359],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1356,1359],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":53,"colu
mn":72,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":53,"endColumn
":75,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1433,1436],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1433,1436],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":54,"colu
mn":29,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":54,"endColumn
":32,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1467,1470],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1467,1470],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":90,"colu
mn":31,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":90,"endColumn
":34,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2622,2625],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2622,2625],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":118,"col
umn":41,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":118,"endColu
mn":44,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[3526,3529],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3526,3529],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":123,"col
umn":18,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":123,"endColu
mn":21,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[3732,3735],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3732,3735],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":125,"col
umn":48,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":125,"endColu
mn":51,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[3787,3790],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3787,3790],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":129,"col
umn":22,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":129,"endColu
mn":25,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[3953,3956],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3953,3956],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":145,"col
umn":41,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":145,"endColu
mn":44,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[4529,4532],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
4529,4532],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":154,"col
umn":41,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":154,"endColu
mn":44,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[4855,4858],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
4855,4858],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":155,"col
umn":48,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":155,"endColu
mn":51,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[4943,4946],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
4943,4946],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":163,"col
umn":41,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":163,"endColu
mn":44,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[5236,5239],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
5236,5239],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":164,"col
umn":48,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":164,"endColu
mn":51,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[5324,5327],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
5324,5327],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":174,"col
umn":31,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":174,"endColu
mn":34,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[5756,5759],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
5756,5759],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":15,"fata
lErrorCount":0,"warni
ngCount":0,"fixableEr
rorCount":0,"fixableW
arningCount":0,"sourc
e":"import { 
describe, it, 
expect, vi, 
beforeEach } from 
'vitest'\r\nimport { 
sendEmail, 
sendInvoiceEmail } 
from 
'../email'\r\nimport 
{ generateInvoicePDF 
} from 
'../pdf'\r\nimport { 
prisma } from '@/lib/
prisma'\r\nimport { 
mockSession } from '@
/test/mocks/auth'\r\n
import { 
getGmailClient } 
from '@/lib/google'\r
\nimport { logger } 
from '@/lib/logger'\r
\nimport { mockReset 
} from 'vitest-mock-e
xtended'\r\n\r\n// 
Mock @/auth directly\
r\nvi.mock('@/auth', 
() => {\r\n    
console.log('MOCK 
FACTORY 
EXECUTED')\r\n    
const auth = 
vi.fn()\r\n        ; 
(auth as any)._id = 
Math.random()\r\n    
return {\r\n        
auth,\r\n        
signIn: vi.fn(),\r\n 
       signOut: 
vi.fn(),\r\n        
handlers: { GET: 
vi.fn(), POST: 
vi.fn() }\r\n    }\r\
n})\r\n\r\nimport { 
auth } from '@/auth'\
r\n\r\nvi.mock('@/lib
/google', () => 
({\r\n    
getGmailClient: vi.fn
()\r\n}))\r\n\r\nvi.m
ock('@/lib/logger', 
() => ({\r\n    
logger: {\r\n        
error: vi.fn(),\r\n  
      warn: 
vi.fn()\r\n    }\r\n}
))\r\n\r\nvi.mock('..
/pdf', () => ({\r\n  
  
generateInvoicePDF: v
i.fn()\r\n}))\r\n\r\n
describe('email 
actions', () => 
{\r\n    const 
mockGmailClient = 
{\r\n        users: 
{\r\n            
messages: {\r\n      
          send: vi.fn
().mockResolvedValue(
{})\r\n            
}\r\n        }\r\n   
 }\r\n\r\n    
beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n       
 mockGmailClient.user
s.messages.send.mockR
esolvedValue({})\r\n 
       vi.mocked(auth
).mockResolvedValue(m
ockSession as 
any)\r\n        vi.mo
cked(getGmailClient).
mockResolvedValue(moc
kGmailClient as 
any)\r\n        
mockReset(prisma as 
any)\r\n    
})\r\n\r\n    describ
e('sendEmail', () => 
{\r\n        
it('should send 
email successfully', 
async () => {\r\n    
        const params 
= {\r\n              
  to: 'test@example.c
om',\r\n             
   subject: 'Test 
Subject',\r\n        
        body: 'Test 
Body'\r\n            
}\r\n\r\n            
const result = await 
sendEmail(params)\r\n
\r\n            expec
t(result.success).toB
e(true)\r\n          
  expect(mockGmailCli
ent.users.messages.se
nd).toHaveBeenCalled(
)\r\n        
})\r\n\r\n        
it('should handle 
attachments', async 
() => {\r\n          
  const params = 
{\r\n                
to: 'test@example.com
',\r\n               
 subject: 'Test 
Subject',\r\n        
        body: 'Test 
Body',\r\n           
     attachments: 
[{\r\n               
     filename: 
'test.txt',\r\n      
              
content: 'test 
content',\r\n        
            
contentType: 
'text/plain'\r\n     
           }]\r\n    
        }\r\n\r\n    
        const result 
= await sendEmail(par
ams)\r\n\r\n         
   expect(result.succ
ess).toBe(true)\r\n  
          expect(mock
GmailClient.users.mes
sages.send).toHaveBee
nCalled()\r\n        
})\r\n\r\n        
it('should fail if 
unauthorized', async 
() => {\r\n          
  vi.mocked(auth as a
ny).mockResolvedValue
(null)\r\n           
 const params = 
{\r\n                
to: 'test@example.com
',\r\n               
 subject: 
'Test',\r\n          
      body: 
'Test'\r\n           
 }\r\n\r\n           
 await expect(sendEma
il(params)).rejects.t
oThrow('Unauthorized'
)\r\n        
})\r\n\r\n        
it('should handle 
errors gracefully', 
async () => {\r\n    
        mockGmailClie
nt.users.messages.sen
d.mockRejectedValue(n
ew Error('Gmail 
Error'))\r\n\r\n     
       const params 
= {\r\n              
  to: 'test@example.c
om',\r\n             
   subject: 
'Test',\r\n          
      body: 
'Test'\r\n           
 }\r\n\r\n           
 const result = 
await sendEmail(param
s)\r\n\r\n           
 expect(result.succes
s).toBe(false)\r\n   
         expect(logge
r.error).toHaveBeenCa
lled()\r\n        
})\r\n    })\r\n\r\n 
   describe('sendInvo
iceEmail', () => 
{\r\n        
it('should send 
invoice email with 
PDF', async () => 
{\r\n            ; (p
risma.job.findUnique 
as any).mockResolvedV
alue({\r\n           
     id: 
'job-1',\r\n         
       lotNumber: 
'123',\r\n           
     streetAddress: 
'123 Main St',\r\n   
             
builder: { name: 
'Test Builder' }\r\n 
           } as 
any)\r\n\r\n         
       ; (prisma.invo
ice.findFirst as any)
.mockResolvedValue({\
r\n                  
  id: 
'invoice-1',\r\n     
               
number: 
'INV-001',\r\n       
             
totalAmount: 
100.00\r\n           
     } as 
any)\r\n\r\n         
   vi.mocked(generate
InvoicePDF).mockResol
vedValue({\r\n       
         success: 
true,\r\n            
    pdf: 
'base64pdf',\r\n     
           filename: 
'invoice.pdf'\r\n    
        })\r\n\r\n   
         const 
result = await sendIn
voiceEmail('job-1')\r
\n\r\n            exp
ect(result).toEqual({
 success: true 
})\r\n            exp
ect(generateInvoicePD
F).toHaveBeenCalledWi
th('invoice-1')\r\n  
          expect(mock
GmailClient.users.mes
sages.send).toHaveBee
nCalled()\r\n        
})\r\n\r\n        
it('should fail if 
job not found', 
async () => {\r\n    
        ; (prisma.job
.findUnique as any).m
ockResolvedValue(null
)\r\n\r\n            
const result = await 
sendInvoiceEmail('job
-1')\r\n\r\n         
   expect(result).toE
qual({ error: 'Job 
not found' })\r\n    
        expect(logger
.warn).toHaveBeenCall
ed()\r\n        
})\r\n\r\n        
it('should fail if 
invoice not found', 
async () => {\r\n    
        ; (prisma.job
.findUnique as any).m
ockResolvedValue({ 
id: 'job-1' })\r\n   
             ; (prism
a.invoice.findFirst 
as any).mockResolvedV
alue(null)\r\n\r\n   
         const 
result = await sendIn
voiceEmail('job-1')\r
\n\r\n            exp
ect(result).toEqual({
 error: 'No invoice 
found for this job' 
})\r\n        
})\r\n\r\n        
it('should fail if 
PDF generation 
fails', async () => 
{\r\n            ; (p
risma.job.findUnique 
as any).mockResolvedV
alue({ id: 'job-1' 
})\r\n               
 ; (prisma.invoice.fi
ndFirst as any).mockR
esolvedValue({ id: 
'invoice-1' })\r\n   
         vi.mocked(ge
nerateInvoicePDF).moc
kResolvedValue({ 
error: 'PDF Error' 
})\r\n\r\n           
 const result = 
await sendInvoiceEmai
l('job-1')\r\n\r\n   
         expect(resul
t).toEqual({ error: 
'Failed to generate 
PDF attachment' 
})\r\n            exp
ect(logger.error).toH
aveBeenCalled()\r\n  
      })\r\n\r\n     
   it('should fail 
if unauthorized', 
async () => {\r\n    
        
vi.mocked(auth as any
).mockResolvedValue(n
ull)\r\n\r\n         
   const result = 
await sendInvoiceEmai
l('job-1')\r\n\r\n   
         expect(resul
t).toEqual({ error: 
'Unauthorized' 
})\r\n        })\r\n 
   })\r\n})\r\n","use
dDeprecatedRules":[]}
,{"filePath":"C:\\Use
rs\\shaun\\Antigrabit
y Workspace\\auditfor
ecaster\\src\\app\\ac
tions\\__tests__\\equ
ipment.test.ts","mess
ages":[{"ruleId":"@ty
pescript-eslint/no-ex
plicit-any","severity
":2,"message":"Unexpe
cted any. Specify a 
different type.","lin
e":18,"column":58,"no
deType":"TSAnyKeyword
","messageId":"unexpe
ctedAny","endLine":18
,"endColumn":61,"sugg
estions":[{"messageId
":"suggestUnknown","f
ix":{"range":[583,586
],"text":"unknown"},"
desc":"Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
583,586],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":19,"colu
mn":29,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":19,"endColumn
":32,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[617,620],"text":"u
nknown"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
617,620],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":31,"colu
mn":51,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":31,"endColumn
":54,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[997,1000],"text":"
unknown"},"desc":"Use
 `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
997,1000],"text":"nev
er"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":32,"colu
mn":47,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":32,"endColumn
":50,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1073,1076],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1073,1076],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":64,"colu
mn":29,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":64,"endColumn
":32,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2214,2217],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2214,2217],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":65,"colu
mn":47,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":65,"endColumn
":50,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2281,2284],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2281,2284],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":82,"colu
mn":47,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":82,"endColumn
":50,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2820,2823],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2820,2823],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":107,"col
umn":43,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":107,"endColu
mn":46,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[3702,3705],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3702,3705],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":8,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { 
describe, it, 
expect, vi, 
beforeEach } from 
'vitest'\r\nimport { 
createEquipment, 
updateEquipment, 
deleteEquipment } 
from '../equipment'\r
\nimport { prisma } 
from '@/lib/prisma'\r
\nimport { 
mockSession } from '@
/test/mocks/auth'\r\n
import { auth } from 
'@/auth'\r\nimport { 
mockReset } from 'vit
est-mock-extended'\r\
n\r\n// Mock dependen
cies\r\nvi.mock('next
/cache', () => 
({\r\n    
revalidatePath: vi.fn
()\r\n}))\r\n\r\nvi.u
nmock('../equipment')
\r\n\r\ndescribe('equ
ipment actions', () 
=> {\r\n    
beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n       
 vi.mocked(auth).mock
ResolvedValue(mockSes
sion as any)\r\n     
   mockReset(prisma 
as any)\r\n    
})\r\n\r\n    describ
e('createEquipment', 
() => {\r\n        
it('should create 
equipment with valid 
data', async () => 
{\r\n            
const input = {\r\n  
              name: 
'Blower Door',\r\n   
             type: 
'Testing',\r\n       
         
serialNumber: 
'SN123456',\r\n      
          status: 
'ACTIVE' as 
const\r\n            
}\r\n\r\n            
    ; (prisma.equipme
nt.findUnique as any)
.mockResolvedValue(nu
ll)\r\n              
  ; (prisma.equipment
.create as any).mockR
esolvedValue({\r\n   
                 id: 
'1',\r\n             
       ...input,\r\n 
                   
lastCalibration: 
null,\r\n            
        
nextCalibration: 
null,\r\n            
        assignedTo: 
null,\r\n            
        notes: 
null,\r\n            
        createdAt: 
new Date(),\r\n      
              
updatedAt: new 
Date()\r\n           
     })\r\n\r\n      
      const result = 
await createEquipment
(input)\r\n\r\n      
      expect(result.m
essage).toBe('Equipme
nt added to 
inventory')\r\n      
      expect(prisma.e
quipment.create).toHa
veBeenCalledWith({\r\
n                
data: expect.objectCo
ntaining({\r\n       
             name: 
'Blower Door',\r\n   
                 
serialNumber: 
'SN123456'\r\n       
         })\r\n      
      })\r\n        
})\r\n\r\n        
it('should reject 
duplicate serial 
number', async () => 
{\r\n            
const input = {\r\n  
              name: 
'Blower Door',\r\n   
             type: 
'Testing',\r\n       
         
serialNumber: 
'SN123456',\r\n      
          status: 
'ACTIVE' as 
const\r\n            
}\r\n\r\n            
// Mock P2002 
error\r\n            
const error = new 
Error('Unique 
constraint 
failed')\r\n         
       ; (error as 
any).code = 
'P2002'\r\n          
      ; (prisma.equip
ment.create as any).m
ockRejectedValue(erro
r)\r\n\r\n           
 const result = 
await createEquipment
(input)\r\n\r\n      
      expect(result.m
essage).toBe('Serial 
Number already 
exists')\r\n        
})\r\n    })\r\n\r\n 
   describe('updateEq
uipment', () => 
{\r\n        
it('should update 
equipment', async () 
=> {\r\n            
const input = {\r\n  
              name: 
'Updated Blower 
Door',\r\n           
     type: 
'Testing',\r\n       
         
serialNumber: 
'SN123456',\r\n      
          status: 
'REPAIR' as 
const\r\n            
}\r\n\r\n            
    ; (prisma.equipme
nt.update as any).moc
kResolvedValue({\r\n 
                   
id: '1',\r\n         
           
...input,\r\n        
            
lastCalibration: 
null,\r\n            
        
nextCalibration: 
null,\r\n            
        assignedTo: 
null,\r\n            
        notes: 
null,\r\n            
        createdAt: 
new Date(),\r\n      
              
updatedAt: new 
Date()\r\n           
     })\r\n\r\n      
      const result = 
await 
updateEquipment('1', 
input)\r\n\r\n       
     expect(result.me
ssage).toBe('Equipmen
t updated 
successfully')\r\n   
         expect(prism
a.equipment.update).t
oHaveBeenCalledWith({
\r\n                
where: { id: '1' 
},\r\n               
 data: expect.objectC
ontaining({\r\n      
              
status: 'REPAIR'\r\n 
               
})\r\n            
})\r\n        })\r\n 
   })\r\n\r\n    desc
ribe('deleteEquipment
', () => {\r\n       
 it('should delete 
equipment', async () 
=> {\r\n            
; (prisma.equipment.d
elete as any).mockRes
olvedValue({\r\n     
           id: 
'1',\r\n             
   name: 'Deleted 
Equipment',\r\n      
          type: 
'Testing',\r\n       
         
serialNumber: 
'SN123456',\r\n      
          status: 
'RETIRED',\r\n       
         
lastCalibration: 
null,\r\n            
    nextCalibration: 
null,\r\n            
    assignedTo: 
null,\r\n            
    notes: null,\r\n 
               
createdAt: new 
Date(),\r\n          
      updatedAt: new 
Date()\r\n           
 })\r\n\r\n          
  const result = 
await deleteEquipment
('1')\r\n\r\n        
    expect(result.mes
sage).toBe('Equipment
 deleted 
successfully')\r\n   
         expect(prism
a.equipment.delete).t
oHaveBeenCalledWith({
\r\n                
where: { id: '1' 
}\r\n            
})\r\n        })\r\n 
   })\r\n})\r\n","use
dDeprecatedRules":[]}
,{"filePath":"C:\\Use
rs\\shaun\\Antigrabit
y Workspace\\auditfor
ecaster\\src\\app\\ac
tions\\__tests__\\fle
et.test.ts","messages
":[{"ruleId":"@typesc
ript-eslint/no-explic
it-any","severity":2,
"message":"Unexpected
 any. Specify a 
different type.","lin
e":23,"column":58,"no
deType":"TSAnyKeyword
","messageId":"unexpe
ctedAny","endLine":23
,"endColumn":61,"sugg
estions":[{"messageId
":"suggestUnknown","f
ix":{"range":[676,679
],"text":"unknown"},"
desc":"Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
676,679],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":24,"colu
mn":29,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":24,"endColumn
":32,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[710,713],"text":"u
nknown"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
710,713],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":38,"colu
mn":45,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":38,"endColumn
":48,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1243,1246],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1243,1246],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":88,"colu
mn":45,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":88,"endColumn
":48,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[3108,3111],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3108,3111],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":119,"col
umn":41,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":119,"endColu
mn":44,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[4217,4220],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
4217,4220],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":5,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { 
describe, it, 
expect, vi, 
beforeEach } from 
'vitest'\r\nimport { 
createVehicle, 
updateVehicle, 
deleteVehicle } from 
'../fleet'\r\nimport 
{ prisma } from '@/li
b/prisma'\r\nimport 
{ mockSession } from 
'@/test/mocks/auth'\r
\nimport { auth } 
from 
'@/auth'\r\nimport { 
logger } from '@/lib/
logger'\r\nimport { 
mockReset } from 'vit
est-mock-extended'\r\
n\r\n// Mock 
dependencies\r\n// 
prisma is already 
mocked in setup.ts\r\
n\r\nvi.mock('@/auth'
, () => ({\r\n    
auth: vi.fn()\r\n}))\
r\n\r\nvi.mock('next/
cache', () => ({\r\n 
   revalidatePath: vi
.fn()\r\n}))\r\n\r\nd
escribe('fleet 
actions', () => 
{\r\n    
beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n       
 vi.mocked(auth).mock
ResolvedValue(mockSes
sion as any)\r\n     
   mockReset(prisma 
as any)\r\n    
})\r\n\r\n    describ
e('createVehicle', 
() => {\r\n        
it('should create 
vehicle with valid 
data', async () => 
{\r\n            
const formData = new 
FormData()\r\n       
     
formData.set('name', 
'Test Truck')\r\n    
        
formData.set('make', 
'Ford')\r\n          
  formData.set('model
', 'F-150')\r\n      
      
formData.set('year', 
'2023')\r\n          
  formData.set('licen
sePlate', 
'ABC-123')\r\n       
     formData.set('mi
leage', '1000')\r\n  
          formData.se
t('status', 
'ACTIVE')\r\n\r\n    
            ; (prisma
.vehicle.create as an
y).mockResolvedValue(
{\r\n                
    id: '1',\r\n     
               name: 
'Test Truck',\r\n    
                
make: 'Ford',\r\n    
                
model: 'F-150',\r\n  
                  
year: 2023,\r\n      
              
licensePlate: 
'ABC-123',\r\n       
             vin: 
null,\r\n            
        mileage: 
1000,\r\n            
        status: 
'ACTIVE',\r\n        
            
nextService: 
null,\r\n            
        assignedTo: 
null,\r\n            
        createdAt: 
new Date(),\r\n      
              
updatedAt: new 
Date()\r\n           
     })\r\n\r\n      
      const result = 
await 
createVehicle(null, 
formData)\r\n\r\n    
        expect(result
.message).toBe('Vehic
le created 
successfully')\r\n   
         expect(prism
a.vehicle.create).toH
aveBeenCalledWith({\r
\n                
data: expect.objectCo
ntaining({\r\n       
             name: 
'Test Truck',\r\n    
                
licensePlate: 
'ABC-123'\r\n        
        })\r\n       
     })\r\n        
})\r\n\r\n        
it('should fail 
validation with 
missing required 
fields', async () => 
{\r\n            
const formData = new 
FormData()\r\n       
     
formData.set('name', 
'Test Truck')\r\n    
        // Missing 
make, model, 
etc.\r\n\r\n         
   const result = 
await 
createVehicle(null, 
formData)\r\n\r\n    
        expect(result
.message).toBe('Faile
d to create 
vehicle')\r\n        
    expect(logger.err
or).toHaveBeenCalled(
)\r\n        })\r\n  
  })\r\n\r\n    descr
ibe('updateVehicle', 
() => {\r\n        
it('should update 
vehicle', async () 
=> {\r\n            
const formData = new 
FormData()\r\n       
     
formData.set('name', 
'Updated Truck')\r\n 
           
formData.set('make', 
'Ford')\r\n          
  formData.set('model
', 'F-150')\r\n      
      
formData.set('year', 
'2023')\r\n          
  formData.set('licen
sePlate', 
'ABC-123')\r\n       
     formData.set('mi
leage', '2000')\r\n  
          formData.se
t('status', 
'ACTIVE')\r\n\r\n    
            ; (prisma
.vehicle.update as an
y).mockResolvedValue(
{\r\n                
    id: '1',\r\n     
               name: 
'Updated Truck',\r\n 
                   
make: 'Ford',\r\n    
                
model: 'F-150',\r\n  
                  
year: 2023,\r\n      
              
licensePlate: 
'ABC-123',\r\n       
             vin: 
null,\r\n            
        mileage: 
2000,\r\n            
        status: 
'ACTIVE',\r\n        
            
nextService: 
null,\r\n            
        assignedTo: 
null,\r\n            
        createdAt: 
new Date(),\r\n      
              
updatedAt: new 
Date()\r\n           
     })\r\n\r\n      
      const result = 
await 
updateVehicle('1', 
null, 
formData)\r\n\r\n    
        expect(result
.message).toBe('Vehic
le updated 
successfully')\r\n   
         expect(prism
a.vehicle.update).toH
aveBeenCalledWith({\r
\n                
where: { id: '1' 
},\r\n               
 data: expect.objectC
ontaining({\r\n      
              name: 
'Updated Truck',\r\n 
                   
mileage: 2000\r\n    
            })\r\n   
         })\r\n      
  })\r\n    
})\r\n\r\n    describ
e('deleteVehicle', 
() => {\r\n        
it('should delete 
vehicle', async () 
=> {\r\n            
; (prisma.vehicle.del
ete as any).mockResol
vedValue({\r\n       
         id: 
'1',\r\n             
   name: 'Deleted 
Truck',\r\n          
      make: 
'Ford',\r\n          
      model: 
'F-150',\r\n         
       year: 
2023,\r\n            
    licensePlate: 
'ABC-123',\r\n       
         vin: 
null,\r\n            
    mileage: 
1000,\r\n            
    status: 
'RETIRED',\r\n       
         
nextService: 
null,\r\n            
    assignedTo: 
null,\r\n            
    createdAt: new 
Date(),\r\n          
      updatedAt: new 
Date()\r\n           
 })\r\n\r\n          
  const result = 
await deleteVehicle('
1')\r\n\r\n          
  expect(result.messa
ge).toBe('Vehicle 
deleted 
successfully')\r\n   
         expect(prism
a.vehicle.delete).toH
aveBeenCalledWith({\r
\n                
where: { id: '1' 
}\r\n            
})\r\n        })\r\n 
   })\r\n})\r\n","use
dDeprecatedRules":[]}
,{"filePath":"C:\\Use
rs\\shaun\\Antigrabit
y Workspace\\auditfor
ecaster\\src\\app\\ac
tions\\__tests__\\ins
pections.test.ts","me
ssages":[{"ruleId":"@
typescript-eslint/no-
explicit-any","severi
ty":2,"message":"Unex
pected any. Specify 
a different type.","l
ine":41,"column":99,"
nodeType":"TSAnyKeywo
rd","messageId":"unex
pectedAny","endLine":
41,"endColumn":102,"s
uggestions":[{"messag
eId":"suggestUnknown"
,"fix":{"range":[1048
,1051],"text":"unknow
n"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1048,1051],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":53,"colu
mn":87,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":53,"endColumn
":90,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1675,1678],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1675,1678],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":58,"colu
mn":18,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":58,"endColumn
":21,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1866,1869],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1866,1869],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":91,"colu
mn":95,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":91,"endColumn
":98,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[3140,3143],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3140,3143],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":92,"colu
mn":93,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":92,"endColumn
":96,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[3238,3241],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3238,3241],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":116,"col
umn":91,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":116,"endColu
mn":94,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[4166,4169],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
4166,4169],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":6,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { 
describe, it, 
expect, vi, 
beforeEach } from 
'vitest'\r\nimport { 
updateInspection, 
createReinspection } 
from '../inspections'
\r\nimport { prisma 
} from '@/lib/prisma'
\r\nimport { auth } 
from 
'@/auth'\r\nimport { 
sendInspectionComplet
edEmail } from '@/lib
/email'\r\nimport { 
redirect } from 'next
/navigation'\r\n\r\n/
/ Mock dependencies\r
\nvi.mock('@/lib/pris
ma', () => ({\r\n    
prisma: {\r\n        
inspection: {\r\n    
        findFirst: 
vi.fn(),\r\n         
   create: 
vi.fn(),\r\n         
   update: 
vi.fn()\r\n        
},\r\n        job: 
{\r\n            
update: vi.fn()\r\n  
      }\r\n    }\r\n}
))\r\n\r\nvi.mock('@/
auth', () => ({\r\n  
  auth: vi.fn()\r\n})
)\r\n\r\nvi.mock('@/l
ib/email', () => 
({\r\n    sendInspect
ionCompletedEmail: vi
.fn()\r\n}))\r\n\r\nv
i.mock('next/cache', 
() => ({\r\n    
revalidatePath: vi.fn
()\r\n}))\r\n\r\nvi.m
ock('next/navigation'
, () => ({\r\n    
redirect: vi.fn()\r\n
}))\r\n\r\ndescribe('
Inspections Server 
Actions', () => 
{\r\n    
beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n       
 vi.mocked(auth).mock
ResolvedValue({ 
user: { id: 
'user-1', name: 
'Inspector Gadget' } 
} as any)\r\n    
})\r\n\r\n    describ
e('updateInspection',
 () => {\r\n        
it('should create 
new inspection and 
calculate ACH50 
correctly', async () 
=> {\r\n            
const formData = new 
FormData()\r\n       
     formData.append(
'jobId', 
'job-1')\r\n         
   formData.append('c
fm50', '1000')\r\n   
         formData.app
end('houseVolume', 
'20000') // ACH50 = 
(1000 * 60) / 20000 
= 3.0\r\n            
formData.append('chec
klist', 
JSON.stringify([{ 
id: '1', status: 
'PASS' }]))\r\n\r\n  
          vi.mocked(p
risma.inspection.find
First).mockResolvedVa
lue(null)\r\n        
    vi.mocked(prisma.
inspection.create).mo
ckResolvedValue({ 
id: 'insp-1' } as 
any)\r\n            v
i.mocked(prisma.job.u
pdate).mockResolvedVa
lue({\r\n            
    id: 'job-1',\r\n 
               
streetAddress: '123 
Main',\r\n           
     city: 
'Austin'\r\n         
   } as any)\r\n\r\n 
           try {\r\n 
               await 
updateInspection(form
Data)\r\n            
} catch (e) {\r\n    
            if ((e 
as Error).message 
!== 'NEXT_REDIRECT') 
throw e\r\n          
  }\r\n\r\n          
  // Verify 
calculation\r\n      
      expect(prisma.i
nspection.create).toH
aveBeenCalledWith(exp
ect.objectContaining(
{\r\n                
data: expect.objectCo
ntaining({\r\n       
             data: ex
pect.stringContaining
('\"ach50\":3'),\r\n 
                   
jobId: 'job-1'\r\n   
             })\r\n  
          
}))\r\n\r\n          
  // Verify job 
update\r\n           
 expect(prisma.job.up
date).toHaveBeenCalle
dWith(expect.objectCo
ntaining({\r\n       
         where: { 
id: 'job-1' },\r\n   
             data: { 
status: 'COMPLETED' 
}\r\n            
}))\r\n\r\n          
  // Verify 
email\r\n            
expect(sendInspection
CompletedEmail).toHav
eBeenCalled()\r\n    
        expect(redire
ct).toHaveBeenCalledW
ith('/dashboard/jobs/
job-1')\r\n        
})\r\n\r\n        
it('should update 
existing 
inspection', async 
() => {\r\n          
  const formData = 
new FormData()\r\n   
         formData.app
end('jobId', 
'job-1')\r\n         
   formData.append('c
fm50', '1200')\r\n   
         formData.app
end('houseVolume', 
'20000')\r\n\r\n     
       vi.mocked(pris
ma.inspection.findFir
st).mockResolvedValue
({ id: 'existing-id' 
} as any)\r\n        
    vi.mocked(prisma.
job.update).mockResol
vedValue({ 
streetAddress: '123 
Main' } as 
any)\r\n\r\n         
   try {\r\n         
       await updateIn
spection(formData)\r\
n            } catch 
(e) {\r\n            
    if ((e as 
Error).message !== 
'NEXT_REDIRECT') 
throw e\r\n          
  }\r\n\r\n          
  expect(prisma.inspe
ction.update).toHaveB
eenCalledWith(expect.
objectContaining({\r\
n                
where: { id: 
'existing-id' }\r\n  
          }))\r\n    
        expect(prisma
.inspection.create).n
ot.toHaveBeenCalled()
\r\n        
})\r\n\r\n        
it('should fail 
validation if fields 
missing', async () 
=> {\r\n            
const formData = new 
FormData()\r\n       
     // Missing 
jobId and 
cfm50\r\n\r\n        
    await expect(upda
teInspection(formData
)).rejects.toThrow('P
lease check all 
required 
fields')\r\n        
})\r\n    })\r\n\r\n 
   describe('createRe
inspection', () => 
{\r\n        
it('should create 
reinspection and 
update job status', 
async () => {\r\n    
        vi.mocked(pri
sma.inspection.create
).mockResolvedValue({
 id: 'new-insp-1' } 
as any)\r\n\r\n      
      try {\r\n      
          await creat
eReinspection('job-1'
)\r\n            } 
catch (e) {\r\n      
          if ((e as 
Error).message !== 
'NEXT_REDIRECT') 
throw e\r\n          
  }\r\n\r\n          
  expect(prisma.inspe
ction.create).toHaveB
eenCalledWith(expect.
objectContaining({\r\
n                
data: expect.objectCo
ntaining({ jobId: 
'job-1' })\r\n       
     }))\r\n         
   expect(prisma.job.
update).toHaveBeenCal
ledWith(expect.object
Containing({\r\n     
           where: { 
id: 'job-1' },\r\n   
             data: { 
status: 
'IN_PROGRESS' }\r\n  
          }))\r\n    
        expect(redire
ct).toHaveBeenCalledW
ith('/dashboard/inspe
ctions/new-insp-1')\r
\n        })\r\n    }
)\r\n})\r\n","usedDep
recatedRules":[]},{"f
ilePath":"C:\\Users\\
shaun\\Antigrabity Wo
rkspace\\auditforecas
ter\\src\\app\\action
s\\__tests__\\invoice
s.test.ts","messages"
:[{"ruleId":"@typescr
ipt-eslint/no-explici
t-any","severity":2,"
message":"Unexpected 
any. Specify a 
different type.","lin
e":39,"column":14,"no
deType":"TSAnyKeyword
","messageId":"unexpe
ctedAny","endLine":39
,"endColumn":17,"sugg
estions":[{"messageId
":"suggestUnknown","f
ix":{"range":[975,978
],"text":"unknown"},"
desc":"Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
975,978],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":45,"colu
mn":74,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":45,"endColumn
":77,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1224,1227],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1224,1227],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":72,"colu
mn":74,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":72,"endColumn
":77,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2197,2200],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2197,2200],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":74,"colu
mn":83,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":74,"endColumn
":86,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2351,2354],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2351,2354],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":4,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { 
describe, it, 
expect, vi, 
beforeEach } from 
'vitest'\r\nimport { 
createInvoice, 
getUninvoicedJobs } 
from '../invoices'\r\
nimport { prisma } 
from '@/lib/prisma'\r
\nimport { auth } 
from 
'@/auth'\r\n\r\n// 
Mock prisma\r\nvi.moc
k('@/lib/prisma', () 
=> ({\r\n    prisma: 
{\r\n        job: 
{\r\n            
findMany: 
vi.fn(),\r\n         
   updateMany: 
vi.fn()\r\n        
},\r\n        
invoice: {\r\n       
     count: 
vi.fn(),\r\n         
   create: 
vi.fn(),\r\n         
   update: 
vi.fn(),\r\n         
   delete: 
vi.fn(),\r\n         
   findUnique: 
vi.fn()\r\n        
},\r\n        
$transaction: 
vi.fn((callback) => c
allback(prisma))\r\n 
   
}\r\n}))\r\n\r\n// 
Mock auth\r\nvi.mock(
'@/auth', () => 
({\r\n    auth: vi.fn
()\r\n}))\r\n\r\n// 
Mock revalidatePath\r
\nvi.mock('next/cache
', () => ({\r\n    
revalidatePath: vi.fn
()\r\n}))\r\n\r\ndesc
ribe('invoices 
actions', () => 
{\r\n    
beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n       
 vi.mocked(auth).mock
ResolvedValue({\r\n  
          user: { 
id: 'user-1', role: 
'ADMIN' }\r\n        
} as any)\r\n    
})\r\n\r\n    describ
e('getUninvoicedJobs'
, () => {\r\n        
it('should return 
jobs', async () => 
{\r\n            
const mockJobs = [{ 
id: 'job-1', 
address: '123 Main' 
}]\r\n            vi.
mocked(prisma.job.fin
dMany).mockResolvedVa
lue(mockJobs as 
any)\r\n\r\n         
   const result = 
await getUninvoicedJo
bs('builder-1')\r\n\r
\n            expect(
result).toEqual(mockJ
obs)\r\n            e
xpect(prisma.job.find
Many).toHaveBeenCalle
dWith(expect.objectCo
ntaining({\r\n       
         where: expec
t.objectContaining({ 
builderId: 
'builder-1' })\r\n   
         }))\r\n     
   })\r\n    
})\r\n\r\n    describ
e('createInvoice', 
() => {\r\n        
it('should create 
invoice 
successfully', async 
() => {\r\n          
  const mockJobs = 
[\r\n                
{\r\n                
    id: 'job-1',\r\n 
                   
address: '123 
Main',\r\n           
         
subdivision: {\r\n   
                     
priceLists: [{\r\n   
                     
    items: [{\r\n    
                     
       price: 
100,\r\n             
                   
serviceItem: { name: 
'Inspection' }\r\n   
                     
    }]\r\n           
             }]\r\n  
                  
}\r\n                
}\r\n            
]\r\n            vi.m
ocked(prisma.job.find
Many).mockResolvedVal
ue(mockJobs as 
any)\r\n            v
i.mocked(prisma.invoi
ce.count).mockResolve
dValue(0)\r\n        
    vi.mocked(prisma.
invoice.create).mockR
esolvedValue({ id: 
'inv-1' } as 
any)\r\n\r\n         
   const result = 
await 
createInvoice({\r\n  
              
builderId: 
'builder-1',\r\n     
           jobIds: 
['job-1'],\r\n       
         dueDate: 
new Date()\r\n       
     })\r\n\r\n      
      expect(result.s
uccess).toBe(true)\r\
n            expect(r
esult.invoiceId).toBe
('inv-1')\r\n        
    expect(prisma.inv
oice.create).toHaveBe
enCalledWith(expect.o
bjectContaining({\r\n
                
data: expect.objectCo
ntaining({\r\n       
             
totalAmount: 
100,\r\n             
       items: {\r\n  
                     
 create: expect.array
Containing([\r\n     
                     
  expect.objectContai
ning({\r\n           
                     
unitPrice: 100,\r\n  
                     
         totalPrice: 
100\r\n              
              })\r\n 
                     
  ])\r\n             
       }\r\n         
       })\r\n        
    }))\r\n        
})\r\n\r\n        
it('should throw 
error if no jobs 
found', async () => 
{\r\n            vi.m
ocked(prisma.job.find
Many).mockResolvedVal
ue([])\r\n\r\n       
     await expect(cre
ateInvoice({\r\n     
           
builderId: 
'builder-1',\r\n     
           jobIds: 
['job-1'],\r\n       
         dueDate: 
new Date()\r\n       
     })).rejects.toTh
row('No valid jobs 
found')\r\n        
})\r\n    })\r\n})\r\
n","usedDeprecatedRul
es":[]},{"filePath":"
C:\\Users\\shaun\\Ant
igrabity Workspace\\a
uditforecaster\\src\\
app\\actions\\__tests
__\\payouts.test.ts",
"messages":[{"ruleId"
:"@typescript-eslint/
no-explicit-any","sev
erity":2,"message":"U
nexpected any. 
Specify a different t
ype.","line":35,"colu
mn":89,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":35,"endColumn
":92,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[910,913],"text":"u
nknown"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
910,913],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":52,"colu
mn":74,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":52,"endColumn
":77,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1492,1495],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1492,1495],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":53,"colu
mn":87,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":53,"endColumn
":90,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1584,1587],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1584,1587],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":76,"colu
mn":74,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":76,"endColumn
":77,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2418,2421],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2418,2421],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":87,"colu
mn":85,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":87,"endColumn
":88,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2812,2815],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2812,2815],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":5,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { 
describe, it, 
expect, vi, 
beforeEach } from 
'vitest'\r\nimport { 
calculatePayout, 
createPayout, 
markPayoutAsPaid } 
from '../payouts'\r\n
import { prisma } 
from '@/lib/prisma'\r
\nimport { auth } 
from 
'@/auth'\r\n\r\n// 
Mock dependencies\r\n
vi.mock('@/lib/prisma
', () => ({\r\n    
prisma: {\r\n        
job: {\r\n           
 findMany: 
vi.fn(),\r\n         
   updateMany: 
vi.fn()\r\n        
},\r\n        user: 
{\r\n            
findUnique: 
vi.fn()\r\n        
},\r\n        
payout: {\r\n        
    create: 
vi.fn(),\r\n         
   update: 
vi.fn()\r\n        
},\r\n        
$transaction: 
vi.fn((callback) => c
allback(prisma))\r\n 
   }\r\n}))\r\n\r\nvi
.mock('@/auth', () 
=> ({\r\n    auth: vi
.fn()\r\n}))\r\n\r\nv
i.mock('next/cache', 
() => ({\r\n    
revalidatePath: vi.fn
()\r\n}))\r\n\r\ndesc
ribe('Payouts Server 
Actions', () => 
{\r\n    
beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n       
 vi.mocked(auth).mock
ResolvedValue({ 
user: { id: 
'admin-1', role: 
'ADMIN' } } as 
any)\r\n    
})\r\n\r\n    describ
e('calculatePayout', 
() => {\r\n        
it('should calculate 
payout correctly', 
async () => {\r\n    
        const 
mockJobs = [\r\n     
           {\r\n     
               id: 
'job-1',\r\n         
           address: 
'123 Main',\r\n      
              
scheduledDate: new 
Date(),\r\n          
          
subdivision: {\r\n   
                     
priceLists: [{\r\n   
                     
    items: [{ price: 
200 }]\r\n           
             }]\r\n  
                  
}\r\n                
}\r\n            
]\r\n            vi.m
ocked(prisma.job.find
Many).mockResolvedVal
ue(mockJobs as 
any)\r\n            v
i.mocked(prisma.user.
findUnique).mockResol
vedValue({ baseRate: 
1000 } as 
any)\r\n\r\n         
   const result = 
await calculatePayout
('user-1', new 
Date(), new 
Date())\r\n\r\n      
      // Job total = 
200\r\n            
// Payout = 200 * 
0.70 = 140\r\n       
     expect(result.to
talAmount).toBe(140)\
r\n            expect
(result.baseRate).toB
e(1000)\r\n          
  expect(result.jobCo
unt).toBe(1)\r\n     
       expect(result.
jobs[0].payoutAmount)
.toBe(140)\r\n       
 })\r\n\r\n        
it('should use 
builder price list 
if subdivision 
missing', async () 
=> {\r\n            
const mockJobs = 
[\r\n                
{\r\n                
    id: 'job-1',\r\n 
                   
builder: {\r\n       
                 
priceLists: [{\r\n   
                     
    items: [{ price: 
300 }]\r\n           
             }]\r\n  
                  
}\r\n                
}\r\n            
]\r\n            vi.m
ocked(prisma.job.find
Many).mockResolvedVal
ue(mockJobs as 
any)\r\n\r\n         
   const result = 
await calculatePayout
('user-1', new 
Date(), new 
Date())\r\n\r\n      
      // Payout = 
300 * 0.70 = 210\r\n 
           expect(res
ult.totalAmount).toBe
(210)\r\n        
})\r\n    })\r\n\r\n 
   describe('createPa
yout', () => {\r\n   
     it('should 
create payout and 
link jobs', async () 
=> {\r\n            v
i.mocked(prisma.payou
t.create).mockResolve
dValue({ id: 
'payout-1' } as 
any)\r\n\r\n         
   const result = 
await createPayout('u
ser-1', ['job-1'], 
500, new Date(), new 
Date())\r\n\r\n      
      expect(result.s
uccess).toBe(true)\r\
n            expect(p
risma.payout.create).
toHaveBeenCalledWith(
expect.objectContaini
ng({\r\n             
   data: expect.objec
tContaining({\r\n    
                
amount: 500,\r\n     
               
userId: 'user-1'\r\n 
               
})\r\n            
}))\r\n            ex
pect(prisma.job.updat
eMany).toHaveBeenCall
edWith(expect.objectC
ontaining({\r\n      
          where: { 
id: { in: ['job-1'] 
} },\r\n             
   data: { payoutId: 
'payout-1' }\r\n     
       }))\r\n       
 })\r\n    
})\r\n\r\n    describ
e('markPayoutAsPaid',
 () => {\r\n        
it('should update 
status to PAID', 
async () => {\r\n    
        await markPay
outAsPaid('payout-1')
\r\n\r\n            e
xpect(prisma.payout.u
pdate).toHaveBeenCall
edWith({\r\n         
       where: { id: 
'payout-1' },\r\n    
            data: exp
ect.objectContaining(
{\r\n                
    status: 
'PAID',\r\n          
          paidAt: 
expect.any(Date)\r\n 
               
})\r\n            
})\r\n        })\r\n 
   })\r\n})\r\n","use
dDeprecatedRules":[]}
,{"filePath":"C:\\Use
rs\\shaun\\Antigrabit
y Workspace\\auditfor
ecaster\\src\\app\\ac
tions\\__tests__\\pri
cing.test.ts","messag
es":[{"ruleId":"@type
script-eslint/no-expl
icit-any","severity":
2,"message":"Unexpect
ed any. Specify a 
different type.","lin
e":37,"column":41,"no
deType":"TSAnyKeyword
","messageId":"unexpe
ctedAny","endLine":37
,"endColumn":44,"sugg
estions":[{"messageId
":"suggestUnknown","f
ix":{"range":[1072,10
75],"text":"unknown"}
,"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1072,1075],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":53,"colu
mn":49,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":53,"endColumn
":52,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1645,1648],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1645,1648],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":97,"colu
mn":49,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":97,"endColumn
":52,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[3224,3227],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3224,3227],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":124,"col
umn":47,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":124,"endColu
mn":50,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[4207,4210],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
4207,4210],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":155,"col
umn":47,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":155,"endColu
mn":50,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[5272,5275],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
5272,5275],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":167,"col
umn":51,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":167,"endColu
mn":54,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[5706,5709],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
5706,5709],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":182,"col
umn":51,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":182,"endColu
mn":54,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[6290,6293],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
6290,6293],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":7,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"/**\r\n * 
Integration tests 
for pricing server 
actions\r\n * Tests 
Zod validation and 
database 
operations\r\n 
*/\r\n\r\nimport { 
describe, it, 
expect, vi, 
beforeAll, afterAll 
} from 
'vitest'\r\nimport { 
prisma } from '@/lib/
prisma'\r\nimport { 
createServiceItem, 
updateServiceItem, 
createPriceList, 
upsertPriceListItem 
} from '@/app/actions
/pricing'\r\n\r\nvi.m
ock('next/cache', () 
=> ({\r\n    
revalidatePath: vi.fn
()\r\n}))\r\n\r\n// 
Mock auth for testing
\r\nvi.mock('@/auth',
 () => ({\r\n    
auth: vi.fn(() => Pro
mise.resolve({\r\n   
     user: {\r\n     
       id: 
'test-admin-id',\r\n 
           email: 'ad
min@example.com',\r\n
            name: 
'Test Admin',\r\n    
        role: 
'ADMIN'\r\n        
}\r\n    }))\r\n}))\r
\n\r\ndescribe('Prici
ng Server Actions', 
() => {\r\n    let 
testBuilderId: 
string\r\n    let 
testServiceItemId: 
string\r\n\r\n    
beforeAll(async () 
=> {\r\n        // 
Mock builder 
creation\r\n        
const mockBuilder = 
{\r\n            id: 
'123e4567-e89b-12d3-a
456-426614174000',\r\
n            name: 
'Test Builder 
Co',\r\n            
email: 'test@builder.
com'\r\n        
}\r\n            ; (p
risma.builder.create 
as any).mockResolvedV
alue(mockBuilder)\r\n
        
testBuilderId = 
mockBuilder.id\r\n   
 })\r\n\r\n    
afterAll(async () => 
{\r\n        vi.clear
AllMocks()\r\n    
})\r\n\r\n    describ
e('createServiceItem'
, () => {\r\n        
it('should create a 
service item with 
valid data', async 
() => {\r\n          
  const 
mockServiceItem = 
{\r\n                
id: '123e4567-e89b-12
d3-a456-426614174001'
,\r\n                
name: 'Blower Door 
Test',\r\n           
     description: 
'Standard blower 
door testing',\r\n   
             
basePrice: 
150.00\r\n           
 }\r\n               
 ; (prisma.serviceIte
m.create as any).mock
ResolvedValue(mockSer
viceItem)\r\n\r\n    
        const result 
= await createService
Item({\r\n           
     name: 'Blower 
Door Test',\r\n      
          
description: 
'Standard blower 
door testing',\r\n   
             
basePrice: 
150.00\r\n           
 })\r\n\r\n          
  expect(result.succe
ss).toBe(true)\r\n   
         expect(resul
t.data).toBeDefined()
\r\n            expec
t(result.data?.name).
toBe('Blower Door 
Test')\r\n           
 expect(result.data?.
basePrice).toBe(150.0
0)\r\n\r\n           
 testServiceItemId = 
result.data!.id\r\n  
      })\r\n\r\n     
   it('should reject 
service item with 
empty name', async 
() => {\r\n          
  const result = 
await createServiceIt
em({\r\n             
   name: '',\r\n     
           
basePrice: 100\r\n   
         })\r\n\r\n  
          expect(resu
lt.success).toBe(fals
e)\r\n            exp
ect(result.error).toC
ontain('Name is 
required')\r\n       
 })\r\n\r\n        
it('should reject 
service item with 
negative price', 
async () => {\r\n    
        const result 
= await createService
Item({\r\n           
     name: 'Test 
Service',\r\n        
        basePrice: 
-50\r\n            
})\r\n\r\n           
 expect(result.succes
s).toBe(false)\r\n   
         expect(resul
t.error).toContain('P
rice must be 
positive')\r\n       
 })\r\n    
})\r\n\r\n    describ
e('updateServiceItem'
, () => {\r\n        
it('should update 
service item with 
valid data', async 
() => {\r\n          
  const 
mockUpdatedItem = 
{\r\n                
id: '123e4567-e89b-12
d3-a456-426614174001'
,\r\n                
name: 'Blower Door 
Test',\r\n           
     basePrice: 
175.00\r\n           
 }\r\n               
 ; (prisma.serviceIte
m.update as any).mock
ResolvedValue(mockUpd
atedItem)\r\n\r\n    
        const result 
= await updateService
Item(testServiceItemI
d, {\r\n             
   basePrice: 
175.00\r\n           
 })\r\n\r\n          
  expect(result.succe
ss).toBe(true)\r\n   
         expect(resul
t.data?.basePrice).to
Be(175.00)\r\n       
 })\r\n\r\n        
it('should reject 
update with negative 
price', async () => 
{\r\n            
const result = await 
updateServiceItem(tes
tServiceItemId, 
{\r\n                
basePrice: -100\r\n  
          })\r\n\r\n 
           expect(res
ult.success).toBe(fal
se)\r\n            ex
pect(result.error).to
Contain('Price must 
be positive')\r\n    
    })\r\n    
})\r\n\r\n    describ
e('createPriceList', 
() => {\r\n        
it('should create a 
price list with 
valid data', async 
() => {\r\n          
  const 
mockPriceList = 
{\r\n                
id: '123e4567-e89b-12
d3-a456-426614174002'
,\r\n                
name: 'Standard 
Pricing 2024',\r\n   
             
builderId: 
testBuilderId\r\n    
        }\r\n        
        ; (prisma.pri
ceList.create as any)
.mockResolvedValue(mo
ckPriceList)\r\n\r\n 
           const 
result = await create
PriceList({\r\n      
          name: 
'Standard Pricing 
2024',\r\n           
     builderId: 
testBuilderId\r\n    
        })\r\n\r\n   
         expect(resul
t.success).toBe(true)
\r\n            expec
t(result.data).toBeDe
fined()\r\n          
  expect(result.data?
.name).toBe('Standard
 Pricing 2024')\r\n  
          expect(resu
lt.data?.builderId).t
oBe(testBuilderId)\r\
n        })\r\n\r\n  
      it('should 
reject price list 
with empty name', 
async () => {\r\n    
        const result 
= await createPriceLi
st({\r\n             
   name: ''\r\n      
      })\r\n\r\n     
       expect(result.
success).toBe(false)\
r\n            expect
(result.error).toCont
ain('Name is 
required')\r\n       
 })\r\n    
})\r\n\r\n    describ
e('upsertPriceListIte
m', () => {\r\n      
  let priceListId: 
string\r\n\r\n       
 beforeAll(async () 
=> {\r\n            
const mockPriceList 
= {\r\n              
  id: '123e4567-e89b-
12d3-a456-42661417400
3',\r\n              
  name: 'Test Price 
List for Items'\r\n  
          }\r\n      
          ; (prisma.p
riceList.create as an
y).mockResolvedValue(
mockPriceList)\r\n\r\
n            
priceListId = 
mockPriceList.id\r\n 
       })\r\n\r\n    
    it('should 
create a new price 
list item', async () 
=> {\r\n            
const mockItem = 
{\r\n                
id: '123e4567-e89b-12
d3-a456-426614174004'
,\r\n                
priceListId,\r\n     
           
serviceItemId: testSe
rviceItemId,\r\n     
           price: 
200.00\r\n           
 }\r\n               
 ; (prisma.priceListI
tem.upsert as any).mo
ckResolvedValue(mockI
tem)\r\n\r\n         
   const result = 
await upsertPriceList
Item(priceListId, 
testServiceItemId, 
200.00)\r\n\r\n      
      expect(result.s
uccess).toBe(true)\r\
n            expect(r
esult.data?.price).to
Be(200.00)\r\n       
 })\r\n\r\n        
it('should update 
existing price list 
item', async () => 
{\r\n            
const mockItem = 
{\r\n                
id: '123e4567-e89b-12
d3-a456-426614174004'
,\r\n                
priceListId,\r\n     
           
serviceItemId: testSe
rviceItemId,\r\n     
           price: 
225.00\r\n           
 }\r\n               
 ; (prisma.priceListI
tem.upsert as any).mo
ckResolvedValue(mockI
tem)\r\n\r\n         
   const result = 
await upsertPriceList
Item(priceListId, 
testServiceItemId, 
225.00)\r\n\r\n      
      expect(result.s
uccess).toBe(true)\r\
n            expect(r
esult.data?.price).to
Be(225.00)\r\n       
 })\r\n\r\n        
it('should reject 
invalid UUID for 
priceListId', async 
() => {\r\n          
  const result = 
await upsertPriceList
Item('invalid-uuid', 
testServiceItemId, 
100)\r\n\r\n         
   expect(result.succ
ess).toBe(false)\r\n 
           expect(res
ult.error).toBeDefine
d()\r\n        
})\r\n\r\n        
it('should reject 
negative price', 
async () => {\r\n    
        const result 
= await upsertPriceLi
stItem(priceListId, 
testServiceItemId, 
-50)\r\n\r\n         
   expect(result.succ
ess).toBe(false)\r\n 
           expect(res
ult.error).toBeDefine
d()\r\n        
})\r\n    })\r\n})\r\
n","usedDeprecatedRul
es":[]},{"filePath":"
C:\\Users\\shaun\\Ant
igrabity Workspace\\a
uditforecaster\\src\\
app\\actions\\__tests
__\\profitability.tes
t.ts","messages":[{"r
uleId":"@typescript-e
slint/no-explicit-any
","severity":2,"messa
ge":"Unexpected any. 
Specify a different t
ype.","line":23,"colu
mn":89,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":23,"endColumn
":92,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[639,642],"text":"u
nknown"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
639,642],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":34,"colu
mn":75,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":34,"endColumn
":78,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1056,1059],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1056,1059],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":59,"colu
mn":75,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":59,"endColumn
":78,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1911,1914],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1911,1914],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":84,"colu
mn":74,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":84,"endColumn
":77,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2745,2748],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2745,2748],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":4,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { 
describe, it, 
expect, vi, 
beforeEach } from 
'vitest'\r\nimport { 
getJobProfitability, 
getProfitabilityDashb
oard } from '../profi
tability'\r\nimport 
{ prisma } from '@/li
b/prisma'\r\nimport 
{ auth } from 
'@/auth'\r\n\r\n// 
Mock dependencies\r\n
vi.mock('@/lib/prisma
', () => ({\r\n    
prisma: {\r\n        
job: {\r\n           
 findUnique: 
vi.fn(),\r\n         
   findMany: 
vi.fn()\r\n        
}\r\n    }\r\n}))\r\n
\r\nvi.mock('@/auth',
 () => ({\r\n    
auth: vi.fn()\r\n}))\
r\n\r\ndescribe('Prof
itability Server 
Actions', () => 
{\r\n    
beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n       
 vi.mocked(auth).mock
ResolvedValue({ 
user: { id: 
'admin-1', role: 
'ADMIN' } } as 
any)\r\n    
})\r\n\r\n    describ
e('getJobProfitabilit
y', () => {\r\n      
  it('should 
calculate 
profitability 
correctly', async () 
=> {\r\n            
const mockJob = 
{\r\n                
id: 'job-1',\r\n     
           
invoiceItems: [{ 
totalPrice: 1000 
}],\r\n              
  expenses: [{ 
amount: 100 }],\r\n  
              
payoutAmount: 
600\r\n            
}\r\n            vi.m
ocked(prisma.job.find
Unique).mockResolvedV
alue(mockJob as 
any)\r\n\r\n         
   const result = 
await getJobProfitabi
lity('job-1')\r\n\r\n
            // 
Revenue = 1000\r\n   
         // Labor = 
600\r\n            
// Expenses = 
100\r\n            
// Total Cost = 
700\r\n            
// Net Profit = 
300\r\n            
// Margin = 
30%\r\n\r\n          
  expect(result.reven
ue).toBe(1000)\r\n   
         expect(resul
t.costs.labor).toBe(6
00)\r\n            ex
pect(result.costs.exp
enses).toBe(100)\r\n 
           expect(res
ult.netProfit).toBe(3
00)\r\n            ex
pect(result.margin).t
oBe(30)\r\n        
})\r\n\r\n        
it('should estimate 
labor cost if not 
set', async () => 
{\r\n            
const mockJob = 
{\r\n                
id: 'job-1',\r\n     
           
invoiceItems: [{ 
totalPrice: 1000 
}],\r\n              
  expenses: [],\r\n  
              
payoutAmount: 
null\r\n            
}\r\n            vi.m
ocked(prisma.job.find
Unique).mockResolvedV
alue(mockJob as 
any)\r\n\r\n         
   const result = 
await getJobProfitabi
lity('job-1')\r\n\r\n
            // Labor 
= 1000 * 0.70 = 
700\r\n            ex
pect(result.costs.lab
or).toBe(700)\r\n    
    })\r\n    
})\r\n\r\n    describ
e('getProfitabilityDa
shboard', () => 
{\r\n        
it('should aggregate 
metrics correctly', 
async () => {\r\n    
        const 
mockJobs = [\r\n     
           {\r\n     
               id: 
'job-1',\r\n         
           
invoiceItems: [{ 
totalPrice: 1000 
}],\r\n              
      expenses: 
[],\r\n              
      payoutAmount: 
700\r\n              
  },\r\n             
   {\r\n             
       id: 
'job-2',\r\n         
           
invoiceItems: [{ 
totalPrice: 2000 
}],\r\n              
      expenses: 
[],\r\n              
      payoutAmount: 
1400\r\n             
   }\r\n            
]\r\n            vi.m
ocked(prisma.job.find
Many).mockResolvedVal
ue(mockJobs as 
any)\r\n\r\n         
   const result = 
await getProfitabilit
yDashboard(new 
Date(), new 
Date())\r\n\r\n      
      // Total 
Revenue = 3000\r\n   
         // Total 
Cost = 2100\r\n      
      // Net Profit 
= 900\r\n            
// Margin = 
30%\r\n\r\n          
  expect(result.metri
cs.totalRevenue).toBe
(3000)\r\n           
 expect(result.metric
s.totalCost).toBe(210
0)\r\n            exp
ect(result.metrics.ne
tProfit).toBe(900)\r\
n            expect(r
esult.metrics.margin)
.toBe(30)\r\n        
    expect(result.top
Jobs).toHaveLength(2)
\r\n        })\r\n   
 })\r\n})\r\n","usedD
eprecatedRules":[]},{
"filePath":"C:\\Users
\\shaun\\Antigrabity 
Workspace\\auditforec
aster\\src\\app\\acti
ons\\__tests__\\qa.te
st.ts","messages":[{"
ruleId":"@typescript-
eslint/no-explicit-an
y","severity":2,"mess
age":"Unexpected 
any. Specify a 
different type.","lin
e":31,"column":58,"no
deType":"TSAnyKeyword
","messageId":"unexpe
ctedAny","endLine":31
,"endColumn":61,"sugg
estions":[{"messageId
":"suggestUnknown","f
ix":{"range":[803,806
],"text":"unknown"},"
desc":"Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
803,806],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":32,"colu
mn":29,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":32,"endColumn
":32,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[837,840],"text":"u
nknown"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
837,840],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":66,"colu
mn":41,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":66,"endColumn
":44,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2019,2022],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2019,2022],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":71,"colu
mn":22,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":71,"endColumn
":25,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2289,2292],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2289,2292],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":4,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { 
describe, it, 
expect, vi, 
beforeEach } from 
'vitest'\r\nimport { 
approveJob, 
rejectJob } from 
'../qa'\r\nimport { 
prisma } from '@/lib/
prisma'\r\nimport { 
mockSession } from '@
/test/mocks/auth'\r\n
import { auth } from 
'@/auth'\r\nimport { 
sendQARejectionEmail 
} from '@/lib/email'\
r\nimport { 
mockReset } from 'vit
est-mock-extended'\r\
n\r\n// Mock 
dependencies\r\n// 
prisma is already 
mocked in setup.ts\r\
n\r\nvi.mock('@/auth'
, () => ({\r\n    
auth: vi.fn()\r\n}))\
r\n\r\nvi.mock('@/lib
/email', () => 
({\r\n    sendQARejec
tionEmail: vi.fn()\r\
n}))\r\n\r\nvi.mock('
next/cache', () => 
({\r\n    
revalidatePath: vi.fn
()\r\n}))\r\n\r\nvi.m
ock('next/navigation'
, () => ({\r\n    
redirect: vi.fn()\r\n
}))\r\n\r\ndescribe('
qa actions', () => 
{\r\n    
beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n       
 vi.mocked(auth).mock
ResolvedValue(mockSes
sion as any)\r\n     
   mockReset(prisma 
as any)\r\n    
})\r\n\r\n    describ
e('approveJob', () 
=> {\r\n        
it('should approve 
job', async () => 
{\r\n            
const formData = new 
FormData()\r\n       
     formData.set('jo
bId', '123e4567-e89b-
12d3-a456-42661417400
0')\r\n\r\n          
  try {\r\n          
      await approveJo
b(formData)\r\n      
      } catch (e) 
{\r\n                
if ((e as 
Error).message !== 
'NEXT_REDIRECT') 
throw e\r\n          
  }\r\n\r\n          
  expect(prisma.job.u
pdate).toHaveBeenCall
edWith({\r\n         
       where: { id: '
123e4567-e89b-12d3-a4
56-426614174000' 
},\r\n               
 data: { status: 
'INVOICED' }\r\n     
       })\r\n        
})\r\n\r\n        
it('should fail if 
unauthorized', async 
() => {\r\n          
  vi.mocked(auth).moc
kResolvedValue(null)\
r\n            const 
formData = new 
FormData()\r\n\r\n   
         await expect
(approveJob(formData)
).rejects.toThrow('Un
authorized')\r\n     
   })\r\n    
})\r\n\r\n    describ
e('rejectJob', () => 
{\r\n        
it('should reject 
job and send email', 
async () => {\r\n    
        const 
formData = new 
FormData()\r\n       
     formData.set('jo
bId', '123e4567-e89b-
12d3-a456-42661417400
0')\r\n            fo
rmData.set('reason', 
'Missing 
photos')\r\n\r\n     
           ; 
(prisma.job.update 
as any).mockResolvedV
alue({\r\n           
         id: '123e456
7-e89b-12d3-a456-4266
14174000',\r\n       
             
streetAddress: '123 
Main St',\r\n        
            city: 
'Test City',\r\n     
               
inspector: { email: '
inspector@example.com
' }\r\n              
  } as any)\r\n\r\n  
          try {\r\n  
              await r
ejectJob(formData)\r\
n            } catch 
(e) {\r\n            
    if ((e as 
Error).message !== 
'NEXT_REDIRECT') 
throw e\r\n          
  }\r\n\r\n          
  expect(prisma.job.u
pdate).toHaveBeenCall
edWith(expect.objectC
ontaining({\r\n      
          where: { 
id: '123e4567-e89b-12
d3-a456-426614174000'
 },\r\n              
  data: expect.object
Containing({\r\n     
               
status: 
'IN_PROGRESS',\r\n   
                 
rejectionReason: 
'Missing photos'\r\n 
               
})\r\n            
}))\r\n\r\n          
  expect(sendQAReject
ionEmail).toHaveBeenC
alledWith(\r\n       
         'inspector@e
xample.com',\r\n     
           expect.str
ingContaining('123 
Main St'),\r\n       
         'Missing 
photos',\r\n         
       expect.any(Str
ing)\r\n            
)\r\n        
})\r\n\r\n        
it('should fail 
validation without 
reason', async () => 
{\r\n            
const formData = new 
FormData()\r\n       
     formData.set('jo
bId', '123e4567-e89b-
12d3-a456-42661417400
0')\r\n            
// Missing 
reason\r\n\r\n       
     await expect(rej
ectJob(formData)).rej
ects.toThrow('Rejecti
on reason is 
required')\r\n       
 })\r\n    })\r\n})\r
\n","usedDeprecatedRu
les":[]},{"filePath":
"C:\\Users\\shaun\\An
tigrabity Workspace\\
auditforecaster\\src\
\app\\actions\\__test
s__\\reinspection.tes
t.ts","messages":[{"r
uleId":"@typescript-e
slint/no-explicit-any
","severity":2,"messa
ge":"Unexpected any. 
Specify a different t
ype.","line":46,"colu
mn":75,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":46,"endColumn
":78,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1112,1115],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1112,1115],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":50,"colu
mn":84,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":50,"endColumn
":87,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1297,1300],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1297,1300],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":51,"colu
mn":77,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":51,"endColumn
":80,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1379,1382],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1379,1382],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":3,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { 
describe, it, 
expect, vi, 
beforeEach } from 
'vitest'\r\nimport { 
createReinspection } 
from '../inspections'
\r\nimport { prisma 
} from '@/lib/prisma'
\r\nimport { auth } 
from 
'@/auth'\r\nimport { 
redirect } from 'next
/navigation'\r\n\r\n/
/ Mock dependencies\r
\nvi.mock('@/lib/pris
ma', () => ({\r\n    
prisma: {\r\n        
inspection: {\r\n    
        create: 
vi.fn(),\r\n        
},\r\n        job: 
{\r\n            
update: vi.fn(),\r\n 
       }\r\n    }\r\n
}))\r\n\r\nvi.mock('@
/auth', () => ({\r\n 
   auth: vi.fn(),\r\n
}))\r\n\r\nvi.mock('n
ext/navigation', () 
=> ({\r\n    
redirect: vi.fn(),\r\
n}))\r\n\r\nvi.mock('
next/cache', () => 
({\r\n    
revalidatePath: vi.fn
(),\r\n}))\r\n\r\n// 
Mock email to 
prevent Resend initia
lization\r\nvi.mock('
@/lib/email', () => 
({\r\n    sendInspect
ionCompletedEmail: vi
.fn(),\r\n}))\r\n\r\n
describe('createReins
pection', () => 
{\r\n    const 
mockJobId = 
'job-123'\r\n    
const mockUserId = 
'user-123'\r\n\r\n   
 beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n    
})\r\n\r\n    
it('creates a new 
inspection and 
updates job status', 
async () => {\r\n    
    // Mock auth 
session\r\n        vi
.mocked(auth).mockRes
olvedValue({ user: { 
id: mockUserId } } 
as any)\r\n\r\n      
  // Mock prisma 
responses\r\n        
const 
mockNewInspection = 
{ id: 
'inspection-new' 
}\r\n        vi.mocke
d(prisma.inspection.c
reate).mockResolvedVa
lue(mockNewInspection
 as any)\r\n        v
i.mocked(prisma.job.u
pdate).mockResolvedVa
lue({ id: mockJobId 
} as any)\r\n\r\n    
    await createReins
pection(mockJobId)\r\
n\r\n        // 
Verify inspection 
creation\r\n        e
xpect(prisma.inspecti
on.create).toHaveBeen
CalledWith({\r\n     
       data: {\r\n   
             jobId: 
mockJobId,\r\n       
         type: 
'BLOWER_DOOR',\r\n   
             data: 
'{}',\r\n            
    checklist: 
'[]',\r\n            
}\r\n        
})\r\n\r\n        // 
Verify job status 
update\r\n        exp
ect(prisma.job.update
).toHaveBeenCalledWit
h({\r\n            
where: { id: 
mockJobId },\r\n     
       data: { 
status: 
'IN_PROGRESS' }\r\n  
      })\r\n\r\n     
   // Verify 
redirect\r\n        e
xpect(redirect).toHav
eBeenCalledWith(`/das
hboard/inspections/${
mockNewInspection.id}
`)\r\n    })\r\n\r\n 
   it('throws error 
if not 
authenticated', 
async () => {\r\n    
    vi.mocked(auth).m
ockResolvedValue(null
)\r\n\r\n        
await expect(createRe
inspection(mockJobId)
).rejects.toThrow('Yo
u must be logged 
in')\r\n    })\r\n})\
r\n","usedDeprecatedR
ules":[]},{"filePath"
:"C:\\Users\\shaun\\A
ntigrabity Workspace\
\auditforecaster\\src
\\app\\actions\\__tes
ts__\\reports.test.ts
","messages":[{"ruleI
d":"@typescript-eslin
t/no-explicit-any","s
everity":2,"message":
"Unexpected any. 
Specify a different t
ype.","line":34,"colu
mn":62,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":34,"endColumn
":65,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[896,899],"text":"u
nknown"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
896,899],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":35,"colu
mn":90,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":35,"endColumn
":93,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[991,994],"text":"u
nknown"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
991,994],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":71,"colu
mn":62,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":71,"endColumn
":65,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2199,2202],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2199,2202],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":72,"colu
mn":85,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":72,"endColumn
":88,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2289,2292],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2289,2292],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":90,"colu
mn":62,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":90,"endColumn
":65,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2900,2903],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2900,2903],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":5,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { 
describe, it, 
expect, vi, 
beforeEach } from 
'vitest'\r\nimport { 
saveReport, 
getSavedReports, 
deleteReport } from '
../reports'\r\nimport
 { prisma } from '@/l
ib/prisma'\r\nimport 
{ auth } from 
'@/auth'\r\n\r\n// 
Mock dependencies\r\n
vi.mock('@/lib/prisma
', () => ({\r\n    
prisma: {\r\n        
savedReport: {\r\n   
         create: 
vi.fn(),\r\n         
   findMany: 
vi.fn(),\r\n         
   delete: 
vi.fn(),\r\n        
},\r\n    },\r\n}))\r
\n\r\nvi.mock('@/auth
', () => ({\r\n    
auth: vi.fn(),\r\n}))
\r\n\r\nvi.mock('next
/cache', () => 
({\r\n    
revalidatePath: vi.fn
(),\r\n}))\r\n\r\ndes
cribe('Reports 
Actions', () => 
{\r\n    
beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n    
})\r\n\r\n    describ
e('saveReport', () 
=> {\r\n        
it('should create a 
report when 
authenticated', 
async () => {\r\n    
        // 
Arrange\r\n          
  const mockSession 
= { user: { id: 
'user-1' } }\r\n     
       vi.mocked(auth
).mockResolvedValue(m
ockSession as 
any)\r\n            v
i.mocked(prisma.saved
Report.create).mockRe
solvedValue({ id: 
'report-1' } as 
any)\r\n\r\n         
   const reportData 
= {\r\n              
  name: 'Test 
Report',\r\n         
       description: 
'A test report',\r\n 
               
config: { type: 
'financial' },\r\n   
         }\r\n\r\n   
         // Act\r\n  
          const 
result = await saveRe
port(reportData)\r\n\
r\n            // 
Assert\r\n           
 expect(result).toEqu
al({ success: true 
})\r\n            exp
ect(prisma.savedRepor
t.create).toHaveBeenC
alledWith({\r\n      
          data: 
{\r\n                
    
...reportData,\r\n   
                 
userId: 
'user-1',\r\n        
        },\r\n       
     })\r\n        
})\r\n\r\n        
it('should throw 
error when 
unauthenticated', 
async () => {\r\n    
        // 
Arrange\r\n          
  vi.mocked(auth).moc
kResolvedValue(null)\
r\n\r\n            
// Act & Assert\r\n  
          await 
expect(saveReport({ 
name: 'Test', 
config: {} }))\r\n   
             .rejects
.toThrow('Unauthorize
d')\r\n        
})\r\n    })\r\n\r\n 
   describe('getSaved
Reports', () => 
{\r\n        
it('should return 
reports for the 
user', async () => 
{\r\n            // 
Arrange\r\n          
  const mockSession 
= { user: { id: 
'user-1' } }\r\n     
       const 
mockReports = [{ id: 
'report-1', name: 
'Report 1' }]\r\n    
        vi.mocked(aut
h).mockResolvedValue(
mockSession as 
any)\r\n            v
i.mocked(prisma.saved
Report.findMany).mock
ResolvedValue(mockRep
orts as any)\r\n\r\n 
           // 
Act\r\n            
const result = await 
getSavedReports()\r\n
\r\n            // 
Assert\r\n           
 expect(result).toEqu
al(mockReports)\r\n  
          expect(pris
ma.savedReport.findMa
ny).toHaveBeenCalledW
ith({\r\n            
    where: { userId: 
'user-1' },\r\n      
          orderBy: { 
createdAt: 'desc' 
},\r\n            
})\r\n        })\r\n 
   })\r\n\r\n    desc
ribe('deleteReport', 
() => {\r\n        
it('should delete 
report when 
authenticated', 
async () => {\r\n    
        // 
Arrange\r\n          
  const mockSession 
= { user: { id: 
'user-1' } }\r\n     
       vi.mocked(auth
).mockResolvedValue(m
ockSession as 
any)\r\n\r\n         
   // Act\r\n        
    const result = 
await deleteReport('r
eport-1')\r\n\r\n    
        // 
Assert\r\n           
 expect(result).toEqu
al({ success: true 
})\r\n            exp
ect(prisma.savedRepor
t.delete).toHaveBeenC
alledWith({\r\n      
          where: { 
id: 'report-1', 
userId: 'user-1' 
},\r\n            
})\r\n        })\r\n 
   })\r\n})\r\n","use
dDeprecatedRules":[]}
,{"filePath":"C:\\Use
rs\\shaun\\Antigrabit
y Workspace\\auditfor
ecaster\\src\\app\\ac
tions\\__tests__\\sub
divisions.test.ts","m
essages":[{"ruleId":"
@typescript-eslint/no
-explicit-any","sever
ity":2,"message":"Une
xpected any. Specify 
a different type.","l
ine":22,"column":58,"
nodeType":"TSAnyKeywo
rd","messageId":"unex
pectedAny","endLine":
22,"endColumn":61,"su
ggestions":[{"message
Id":"suggestUnknown",
"fix":{"range":[680,6
83],"text":"unknown"}
,"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
680,683],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":23,"colu
mn":29,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":23,"endColumn
":32,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[714,717],"text":"u
nknown"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
714,717],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":33,"colu
mn":49,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":33,"endColumn
":52,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1046,1049],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1046,1049],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":81,"colu
mn":49,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":81,"endColumn
":52,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2804,2807],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2804,2807],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":101,"col
umn":47,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":101,"endColu
mn":50,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[3636,3639],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3636,3639],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":103,"col
umn":18,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":103,"endColu
mn":21,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[3758,3761],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3758,3761],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":116,"col
umn":45,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":116,"endColu
mn":48,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[4260,4263],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
4260,4263],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":116,"col
umn":118,"nodeType":"
TSAnyKeyword","messag
eId":"unexpectedAny",
"endLine":116,"endCol
umn":121,"suggestions
":[{"messageId":"sugg
estUnknown","fix":{"r
ange":[4333,4336],"te
xt":"unknown"},"desc"
:"Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
4333,4336],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":8,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { 
describe, it, 
expect, vi, 
beforeEach } from 
'vitest'\r\nimport { 
createSubdivision, 
updateSubdivision, 
getSubdivisions, 
deleteSubdivision } 
from '../subdivisions
'\r\nimport { prisma 
} from '@/lib/prisma'
\r\nimport { 
mockSession } from '@
/test/mocks/auth'\r\n
import { auth } from 
'@/auth'\r\nimport { 
mockReset } from 'vit
est-mock-extended'\r\
n\r\n// Mock 
dependencies\r\n// 
prisma is already 
mocked in setup.ts\r\
n\r\nvi.mock('@/auth'
, () => ({\r\n    
auth: vi.fn()\r\n}))\
r\n\r\nvi.mock('next/
cache', () => ({\r\n 
   revalidatePath: vi
.fn()\r\n}))\r\n\r\nd
escribe('subdivisions
 actions', () => 
{\r\n    
beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n       
 vi.mocked(auth).mock
ResolvedValue(mockSes
sion as any)\r\n     
   mockReset(prisma 
as any)\r\n    
})\r\n\r\n    describ
e('createSubdivision'
, () => {\r\n        
it('should create 
subdivision with 
valid data', async 
() => {\r\n          
  const data = {\r\n 
               name: 
'New 
Subdivision',\r\n    
            
builderId: '123e4567-
e89b-12d3-a456-426614
174000'\r\n          
  }\r\n\r\n          
      ; (prisma.subdi
vision.create as any)
.mockResolvedValue({\
r\n                  
  id: '123e4567-e89b-
12d3-a456-42661417400
1',\r\n              
      name: 'New 
Subdivision',\r\n    
                
builderId: '123e4567-
e89b-12d3-a456-426614
174000',\r\n         
           
createdAt: new 
Date(),\r\n          
          updatedAt: 
new Date()\r\n       
         })\r\n\r\n  
          const 
result = await create
Subdivision(data)\r\n
\r\n            expec
t(result.success).toB
e(true)\r\n          
  expect(prisma.subdi
vision.create).toHave
BeenCalledWith({\r\n 
               data: 
expect.objectContaini
ng({\r\n             
       name: 'New 
Subdivision',\r\n    
                
builderId: '123e4567-
e89b-12d3-a456-426614
174000'\r\n          
      })\r\n         
   })\r\n        
})\r\n\r\n        
it('should fail 
validation with 
missing name', async 
() => {\r\n          
  const data = {\r\n 
               name: 
'',\r\n              
  builderId: '123e456
7-e89b-12d3-a456-4266
14174000'\r\n        
    }\r\n\r\n        
    const result = 
await createSubdivisi
on(data)\r\n\r\n     
       expect(result.
success).toBe(false)\
r\n            expect
(prisma.subdivision.c
reate).not.toHaveBeen
Called()\r\n        
})\r\n\r\n        
it('should fail if 
unauthorized', async 
() => {\r\n          
  vi.mocked(auth).moc
kResolvedValue(null)\
r\n            const 
data = {\r\n         
       name: 'New 
Subdivision',\r\n    
            
builderId: '123e4567-
e89b-12d3-a456-426614
174000'\r\n          
  }\r\n\r\n          
  const result = 
await createSubdivisi
on(data)\r\n         
   expect(result.succ
ess).toBe(false)\r\n 
           expect(res
ult.error).toBe('Unau
thorized')\r\n       
 })\r\n    
})\r\n\r\n    describ
e('updateSubdivision'
, () => {\r\n        
it('should update 
subdivision', async 
() => {\r\n          
  const data = { 
name: 'Updated Name' 
}\r\n\r\n            
    ; (prisma.subdivi
sion.update as any).m
ockResolvedValue({\r\
n                    
id: '123e4567-e89b-12
d3-a456-426614174001'
,\r\n                
    name: 'Updated 
Name',\r\n           
         builderId: '
123e4567-e89b-12d3-a4
56-426614174000',\r\n
                    
createdAt: new 
Date(),\r\n          
          updatedAt: 
new Date()\r\n       
         })\r\n\r\n  
          const 
result = await update
Subdivision('123e4567
-e89b-12d3-a456-42661
4174001', 
data)\r\n\r\n        
    expect(result.suc
cess).toBe(true)\r\n 
           expect(pri
sma.subdivision.updat
e).toHaveBeenCalledWi
th({\r\n             
   where: { id: '123e
4567-e89b-12d3-a456-4
26614174001' },\r\n  
              data: 
{ name: 'Updated 
Name' }\r\n          
  })\r\n        
})\r\n    })\r\n\r\n 
   describe('getSubdi
visions', () => 
{\r\n        
it('should fetch 
subdivisions', async 
() => {\r\n          
  ; (prisma.subdivisi
on.findMany as any).m
ockResolvedValue([\r\
n                { 
id: '123e4567-e89b-12
d3-a456-426614174001'
, name: 'Sub 1' 
}\r\n            ] 
as any)\r\n\r\n      
      const result = 
await getSubdivisions
('123e4567-e89b-12d3-
a456-426614174000')\r
\n\r\n            exp
ect(result.success).t
oBe(true)\r\n        
    expect(prisma.sub
division.findMany).to
HaveBeenCalledWith(ex
pect.objectContaining
({\r\n               
 where: { builderId: 
'123e4567-e89b-12d3-a
456-426614174000' 
}\r\n            
}))\r\n        
})\r\n    })\r\n\r\n 
   describe('deleteSu
bdivision', () => 
{\r\n        
it('should delete 
subdivision', async 
() => {\r\n          
  ; (prisma.subdivisi
on.delete as any).moc
kResolvedValue({ id: 
'123e4567-e89b-12d3-a
456-426614174001' } 
as any)\r\n\r\n      
      const 
validUuid = '123e4567
-e89b-12d3-a456-42661
4174001'\r\n         
   const result2 = 
await deleteSubdivisi
on(validUuid)\r\n\r\n
            expect(re
sult2.success).toBe(t
rue)\r\n            e
xpect(prisma.subdivis
ion.delete).toHaveBee
nCalledWith({\r\n    
            where: { 
id: validUuid }\r\n  
          })\r\n     
   })\r\n    })\r\n})
\r\n","usedDeprecated
Rules":[]},{"filePath
":"C:\\Users\\shaun\\
Antigrabity Workspace
\\auditforecaster\\sr
c\\app\\actions\\__te
sts__\\templates.test
.ts","messages":[{"ru
leId":"@typescript-es
lint/no-unused-vars",
"severity":1,"message
":"'mockDeep' is 
defined but never use
d.","line":6,"column"
:10,"nodeType":null,"
messageId":"unusedVar
","endLine":6,"endCol
umn":18},{"ruleId":"@
typescript-eslint/no-
explicit-any","severi
ty":2,"message":"Unex
pected any. Specify 
a different type.","l
ine":22,"column":58,"
nodeType":"TSAnyKeywo
rd","messageId":"unex
pectedAny","endLine":
22,"endColumn":61,"su
ggestions":[{"message
Id":"suggestUnknown",
"fix":{"range":[658,6
61],"text":"unknown"}
,"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
658,661],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":23,"colu
mn":29,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":23,"endColumn
":32,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[692,695],"text":"u
nknown"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
692,695],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":32,"colu
mn":52,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":32,"endColumn
":55,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1047,1050],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1047,1050],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":3,"fatal
ErrorCount":0,"warnin
gCount":1,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { 
describe, it, 
expect, vi, 
beforeEach } from 
'vitest'\r\nimport { 
createTemplate, 
updateTemplate, 
deleteTemplate } 
from '../templates'\r
\nimport { prisma } 
from '@/lib/prisma'\r
\nimport { 
mockSession } from '@
/test/mocks/auth'\r\n
import { auth } from 
'@/auth'\r\nimport { 
mockDeep, mockReset 
} from 'vitest-mock-e
xtended'\r\n\r\n// 
Mock 
dependencies\r\n// 
prisma is already 
mocked in setup.ts\r\
n\r\nvi.mock('@/auth'
, () => ({\r\n    
auth: vi.fn()\r\n}))\
r\n\r\nvi.mock('next/
cache', () => ({\r\n 
   revalidatePath: vi
.fn()\r\n}))\r\n\r\nd
escribe('templates 
actions', () => 
{\r\n    
beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n       
 vi.mocked(auth).mock
ResolvedValue(mockSes
sion as any)\r\n     
   mockReset(prisma 
as any)\r\n    
})\r\n\r\n    describ
e('createTemplate', 
() => {\r\n        
it('should create 
template with valid 
data', async () => 
{\r\n            
const formData = new 
FormData()\r\n       
     
formData.set('name', 
'New Template')\r\n  
          formData.se
t('checklistItems', 
JSON.stringify([{ 
label: 'Item 1' 
}]))\r\n\r\n         
       ; (prisma.repo
rtTemplate.create as 
any).mockResolvedValu
e({\r\n              
      id: 
'temp-1',\r\n        
            name: 
'New Template',\r\n  
                  
checklistItems: 
JSON.stringify([{ 
label: 'Item 1' 
}]),\r\n             
       isDefault: 
false,\r\n           
         createdAt: 
new Date(),\r\n      
              
updatedAt: new 
Date()\r\n           
     })\r\n\r\n      
      await createTem
plate(formData)\r\n\r
\n            expect(
prisma.reportTemplate
.create).toHaveBeenCa
lledWith({\r\n       
         data: expect
.objectContaining({\r
\n                   
 name: 'New 
Template',\r\n       
             
checklistItems: expec
t.stringContaining('\
"label\":\"Item 
1\"')\r\n            
    })\r\n           
 })\r\n        
})\r\n\r\n        
it('should fail 
validation with 
invalid checklist 
items', async () => 
{\r\n            
const formData = new 
FormData()\r\n       
     
formData.set('name', 
'New Template')\r\n  
          formData.se
t('checklistItems', '
invalid-json')\r\n\r\
n            await ex
pect(createTemplate(f
ormData)).rejects.toT
hrow('Invalid 
checklist items 
format')\r\n        
})\r\n\r\n        
it('should fail 
validation with 
empty name', async 
() => {\r\n          
  const formData = 
new FormData()\r\n   
         
formData.set('name', 
'')\r\n            fo
rmData.set('checklist
Items', 
'[]')\r\n\r\n        
    await expect(crea
teTemplate(formData))
.rejects.toThrow('Nam
e is required')\r\n  
      })\r\n    
})\r\n\r\n    describ
e('updateTemplate', 
() => {\r\n        
it('should update 
template', async () 
=> {\r\n            
const formData = new 
FormData()\r\n       
     
formData.set('name', 
'Updated 
Template')\r\n       
     formData.set('ch
ecklistItems', 
JSON.stringify([{ 
label: 'Item 1' 
}]))\r\n            f
ormData.set('isDefaul
t', 'false')\r\n\r\n 
           await upda
teTemplate('temp-1', 
formData)\r\n\r\n    
        expect(prisma
.reportTemplate.updat
e).toHaveBeenCalledWi
th({\r\n             
   where: { id: 
'temp-1' },\r\n      
          data: expec
t.objectContaining({\
r\n                  
  name: 'Updated 
Template'\r\n        
        })\r\n       
     })\r\n        
})\r\n\r\n        
it('should handle 
setting as default', 
async () => {\r\n    
        const 
formData = new 
FormData()\r\n       
     
formData.set('name', 
'Default 
Template')\r\n       
     formData.set('ch
ecklistItems', 
'[]')\r\n            
formData.set('isDefau
lt', 'true')\r\n\r\n 
           await upda
teTemplate('temp-1', 
formData)\r\n\r\n    
        // Should 
unset other 
defaults\r\n         
   expect(prisma.repo
rtTemplate.updateMany
).toHaveBeenCalledWit
h({\r\n              
  where: { 
isDefault: true 
},\r\n               
 data: { isDefault: 
false }\r\n          
  })\r\n\r\n         
   // Should set 
this one as 
default\r\n          
  expect(prisma.repor
tTemplate.update).toH
aveBeenCalledWith({\r
\n                
where: { id: 
'temp-1' },\r\n      
          data: expec
t.objectContaining({\
r\n                  
  isDefault: 
true\r\n             
   })\r\n            
})\r\n        })\r\n 
   })\r\n\r\n    desc
ribe('deleteTemplate'
, () => {\r\n        
it('should delete 
template', async () 
=> {\r\n            
// Use valid UUID 
for test\r\n         
   const validUuid = 
'123e4567-e89b-12d3-a
456-426614174000'\r\n
\r\n            
await deleteTemplate(
validUuid)\r\n\r\n   
         expect(prism
a.reportTemplate.dele
te).toHaveBeenCalledW
ith({\r\n            
    where: { id: 
validUuid }\r\n      
      })\r\n        
})\r\n\r\n        
it('should throw on 
invalid ID', async 
() => {\r\n          
  await expect(delete
Template('invalid-id'
)).rejects.toThrow('I
nvalid template 
ID')\r\n        
})\r\n    })\r\n})\r\
n","usedDeprecatedRul
es":[]},{"filePath":"
C:\\Users\\shaun\\Ant
igrabity Workspace\\a
uditforecaster\\src\\
app\\actions\\__tests
__\\users.test.ts","m
essages":[{"ruleId":"
@typescript-eslint/no
-explicit-any","sever
ity":2,"message":"Une
xpected any. Specify 
a different type.","l
ine":36,"column":74,"
nodeType":"TSAnyKeywo
rd","messageId":"unex
pectedAny","endLine":
36,"endColumn":77,"su
ggestions":[{"message
Id":"suggestUnknown",
"fix":{"range":[837,8
40],"text":"unknown"}
,"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
837,840],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":37,"colu
mn":71,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":37,"endColumn
":74,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[913,916],"text":"u
nknown"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
913,916],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":49,"colu
mn":81,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":49,"endColumn
":84,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1437,1440],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1437,1440],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":63,"colu
mn":82,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":63,"endColumn
":85,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2001,2004],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2001,2004],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":76,"colu
mn":87,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":76,"endColumn
":90,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2538,2541],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2538,2541],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":5,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { 
describe, it, 
expect, vi, 
beforeEach } from 
'vitest'\r\nimport { 
createUser, 
updateUser, 
deleteUser } from 
'../users'\r\nimport 
{ prisma } from '@/li
b/prisma'\r\nimport 
{ auth } from 
'@/auth'\r\nimport 
bcrypt from 
'bcryptjs'\r\n\r\n// 
Mock dependencies\r\n
vi.mock('@/lib/prisma
', () => ({\r\n    
prisma: {\r\n        
user: {\r\n          
  findUnique: 
vi.fn(),\r\n         
   create: 
vi.fn(),\r\n         
   update: 
vi.fn(),\r\n         
   delete: 
vi.fn()\r\n        
}\r\n    }\r\n}))\r\n
\r\nvi.mock('@/auth',
 () => ({\r\n    
auth: vi.fn()\r\n}))\
r\n\r\nvi.mock('bcryp
tjs', () => ({\r\n   
 default: {\r\n      
  hash: vi.fn()\r\n  
  }\r\n}))\r\n\r\nvi.
mock('next/cache', 
() => ({\r\n    
revalidatePath: vi.fn
()\r\n}))\r\n\r\ndesc
ribe('Users Server 
Actions', () => 
{\r\n    
beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n       
 vi.mocked(auth).mock
ResolvedValue({ 
user: { role: 
'ADMIN' } } as 
any)\r\n        vi.mo
cked(bcrypt.hash).moc
kResolvedValue('hashe
d-password' as 
any)\r\n    
})\r\n\r\n    describ
e('createUser', () 
=> {\r\n        
it('should create 
user successfully', 
async () => {\r\n    
        const 
formData = new 
FormData()\r\n       
     formData.append(
'name', 'John 
Doe')\r\n            
formData.append('emai
l', 'john@example.com
')\r\n            for
mData.append('role', 
'INSPECTOR')\r\n     
       formData.appen
d('password', 'passwo
rd123')\r\n\r\n      
      vi.mocked(prism
a.user.findUnique).mo
ckResolvedValue(null)
\r\n            vi.mo
cked(prisma.user.crea
te).mockResolvedValue
({ id: 'user-1' } as 
any)\r\n\r\n         
   const result = 
await 
createUser(null, 
formData)\r\n\r\n    
        expect(result
.message).toBe('User 
created 
successfully')\r\n   
         expect(prism
a.user.create).toHave
BeenCalledWith(expect
.objectContaining({\r
\n                
data: expect.objectCo
ntaining({\r\n       
             email: '
john@example.com',\r\
n                    
passwordHash: 'hashed
-password'\r\n       
         })\r\n      
      }))\r\n        
})\r\n\r\n        
it('should fail if 
not admin', async () 
=> {\r\n            v
i.mocked(auth).mockRe
solvedValue({ user: 
{ role: 'INSPECTOR' 
} } as any)\r\n      
      const formData 
= new 
FormData()\r\n\r\n   
         const 
result = await 
createUser(null, 
formData)\r\n        
    expect(result.mes
sage).toContain('Unau
thorized')\r\n       
 })\r\n\r\n        
it('should fail if 
email exists', async 
() => {\r\n          
  const formData = 
new FormData()\r\n   
         formData.app
end('name', 'John 
Doe')\r\n            
formData.append('emai
l', 'john@example.com
')\r\n            for
mData.append('role', 
'INSPECTOR')\r\n\r\n 
           vi.mocked(
prisma.user.findUniqu
e).mockResolvedValue(
{ id: 'existing' } 
as any)\r\n\r\n      
      const result = 
await 
createUser(null, 
formData)\r\n        
    expect(result.mes
sage).toBe('User 
with this email 
already exists')\r\n 
       })\r\n    
})\r\n\r\n    describ
e('updateUser', () 
=> {\r\n        
it('should update 
user successfully', 
async () => {\r\n    
        const 
formData = new 
FormData()\r\n       
     formData.append(
'name', 'John 
Updated')\r\n        
    formData.append('
email', 'john@example
.com')\r\n           
 formData.append('rol
e', 
'INSPECTOR')\r\n\r\n 
           const 
result = await 
updateUser('user-1', 
null, 
formData)\r\n\r\n    
        expect(result
.message).toBe('User 
updated 
successfully')\r\n   
         expect(prism
a.user.update).toHave
BeenCalledWith(expect
.objectContaining({\r
\n                
where: { id: 
'user-1' },\r\n      
          data: expec
t.objectContaining({ 
name: 'John Updated' 
})\r\n            
}))\r\n        
})\r\n    })\r\n\r\n 
   describe('deleteUs
er', () => {\r\n     
   it('should delete 
user successfully', 
async () => {\r\n    
        const result 
= await deleteUser('u
ser-1')\r\n\r\n      
      expect(result.m
essage).toBe('User 
deleted 
successfully')\r\n   
         expect(prism
a.user.delete).toHave
BeenCalledWith({\r\n 
               
where: { id: 
'user-1' }\r\n       
     })\r\n        
})\r\n    })\r\n})\r\
n","usedDeprecatedRul
es":[]},{"filePath":"
C:\\Users\\shaun\\Ant
igrabity Workspace\\a
uditforecaster\\src\\
app\\actions\\advance
d-templates.ts","mess
ages":[{"ruleId":"@ty
pescript-eslint/no-ex
plicit-any","severity
":2,"message":"Unexpe
cted any. Specify a 
different type.","lin
e":25,"column":46,"no
deType":"TSAnyKeyword
","messageId":"unexpe
ctedAny","endLine":25
,"endColumn":49,"sugg
estions":[{"messageId
":"suggestUnknown","f
ix":{"range":[775,778
],"text":"unknown"},"
desc":"Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
775,778],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-unused-vars",
"severity":1,"message
":"'session' is 
assigned a value but 
never used.","line":4
9,"column":15,"nodeTy
pe":null,"messageId":
"unusedVar","endLine"
:49,"endColumn":22}],
"suppressedMessages":
[{"ruleId":"@typescri
pt-eslint/no-explicit
-any","severity":2,"m
essage":"Unexpected 
any. Specify a 
different type.","lin
e":35,"column":46,"no
deType":"TSAnyKeyword
","messageId":"unexpe
ctedAny","endLine":35
,"endColumn":49,"sugg
estions":[{"messageId
":"suggestUnknown","f
ix":{"range":[1119,11
22],"text":"unknown"}
,"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1119,1122],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}],"supp
ressions":[{"kind":"d
irective","justificat
ion":""}]}],"errorCou
nt":1,"fatalErrorCoun
t":0,"warningCount":1
,"fixableErrorCount":
0,"fixableWarningCoun
t":0,"source":"'use s
erver'\r\n\r\nimport 
{ prisma } from \"@/l
ib/prisma\"\r\nimport
 { revalidatePath } 
from \"next/cache\"\r
\nimport { auth } 
from 
\"@/auth\"\r\nimport 
{ TemplateStructure 
} from \"@/lib/report
ing/engine\"\r\nimpor
t { logger } from \"@
/lib/logger\"\r\n\r\n
export async 
function saveAdvanced
Template(data: {\r\n 
   name: string\r\n  
  description?: 
string\r\n    
structure: TemplateSt
ructure\r\n    
templateId?: 
string\r\n}) {\r\n   
 const session = 
await auth()\r\n    
if (!session) throw 
new Error(\"Unauthori
zed\")\r\n\r\n    if 
(data.templateId) 
{\r\n        // 
Update existing\r\n  
      await prisma.re
portTemplate.update({
\r\n            
where: { id: 
data.templateId 
},\r\n            
data: {\r\n          
      name: 
data.name,\r\n       
         
description: data.des
cription,\r\n        
        structure: 
data.structure as 
any,\r\n            
}\r\n        })\r\n  
  } else {\r\n       
 // Create new\r\n   
     await prisma.rep
ortTemplate.create({\
r\n            data: 
{\r\n                
name: data.name,\r\n 
               
description: data.des
cription,\r\n        
        // eslint-dis
able-next-line @types
cript-eslint/no-expli
cit-any\r\n          
      structure: 
data.structure as 
any,\r\n             
   checklistItems: 
'[]', // Keep for 
backwards 
compatibility\r\n    
        }\r\n        
})\r\n    }\r\n\r\n  
  revalidatePath('/da
shboard/reports/templ
ates')\r\n    return 
{ success: true }\r\n
}\r\n\r\n\r\n\r\nexpo
rt async function cre
ateInspectionWithTemp
late(jobId: string, 
templateId: string) 
{\r\n    try {\r\n   
     const session = 
await auth()\r\n     
   const msg = 
`Creating inspection 
for job ${jobId} 
with template 
${templateId}`\r\n   
     logger.info(msg)
\r\n\r\n        
const inspection = 
await prisma.inspecti
on.create({\r\n      
      data: {\r\n    
            
jobId,\r\n           
     
reportTemplateId: 
templateId,\r\n      
          data: 
'{}',\r\n            
    answers: {},\r\n 
               
score: 0,\r\n        
    }\r\n        
})\r\n\r\n        log
ger.info(`Inspection 
created: ${inspection
.id}`)\r\n        
return { 
inspectionId: 
inspection.id }\r\n  
  } catch (error) 
{\r\n        logger.e
rror(\"createInspecti
onWithTemplate 
ERROR\", { error 
})\r\n        throw 
error\r\n    
}\r\n}\r\n\r\nexport 
async function getTem
platesForSelection() 
{\r\n    const 
session = await 
auth()\r\n    if 
(!session) throw new 
Error(\"Unauthorized\
")\r\n\r\n    const 
templates = await pri
sma.reportTemplate.fi
ndMany({\r\n        
select: {\r\n        
    id: true,\r\n    
        name: 
true,\r\n            
description: 
true\r\n        
},\r\n        
orderBy: {\r\n       
     createdAt: 
'desc'\r\n        
}\r\n    })\r\n\r\n  
  return templates\r\
n}\r\n\r\n","usedDepr
ecatedRules":[]},{"fi
lePath":"C:\\Users\\s
haun\\Antigrabity Wor
kspace\\auditforecast
er\\src\\app\\actions
\\analytics.ts","mess
ages":[{"ruleId":"@ty
pescript-eslint/ban-t
s-comment","severity"
:2,"message":"Use 
\"@ts-expect-error\" 
instead of 
\"@ts-ignore\", as 
\"@ts-ignore\" will 
do nothing if the 
following line is err
or-free.","line":109,
"column":9,"nodeType"
:"Line","messageId":"
tsIgnoreInsteadOfExpe
ctError","endLine":10
9,"endColumn":67,"sug
gestions":[{"messageI
d":"replaceTsIgnoreWi
thTsExpectError","fix
":{"range":[3725,3783
],"text":"// 
@ts-expect-error - 
TS struggles with 
optional second arg h
ere"},"desc":"Replace
 \"@ts-ignore\" with 
\"@ts-expect-error\".
"}]},{"ruleId":"@type
script-eslint/ban-ts-
comment","severity":2
,"message":"Use 
\"@ts-expect-error\" 
instead of 
\"@ts-ignore\", as 
\"@ts-ignore\" will 
do nothing if the 
following line is err
or-free.","line":116,
"column":9,"nodeType"
:"Line","messageId":"
tsIgnoreInsteadOfExpe
ctError","endLine":11
6,"endColumn":67,"sug
gestions":[{"messageI
d":"replaceTsIgnoreWi
thTsExpectError","fix
":{"range":[4001,4059
],"text":"// 
@ts-expect-error - 
TS struggles with 
optional second arg h
ere"},"desc":"Replace
 \"@ts-ignore\" with 
\"@ts-expect-error\".
"}]}],"suppressedMess
ages":[],"errorCount"
:2,"fatalErrorCount":
0,"warningCount":0,"f
ixableErrorCount":0,"
fixableWarningCount":
0,"source":"'use serv
er'\r\n\r\nimport { 
prisma } from \"@/lib
/prisma\"\r\nimport 
{ auth } from 
\"@/auth\"\r\nimport 
{ startOfMonth, 
subMonths, 
endOfMonth, 
eachDayOfInterval, 
format } from \"date-
fns\"\r\nimport { 
predictNextMonth } 
from \"@/lib/forecast
ing\"\r\nimport { 
getJobPrice } from \"
@/lib/pricing\"\r\n\r
\nexport async 
function 
getAnalyticsData() 
{\r\n    const 
session = await 
auth()\r\n    if 
(!session) throw new 
Error(\"Unauthorized\
")\r\n\r\n    // 
RBAC: Only Admins 
can view global 
analytics\r\n    if 
(session.user.role 
!== 'ADMIN') {\r\n   
     throw new 
Error(\"Forbidden: 
Insufficient 
permissions\")\r\n   
 }\r\n\r\n    const 
now = new Date()\r\n 
   const 
currentMonthStart = s
tartOfMonth(now)\r\n 
   const 
lastMonthStart = star
tOfMonth(subMonths(no
w, 1))\r\n    const 
lastMonthEnd = endOfM
onth(subMonths(now, 
1))\r\n    const 
thirtyDaysAgo = new 
Date(now.getTime() - 
30 * 24 * 60 * 60 * 
1000)\r\n\r\n    // 
Layer 6: 
Observability - 
Performance 
Tracing\r\n    const 
startTime = performan
ce.now()\r\n\r\n    
// Parallelize 
Independent 
Queries\r\n    const 
[\r\n        
invoicesCurrent,\r\n 
       uninvoicedJobs
Current,\r\n        
invoicesLast,\r\n    
    uninvoicedJobsLas
t,\r\n        
jobCounts,\r\n       
 topInspectors,\r\n  
      recentJobs\r\n 
   ] = await 
Promise.all([\r\n    
    // 1. Current 
Revenue 
(Invoices)\r\n       
 prisma.invoice.aggre
gate({\r\n           
 where: {\r\n        
        status: { 
in: ['PAID', 'SENT'] 
},\r\n               
 createdAt: { gte: 
currentMonthStart 
},\r\n               
 deletedAt: null // 
Soft Delete 
Filter\r\n           
 },\r\n            
_sum: { totalAmount: 
true }\r\n        
}),\r\n        // 2. 
Current Revenue 
(Uninvoiced)\r\n     
   prisma.job.findMan
y({\r\n            
where: {\r\n         
       status: 
'COMPLETED',\r\n     
           
updatedAt: { gte: 
currentMonthStart 
},\r\n               
 invoiceItems: { 
none: {} }\r\n       
     },\r\n          
  select: { 
builderId: true, 
subdivisionId: true 
}\r\n        }),\r\n 
       // 3. Last 
Month Revenue 
(Invoices)\r\n       
 prisma.invoice.aggre
gate({\r\n           
 where: {\r\n        
        status: { 
in: ['PAID', 'SENT'] 
},\r\n               
 createdAt: { gte: 
lastMonthStart, lte: 
lastMonthEnd },\r\n  
              
deletedAt: null // 
Soft Delete 
Filter\r\n           
 },\r\n            
_sum: { totalAmount: 
true }\r\n        
}),\r\n        // 4. 
Last Month Revenue 
(Uninvoiced)\r\n     
   prisma.job.findMan
y({\r\n            
where: {\r\n         
       status: { in: 
['COMPLETED', 
'REVIEWED'] },\r\n   
             
updatedAt: { gte: 
lastMonthStart, lte: 
lastMonthEnd },\r\n  
              
invoiceItems: { 
none: {} }\r\n       
     },\r\n          
  select: { 
builderId: true, 
subdivisionId: true 
}\r\n        }),\r\n 
       // 5. Job 
Status 
Distribution\r\n     
   prisma.job.groupBy
({\r\n            
by: ['status'],\r\n  
          _count: { 
status: true }\r\n   
     }),\r\n        
// 6. Top 
Inspectors\r\n       
 prisma.user.findMany
({\r\n            
where: { role: 
'INSPECTOR' },\r\n   
         take: 
5,\r\n            
include: {\r\n       
         _count: 
{\r\n                
    select: { jobs: 
{ where: { status: 
'COMPLETED' } } 
}\r\n                
}\r\n            
},\r\n            
orderBy: {\r\n       
         jobs: { 
_count: 'desc' }\r\n 
           }\r\n     
   }),\r\n        // 
7. Daily Trend\r\n   
     prisma.job.findM
any({\r\n            
where: { createdAt: 
{ gte: thirtyDaysAgo 
} },\r\n            
select: { createdAt: 
true }\r\n        
})\r\n    ])\r\n\r\n 
   const duration = 
performance.now() - 
startTime\r\n    if 
(duration > 1000) 
{\r\n        console.
warn(`[Performance] 
getAnalyticsData 
took ${duration.toFix
ed(2)}ms`)\r\n    } 
else {\r\n        con
sole.log(`[Performanc
e] getAnalyticsData 
took ${duration.toFix
ed(2)}ms`)\r\n    
}\r\n\r\n    // 
Process Revenue 
Calculations 
(Sequential due to 
pricing 
logic)\r\n\r\n    
let revenueFromUninvo
iced = 0\r\n    for 
(const job of uninvoi
cedJobsCurrent) 
{\r\n        // 
@ts-ignore - TS 
struggles with 
optional second arg 
here\r\n        
const price = await g
etJobPrice(job.builde
rId, job.subdivisionI
d)\r\n        revenue
FromUninvoiced += 
price\r\n    
}\r\n\r\n    let reve
nueFromUninvoicedLast
 = 0\r\n    for 
(const job of 
uninvoicedJobsLast) 
{\r\n        // 
@ts-ignore - TS 
struggles with 
optional second arg 
here\r\n        
const price = await g
etJobPrice(job.builde
rId, job.subdivisionI
d)\r\n        revenue
FromUninvoicedLast 
+= price\r\n    
}\r\n\r\n    const 
revenueCurrent = (inv
oicesCurrent._sum.tot
alAmount || 0) + reve
nueFromUninvoiced\r\n
    const 
revenueLast = (invoic
esLast._sum.totalAmou
nt || 0) + revenueFro
mUninvoicedLast\r\n  
  const 
revenueGrowth = 
revenueLast === 0 ? 
100 : 
((revenueCurrent - 
revenueLast) / 
revenueLast) * 
100\r\n\r\n    // 
Forecasting\r\n    
// We use last month 
and current month 
(projected to end of 
month) to predict 
next month\r\n    // 
Simple 2-point trend 
for now, but 
scalable to more 
history\r\n    const 
projectedNextMonth = 
predictNextMonth([rev
enueLast, revenueCurr
ent])\r\n\r\n    // 
Transform Daily 
Trend\r\n    const 
dailyTrend = 
eachDayOfInterval({ 
start: 
thirtyDaysAgo, end: 
now }).map(day => 
{\r\n        const 
dateStr = 
format(day, 
'yyyy-MM-dd')\r\n    
    const count = rec
entJobs.filter(job 
=> format(job.created
At, 'yyyy-MM-dd') 
=== 
dateStr).length\r\n  
      return { date: 
format(day, 'MMM 
dd'), count }\r\n    
})\r\n\r\n    return 
{\r\n        
revenue: {\r\n       
     current: 
revenueCurrent,\r\n  
          last: 
revenueLast,\r\n     
       growth: 
revenueGrowth,\r\n   
         projected: p
rojectedNextMonth\r\n
        },\r\n       
 jobDistribution: 
jobCounts.map(j => 
({ name: j.status, 
value: 
j._count.status 
})),\r\n        
topInspectors: 
topInspectors.map(i 
=> ({ name: i.name 
|| 'Unknown', 
completed: 
i._count.jobs 
})),\r\n        
dailyTrend\r\n    
}\r\n}\r\n\r\nexport 
async function getPre
dictiveInsights() 
{\r\n    const 
session = await 
auth()\r\n    if 
(!session) throw new 
Error(\"Unauthorized\
")\r\n\r\n    // 
Parallelize Insights 
Queries\r\n    const 
yesterday = new 
Date(Date.now() - 24 
* 60 * 60 * 
1000)\r\n    const 
nextWeek = new 
Date(Date.now() + 7 
* 24 * 60 * 60 * 
1000)\r\n\r\n    
const [atRiskJobs, 
calibrationWarning] 
= await 
Promise.all([\r\n    
    prisma.job.findMa
ny({\r\n            
where: {\r\n         
       status: 
'PENDING',\r\n       
         createdAt: 
{ lte: yesterday 
}\r\n            
},\r\n            
take: 5,\r\n         
   select: { id: 
true, address: true, 
createdAt: true 
}\r\n        }),\r\n 
       prisma.equipme
nt.findMany({\r\n    
        where: {\r\n 
               
nextCalibration: { 
lte: nextWeek }\r\n  
          },\r\n     
       take: 5,\r\n  
          select: { 
id: true, name: 
true, 
nextCalibration: 
true }\r\n        
})\r\n    ])\r\n\r\n 
   return {\r\n      
  atRiskJobs: 
atRiskJobs.map(j => 
({\r\n            
id: j.id,\r\n        
    type: 
'RISK',\r\n          
  message: `Job at 
${j.address} pending 
for > 24h`,\r\n      
      severity: 
'HIGH'\r\n        
})),\r\n        
calibrationWarnings: 
calibrationWarning.ma
p(e => ({\r\n        
    id: e.id,\r\n    
        type: 
'MAINTENANCE',\r\n   
         message: 
`${e.name} requires 
calibration 
soon`,\r\n           
 severity: 
'MEDIUM'\r\n        
}))\r\n    }\r\n}\r\n
","usedDeprecatedRule
s":[]},{"filePath":"C
:\\Users\\shaun\\Anti
grabity Workspace\\au
ditforecaster\\src\\a
pp\\actions\\equipmen
t.ts","messages":[{"r
uleId":"@typescript-e
slint/no-explicit-any
","severity":2,"messa
ge":"Unexpected any. 
Specify a different t
ype.","line":135,"col
umn":45,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":135,"endColu
mn":48,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[4916,4919],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
4916,4919],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":1,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"'use server'\r\n\r
\nimport { prisma } 
from \"@/lib/prisma\"
\r\nimport { Prisma 
} from \"@prisma/clie
nt\"\r\nimport { Equi
pmentClientSchema, 
EquipmentClientInput 
} from \"@/lib/schema
s\"\r\nimport { 
revalidatePath } 
from \"next/cache\"\r
\nimport { z } from 
\"zod\"\r\nimport { 
addYears } from \"dat
e-fns\"\r\nimport { 
auth } from 
\"@/auth\"\r\nimport 
{ logger } from \"@/l
ib/logger\"\r\n\r\nex
port async function c
reateEquipment(data: 
EquipmentClientInput)
 {\r\n    try {\r\n  
      const session 
= await auth()\r\n   
     if 
(session?.user?.role 
!== \"ADMIN\") {\r\n 
           return { 
success: false, 
message: 
\"Unauthorized: 
Admin access 
required\" }\r\n     
   }\r\n\r\n        
const validated = Equ
ipmentClientSchema.pa
rse(data)\r\n\r\n    
    // Auto-calc 
next calibration if 
not provided\r\n     
   let nextCal = vali
dated.nextCalibration
\r\n        if 
(!nextCal && validate
d.lastCalibration) 
{\r\n            
nextCal = addYears(va
lidated.lastCalibrati
on, 1)\r\n        
}\r\n\r\n        
await prisma.equipmen
t.create({\r\n       
     data: {\r\n     
           
...validated,\r\n    
            
nextCalibration: 
nextCal\r\n          
  },\r\n        
})\r\n\r\n        rev
alidatePath(\"/dashbo
ard/assets/equipment\
")\r\n        return 
{ success: true, 
message: \"Equipment 
added to inventory\" 
}\r\n    } catch 
(error) {\r\n        
if (error instanceof 
z.ZodError) {\r\n    
        return { 
success: false, 
message: \"Invalid 
data\", errors: 
error.errors }\r\n   
     }\r\n        if 
(error instanceof Pri
sma.PrismaClientKnown
RequestError && 
error.code === 
'P2002') {\r\n       
     return { 
success: false, 
message: \"Serial 
Number already 
exists\" }\r\n       
 }\r\n        logger.
error(\"Failed to 
create equipment\", 
{ error })\r\n       
 return { success: 
false, message: 
\"Failed to create 
equipment\" }\r\n    
}\r\n}\r\n\r\nexport 
async function 
updateEquipment(id: 
string, data: Equipme
ntClientInput) {\r\n 
   try {\r\n        
const session = 
await auth()\r\n     
   if 
(session?.user?.role 
!== \"ADMIN\") {\r\n 
           return { 
success: false, 
message: 
\"Unauthorized: 
Admin access 
required\" }\r\n     
   }\r\n\r\n        
const validated = Equ
ipmentClientSchema.pa
rse(data)\r\n\r\n    
    await prisma.equi
pment.update({\r\n   
         where: { id 
},\r\n            
data: validated,\r\n 
       })\r\n\r\n    
    revalidatePath(\"
/dashboard/assets/equ
ipment\")\r\n        
return { success: 
true, message: 
\"Equipment updated 
successfully\" }\r\n 
   } catch (error) 
{\r\n        if 
(error instanceof 
z.ZodError) {\r\n    
        return { 
success: false, 
message: \"Invalid 
data\", errors: 
error.errors }\r\n   
     }\r\n        log
ger.error(\"Failed 
to update 
equipment\", { error 
})\r\n        return 
{ success: false, 
message: \"Failed to 
update equipment\" 
}\r\n    
}\r\n}\r\n\r\nexport 
async function assign
Equipment(equipmentId
: string, userId: 
string) {\r\n    try 
{\r\n        const 
session = await 
auth()\r\n        if 
(session?.user?.role 
!== \"ADMIN\") {\r\n 
           return { 
success: false, 
message: 
\"Unauthorized: 
Admin access 
required\" }\r\n     
   }\r\n\r\n        
// Deep Layer Check: 
Verify Calibration 
Status\r\n        
const equipment = 
await prisma.equipmen
t.findUnique({\r\n   
         where: { 
id: equipmentId 
}\r\n        
})\r\n\r\n        if 
(!equipment) {\r\n   
         return { 
success: false, 
message: \"Equipment 
not found\" }\r\n    
    }\r\n\r\n        
if (equipment.status 
=== 
'CALIBRATION_DUE' || 
equipment.status === 
'REPAIR' || 
equipment.status === 
'RETIRED') {\r\n     
       return { 
success: false, 
message: `Cannot 
assign: Equipment is 
${equipment.status}` 
}\r\n        
}\r\n\r\n        if (
equipment.nextCalibra
tion && equipment.nex
tCalibration < new 
Date()) {\r\n        
    return { 
success: false, 
message: 
\"Compliance Alert: 
Calibration is 
overdue\" }\r\n      
  }\r\n\r\n        
// Transaction: 
Update Equipment AND 
Create Assignment 
Log\r\n        await 
prisma.$transaction([
\r\n            prism
a.equipment.update({\
r\n                
where: { id: 
equipmentId },\r\n   
             data: { 
assignedTo: userId 
}\r\n            
}),\r\n            pr
isma.equipmentAssignm
ent.create({\r\n     
           data: 
{\r\n                
    equipmentId,\r\n 
                   
userId,\r\n          
          
assignedAt: new 
Date()\r\n           
     }\r\n           
 })\r\n        
])\r\n\r\n        rev
alidatePath(\"/dashbo
ard/assets/equipment\
")\r\n        return 
{ success: true, 
message: \"Equipment 
checked out 
successfully\" }\r\n 
   } catch (error) 
{\r\n        logger.e
rror(\"Failed to 
assign equipment\", 
{ error })\r\n       
 return { success: 
false, message: 
\"Failed to assign 
equipment\" }\r\n    
}\r\n}\r\n\r\nexport 
async function return
Equipment(equipmentId
: string) {\r\n    
try {\r\n        
const session = 
await auth()\r\n     
   if 
(session?.user?.role 
!== \"ADMIN\") {\r\n 
           return { 
success: false, 
message: 
\"Unauthorized: 
Admin access 
required\" }\r\n     
   }\r\n\r\n        
// Find the active 
assignment\r\n       
 const 
activeAssignment = 
await prisma.equipmen
tAssignment.findFirst
({\r\n            
where: {\r\n         
       
equipmentId,\r\n     
           
returnedAt: null\r\n 
           }\r\n     
   })\r\n\r\n        
const queries: Prisma
.PrismaPromise<any>[]
 = [\r\n            p
risma.equipment.updat
e({\r\n              
  where: { id: 
equipmentId },\r\n   
             data: { 
assignedTo: null 
}\r\n            
})\r\n        
]\r\n\r\n        if 
(activeAssignment) 
{\r\n            
queries.push(\r\n    
            prisma.eq
uipmentAssignment.upd
ate({\r\n            
        where: { id: 
activeAssignment.id 
},\r\n               
     data: { 
returnedAt: new 
Date() }\r\n         
       })\r\n        
    )\r\n        
}\r\n\r\n        
await prisma.$transac
tion(queries)\r\n\r\n
        revalidatePat
h(\"/dashboard/assets
/equipment\")\r\n    
    return { 
success: true, 
message: \"Equipment 
returned to 
inventory\" }\r\n    
} catch (error) 
{\r\n        logger.e
rror(\"Failed to 
return equipment\", 
{ error })\r\n       
 return { success: 
false, message: 
\"Failed to return 
equipment\" }\r\n    
}\r\n}\r\n\r\nexport 
async function 
deleteEquipment(id: 
string) {\r\n    try 
{\r\n        const 
session = await 
auth()\r\n        if 
(session?.user?.role 
!== \"ADMIN\") {\r\n 
           return { 
success: false, 
message: 
\"Unauthorized: 
Admin access 
required\" }\r\n     
   }\r\n\r\n        
await prisma.equipmen
t.delete({\r\n       
     where: { id 
}\r\n        
})\r\n\r\n        rev
alidatePath(\"/dashbo
ard/assets/equipment\
")\r\n        return 
{ success: true, 
message: \"Equipment 
deleted 
successfully\" }\r\n 
   } catch (error) 
{\r\n        logger.e
rror(\"Failed to 
delete equipment\", 
{ error })\r\n       
 return { success: 
false, message: 
\"Failed to delete 
equipment\" }\r\n    
}\r\n}\r\n","usedDepr
ecatedRules":[]},{"fi
lePath":"C:\\Users\\s
haun\\Antigrabity Wor
kspace\\auditforecast
er\\src\\app\\actions
\\jobs.ts","messages"
:[{"ruleId":"@typescr
ipt-eslint/no-explici
t-any","severity":2,"
message":"Unexpected 
any. Specify a 
different type.","lin
e":24,"column":26,"no
deType":"TSAnyKeyword
","messageId":"unexpe
ctedAny","endLine":24
,"endColumn":29,"sugg
estions":[{"messageId
":"suggestUnknown","f
ix":{"range":[860,863
],"text":"unknown"},"
desc":"Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
860,863],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":102,"col
umn":26,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":102,"endColu
mn":29,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[3491,3494],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3491,3494],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[{"
ruleId":"@typescript-
eslint/no-explicit-an
y","severity":2,"mess
age":"Unexpected 
any. Specify a 
different type.","lin
e":110,"column":32,"n
odeType":"TSAnyKeywor
d","messageId":"unexp
ectedAny","endLine":1
10,"endColumn":35,"su
ggestions":[{"message
Id":"suggestUnknown",
"fix":{"range":[3887,
3890],"text":"unknown
"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3887,3890],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}],"supp
ressions":[{"kind":"d
irective","justificat
ion":""}]}],"errorCou
nt":2,"fatalErrorCoun
t":0,"warningCount":0
,"fixableErrorCount":
0,"fixableWarningCoun
t":0,"source":"'use s
erver'\r\n\r\nimport 
{ prisma } from \"@/l
ib/prisma\"\r\nimport
 { revalidatePath } 
from 'next/cache'\r\n
import { redirect } 
from 'next/navigation
'\r\nimport { z } 
from 
\"zod\"\r\nimport { 
auth } from 
\"@/auth\"\r\nimport 
{ getCoordinates } 
from \"@/lib/geocodin
g\"\r\nimport { 
logAudit } from \"@/l
ib/audit\"\r\nimport 
{ logger } from \"@/l
ib/logger\"\r\n\r\nco
nst JobSchema = 
z.object({\r\n    
builderId: 
z.string().min(1, 
\"Builder is 
required\"),\r\n    
lotNumber: 
z.string().min(1, 
\"Lot Number is 
required\"),\r\n    
streetAddress: 
z.string().min(1, 
\"Street Address is 
required\"),\r\n    
city: 
z.string().min(1, 
\"City is 
required\"),\r\n    
scheduledDate: z.stri
ng().optional(),\r\n 
   inspectorId: z.str
ing().optional(),\r\n
})\r\n\r\nexport 
async function 
createJob(formData: 
FormData) {\r\n    
const session = 
await auth()\r\n    
if (!session?.user) 
throw new Error(\"Una
uthorized\")\r\n    
if ((session.user as 
any).role !== 
'ADMIN') throw new Er
ror(\"Unauthorized: 
Admin access 
required\")\r\n\r\n  
  const 
validatedFields = Job
Schema.parse({\r\n   
     builderId: formD
ata.get('builderId'),
\r\n        
lotNumber: formData.g
et('lotNumber'),\r\n 
       
streetAddress: formDa
ta.get('streetAddress
'),\r\n        city: 
formData.get('city'),
\r\n        
scheduledDate: formDa
ta.get('scheduledDate
') || undefined,\r\n 
       inspectorId: f
ormData.get('inspecto
rId') || 
undefined,\r\n    
})\r\n\r\n    const 
fullAddress = `${vali
datedFields.streetAdd
ress}, ${validatedFie
lds.city}`\r\n    
const coords = await 
getCoordinates(fullAd
dress)\r\n\r\n    
try {\r\n        
const job = await pri
sma.job.create({\r\n 
           data: 
{\r\n                
builderId: validatedF
ields.builderId,\r\n 
               
lotNumber: validatedF
ields.lotNumber,\r\n 
               
streetAddress: valida
tedFields.streetAddre
ss,\r\n              
  address: 
fullAddress,\r\n     
           city: vali
datedFields.city,\r\n
                
scheduledDate: valida
tedFields.scheduledDa
te ? new Date(validat
edFields.scheduledDat
e) : new Date(),\r\n 
               
status: validatedFiel
ds.inspectorId ? 
'ASSIGNED' : 
'PENDING',\r\n       
         
inspectorId: validate
dFields.inspectorId 
|| null,\r\n         
       latitude: 
coords?.lat || 
null,\r\n            
    longitude: 
coords?.lng || 
null,\r\n            
}\r\n        
})\r\n\r\n        
await logAudit({\r\n 
           
entityType: 
'JOB',\r\n           
 entityId: 
job.id,\r\n          
  action: 
'CREATE',\r\n        
    changes: 
validatedFields\r\n  
      })\r\n\r\n     
   revalidatePath('/d
ashboard/jobs')\r\n  
      return { 
success: true, 
message: 'Job 
created 
successfully' }\r\n  
  } catch (error) 
{\r\n        
logger.error('Failed 
to create job', { 
error })\r\n        
return { success: 
false, message: 
'Failed to create 
job' }\r\n    
}\r\n}\r\n\r\nexport 
async function 
updateJobStatus(id: 
string, status: 
string) {\r\n    
const session = 
await auth()\r\n    
if (!session) throw 
new Error(\"Unauthori
zed\")\r\n\r\n    
const oldJob = await 
prisma.job.findUnique
({\r\n        where: 
{ id },\r\n        
select: { status: 
true }\r\n    
})\r\n\r\n    if 
(!oldJob) throw new 
Error(\"Job not 
found\")\r\n\r\n    
await prisma.job.upda
te({\r\n        
where: { id },\r\n   
     data: { status 
}\r\n    })\r\n\r\n  
  await 
logAudit({\r\n       
 entityType: 
'JOB',\r\n        
entityId: id,\r\n    
    action: 
'UPDATE',\r\n        
changes: {\r\n       
     field: 
'status',\r\n        
    from: 
oldJob.status,\r\n   
         to: 
status\r\n        
}\r\n    })\r\n\r\n  
  revalidatePath('/da
shboard/jobs')\r\n}\r
\n\r\nexport async 
function 
updateJob(formData: 
FormData) {\r\n    
const session = 
await auth()\r\n    
if (!session?.user) 
throw new Error(\"Una
uthorized\")\r\n    
if ((session.user as 
any).role !== 
'ADMIN') throw new Er
ror(\"Unauthorized: 
Admin access 
required\")\r\n\r\n  
  const id = 
formData.get('id') 
as string\r\n    
const status = formDa
ta.get('status') as 
string\r\n    const 
streetAddress = formD
ata.get('streetAddres
s') as string\r\n    
const city = 
formData.get('city') 
as string\r\n\r\n    
// eslint-disable-nex
t-line @typescript-es
lint/no-explicit-any\
r\n    const data: 
Record<string, any> 
= {}\r\n    if 
(status) data.status 
= status\r\n    if 
(streetAddress) 
data.streetAddress = 
streetAddress\r\n    
if (city) data.city 
= city\r\n\r\n    if 
(streetAddress && 
city) {\r\n        
data.address = 
`${streetAddress}, 
${city}`\r\n    
}\r\n\r\n    const 
oldJob = await prisma
.job.findUnique({ 
where: { id } 
})\r\n\r\n    await p
risma.job.update({\r\
n        where: { id 
},\r\n        
data\r\n    
})\r\n\r\n    await 
logAudit({\r\n       
 entityType: 
'JOB',\r\n        
entityId: id,\r\n    
    action: 
'UPDATE',\r\n        
changes: {\r\n       
     from: 
oldJob,\r\n          
  to: data\r\n       
 }\r\n    })\r\n\r\n 
   revalidatePath('/d
ashboard/jobs')\r\n  
  redirect('/dashboar
d/jobs')\r\n}\r\n\r\n
export async 
function getTemplates
ForSelection() {\r\n 
   const session = 
await auth()\r\n    
if (!session) throw 
new Error(\"Unauthori
zed\")\r\n\r\n    
const templates = 
await prisma.reportTe
mplate.findMany({\r\n
        select: 
{\r\n            id: 
true,\r\n            
name: true,\r\n      
      description: 
true\r\n        
},\r\n        
orderBy: {\r\n       
     createdAt: 
'desc'\r\n        
}\r\n    })\r\n\r\n  
  return templates\r\
n}\r\n","usedDeprecat
edRules":[]},{"filePa
th":"C:\\Users\\shaun
\\Antigrabity Workspa
ce\\auditforecaster\\
src\\app\\actions\\lo
gistics.ts","messages
":[{"ruleId":"@typesc
ript-eslint/no-unused
-vars","severity":1,"
message":"'route' is 
assigned a value but 
never used.","line":1
02,"column":11,"nodeT
ype":null,"messageId"
:"unusedVar","endLine
":102,"endColumn":16}
],"suppressedMessages
":[],"errorCount":0,"
fatalErrorCount":0,"w
arningCount":1,"fixab
leErrorCount":0,"fixa
bleWarningCount":0,"s
ource":"'use server'\
r\n\r\nimport { auth 
} from 
'@/auth'\r\nimport { 
prisma } from '@/lib/
prisma'\r\n\r\nexport
 async function 
getTodaysRoute() 
{\r\n    const 
session = await 
auth()\r\n    if 
(!session?.user?.id) 
throw new Error('Unau
thorized')\r\n\r\n   
 const today = new 
Date()\r\n    
today.setHours(0, 0, 
0, 0)\r\n\r\n    
const tomorrow = new 
Date(today)\r\n    to
morrow.setDate(tomorr
ow.getDate() + 
1)\r\n\r\n    // 1. 
Check if a Route 
already exists for 
today\r\n    const 
existingRoute = 
await prisma.route.fi
ndFirst({\r\n        
where: {\r\n         
   driverId: 
session.user.id,\r\n 
           date: 
{\r\n                
gte: today,\r\n      
          lt: 
tomorrow\r\n         
   }\r\n        
},\r\n        
include: {\r\n       
     stops: {\r\n    
            include: 
{\r\n                
    job: {\r\n       
                 
include: { 
subdivision: true 
}\r\n                
    }\r\n            
    },\r\n           
     orderBy: { 
order: 'asc' }\r\n   
         }\r\n       
 }\r\n    })\r\n\r\n 
   if (existingRoute 
&& existingRoute.stop
s.length > 0) {\r\n  
      // Return jobs 
in the saved 
order\r\n        
return existingRoute.
stops.map(stop => sto
p.job).filter(Boolean
)\r\n    }\r\n\r\n   
 // 2. Fetch 
unrouted jobs for 
today\r\n    const 
jobs = await prisma.j
ob.findMany({\r\n    
    where: {\r\n     
       inspectorId: 
session.user.id, // 
Filter by assigned 
inspector\r\n        
    scheduledDate: 
{\r\n                
gte: today,\r\n      
          lt: 
tomorrow\r\n         
   },\r\n            
status: {\r\n        
        not: 
'COMPLETED'\r\n      
      }\r\n        
},\r\n        
include: {\r\n       
     subdivision: 
{\r\n                
select: { name: true 
}\r\n            
}\r\n        }\r\n   
 })\r\n\r\n    if 
(jobs.length === 0) 
return []\r\n\r\n    
// 3. Optimize Route 
(Nearest 
Neighbor)\r\n    // 
Start at \"Office\" 
(Placeholder coords: 
Austin, TX)\r\n    
let currentLocation 
= { lat: 30.2672, 
lng: -97.7431 }\r\n  
  const unvisited = 
[...jobs]\r\n    
const 
optimizedOrder: 
typeof jobs = 
[]\r\n\r\n    while 
(unvisited.length > 
0) {\r\n        let 
nearestIndex = 
-1\r\n        let 
minDist = 
Infinity\r\n\r\n     
   for (let i = 0; i 
< unvisited.length; 
i++) {\r\n           
 const job = 
unvisited[i]\r\n     
       // Use job 
coords or default if 
missing (mock 
geocoding)\r\n       
     const jobLat = 
job.latitude || 
30.2672 + 
(Math.random() * 
0.1) // Mock 
spread\r\n           
 const jobLng = 
job.longitude || 
-97.7431 + 
(Math.random() * 
0.1)\r\n\r\n         
   const dist = getDi
stance(currentLocatio
n.lat, 
currentLocation.lng, 
jobLat, jobLng)\r\n  
          if (dist < 
minDist) {\r\n       
         minDist = 
dist\r\n             
   nearestIndex = 
i\r\n            
}\r\n        
}\r\n\r\n        if 
(nearestIndex !== 
-1) {\r\n            
const nextJob = unvis
ited[nearestIndex]\r\
n            optimize
dOrder.push(nextJob)\
r\n            // 
Update current 
location to this 
job\r\n            
currentLocation = 
{\r\n                
lat: 
nextJob.latitude || 
30.2672,\r\n         
       lng: 
nextJob.longitude || 
-97.7431\r\n         
   }\r\n            u
nvisited.splice(neare
stIndex, 1)\r\n      
  } else {\r\n       
     // Fallback 
(shouldn't 
happen)\r\n          
  optimizedOrder.push
(unvisited.shift()!)\
r\n        }\r\n    
}\r\n\r\n    // 4. 
Save Route to DB\r\n 
   const route = 
await prisma.route.cr
eate({\r\n        
data: {\r\n          
  date: today,\r\n   
         driverId: 
session.user.id,\r\n 
           status: 
'PENDING',\r\n       
     stops: {\r\n    
            create: o
ptimizedOrder.map((jo
b, index) => ({\r\n  
                  
order: index + 
1,\r\n               
     jobId: 
job.id,\r\n          
          status: 
'PENDING'\r\n        
        }))\r\n      
      }\r\n        
}\r\n    })\r\n\r\n  
  return optimizedOrd
er\r\n}\r\n\r\n// 
Haversine Distance 
Helper 
(km)\r\nfunction 
getDistance(lat1: 
number, lon1: 
number, lat2: 
number, lon2: 
number) {\r\n    
const R = 6371 // 
Radius of the earth 
in km\r\n    const 
dLat = deg2rad(lat2 
- lat1)\r\n    const 
dLon = deg2rad(lon2 
- lon1)\r\n    const 
a =\r\n        
Math.sin(dLat / 2) * 
Math.sin(dLat / 2) 
+\r\n        Math.cos
(deg2rad(lat1)) * Mat
h.cos(deg2rad(lat2)) 
*\r\n        
Math.sin(dLon / 2) * 
Math.sin(dLon / 
2)\r\n    const c = 
2 * Math.atan2(Math.s
qrt(a), Math.sqrt(1 
- a))\r\n    const d 
= R * c // Distance 
in km\r\n    return d
\r\n}\r\n\r\nfunction
 deg2rad(deg: 
number) {\r\n    
return deg * 
(Math.PI / 180)\r\n}\
r\n\r\nexport async 
function 
logTrip(data: {\r\n  
  vehicleId: 
string\r\n    date: 
Date\r\n    
distance: number\r\n 
   startLocation: 
string\r\n    
endLocation: 
string\r\n    
purpose: 
string\r\n}) {\r\n   
 const session = 
await auth()\r\n    
if 
(!session?.user?.id) 
throw new Error('Unau
thorized')\r\n\r\n   
 await prisma.mileage
Log.create({\r\n     
   data: {\r\n       
     vehicleId: 
data.vehicleId,\r\n  
          date: 
data.date,\r\n       
     distance: 
data.distance,\r\n   
         
startLocation: data.s
tartLocation,\r\n    
        endLocation: 
data.endLocation,\r\n
            purpose: 
data.purpose,\r\n    
        status: 
'PENDING'\r\n        
}\r\n    })\r\n\r\n  
  return { success: 
true }\r\n}\r\n","use
dDeprecatedRules":[]}
,{"filePath":"C:\\Use
rs\\shaun\\Antigrabit
y Workspace\\auditfor
ecaster\\src\\app\\ac
tions\\task-claiming.
ts","messages":[{"rul
eId":"@typescript-esl
int/no-explicit-any",
"severity":2,"message
":"Unexpected any. 
Specify a different t
ype.","line":11,"colu
mn":35,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":11,"endColumn
":38,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[438,441],"text":"u
nknown"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
438,441],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":23,"colu
mn":35,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":23,"endColumn
":38,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[867,870],"text":"u
nknown"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
867,870],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":2,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"'use server'\r\n\r
\nimport { claimTask 
as claimTaskLib, 
releaseTask as 
releaseTaskLib } 
from \"@/lib/task-cla
iming\"\r\nimport 
type { 
ClaimTaskResult } 
from \"@/lib/task-cla
iming\"\r\nimport { 
auth } from \"@/auth\
"\r\n\r\nexport 
async function claimT
askAction(taskId: 
string): Promise<Clai
mTaskResult> {\r\n   
 const session = 
await auth()\r\n    
if 
(!session?.user?.id) 
return { success: 
false, message: 
\"Unauthorized\" 
}\r\n\r\n    const 
role = (session.user 
as any).role\r\n    
if (role !== 'ADMIN' 
&& role !== 
'INSPECTOR') {\r\n   
     return { 
success: false, 
message: 
\"Unauthorized: 
Insufficient 
permissions\" }\r\n  
  }\r\n\r\n    
return await 
claimTaskLib(taskId, 
session.user.id)\r\n}
\r\n\r\nexport async 
function releaseTaskA
ction(taskId: 
string) {\r\n    
const session = 
await auth()\r\n    
if 
(!session?.user?.id) 
return { success: 
false, message: 
\"Unauthorized\" 
}\r\n\r\n    const 
role = (session.user 
as any).role\r\n    
if (role !== 'ADMIN' 
&& role !== 
'INSPECTOR') {\r\n   
     return { 
success: false, 
message: 
\"Unauthorized: 
Insufficient 
permissions\" }\r\n  
  }\r\n\r\n    await 
releaseTaskLib(taskId
, 
session.user.id)\r\n 
   return { success: 
true }\r\n}\r\n","use
dDeprecatedRules":[]}
,{"filePath":"C:\\Use
rs\\shaun\\Antigrabit
y Workspace\\auditfor
ecaster\\src\\app\\ap
i\\builder\\plans\\up
load\\__tests__\\rout
e.test.ts","messages"
:[{"ruleId":"@typescr
ipt-eslint/no-unused-
vars","severity":1,"m
essage":"'NextRespons
e' is defined but 
never used.","line":6
,"column":10,"nodeTyp
e":null,"messageId":"
unusedVar","endLine":
6,"endColumn":22},{"r
uleId":"@typescript-e
slint/no-explicit-any
","severity":2,"messa
ge":"Unexpected any. 
Specify a different t
ype.","line":32,"colu
mn":31,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":32,"endColumn
":34,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[703,706],"text":"u
nknown"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
703,706],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":32,"colu
mn":43,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":32,"endColumn
":46,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[715,718],"text":"u
nknown"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
715,718],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":35,"colu
mn":31,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":35,"endColumn
":34,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[819,822],"text":"u
nknown"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
819,822],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":35,"colu
mn":43,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":35,"endColumn
":46,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[831,834],"text":"u
nknown"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
831,834],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":61,"colu
mn":68,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":61,"endColumn
":71,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1533,1536],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1533,1536],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":73,"colu
mn":68,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":73,"endColumn
":71,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1937,1940],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1937,1940],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":74,"colu
mn":97,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":74,"endColumn
":100,"suggestions":[
{"messageId":"suggest
Unknown","fix":{"rang
e":[2039,2042],"text"
:"unknown"},"desc":"U
se `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2039,2042],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":7,"fatal
ErrorCount":0,"warnin
gCount":1,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { 
describe, it, 
expect, vi, 
beforeEach } from 
'vitest'\r\nimport { 
POST } from 
'../route'\r\nimport 
{ prisma } from '@/li
b/prisma'\r\nimport 
{ auth } from 
'@/auth'\r\nimport { 
writeFile } from 'fs/
promises'\r\nimport 
{ NextResponse } 
from 'next/server'\r\
n\r\n// Mock dependen
cies\r\nvi.mock('@/li
b/prisma', () => 
({\r\n    prisma: 
{\r\n        plan: 
{\r\n            
create: vi.fn(),\r\n 
       }\r\n    }\r\n
}))\r\n\r\nvi.mock('@
/auth', () => ({\r\n 
   auth: vi.fn(),\r\n
}))\r\n\r\nvi.mock('f
s/promises', () => 
({\r\n    writeFile: 
vi.fn(),\r\n    
default: {\r\n       
 writeFile: 
vi.fn(),\r\n    }\r\n
}))\r\n\r\nvi.mock('n
ext/server', () => 
{\r\n    return 
{\r\n        
NextResponse: class 
{\r\n            
status: number\r\n   
         
constructor(body: 
any, init?: any) 
{\r\n                
this.status = 
init?.status || 
200\r\n            
}\r\n            
static json(body: 
any, init?: any) 
{\r\n                
return {\r\n         
           json: 
async () => 
body,\r\n            
        status: 
init?.status || 
200,\r\n             
   }\r\n            
}\r\n        }\r\n   
 }\r\n})\r\n\r\ndescr
ibe('Plan Upload 
API', () => {\r\n    
beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n    
})\r\n\r\n    
it('should return 
401 if not 
authenticated', 
async () => {\r\n    
    vi.mocked(auth).m
ockResolvedValue(null
)\r\n        const 
req = {\r\n          
  formData: 
vi.fn(),\r\n        
} as unknown as 
Request\r\n\r\n      
  const res = await 
POST(req)\r\n        
expect(res.status).to
Be(401)\r\n    
})\r\n\r\n    
it('should return 
400 if missing 
fields', async () => 
{\r\n        vi.mocke
d(auth).mockResolvedV
alue({ user: { id: 
'1' } } as any)\r\n  
      const formData 
= new Map()\r\n      
  // Empty map\r\n   
     const req = 
{\r\n            
formData: vi.fn().moc
kResolvedValue(formDa
ta),\r\n        } as 
unknown as 
Request\r\n\r\n      
  const res = await 
POST(req)\r\n        
expect(res.status).to
Be(400)\r\n    
})\r\n\r\n    
it('should create 
plan and return 200 
on success', async 
() => {\r\n        vi
.mocked(auth).mockRes
olvedValue({ user: { 
id: '1' } } as 
any)\r\n        vi.mo
cked(prisma.plan.crea
te).mockResolvedValue
({ id: 'plan-1', 
title: 'Test Plan' } 
as any)\r\n        vi
.mocked(writeFile).mo
ckResolvedValue(undef
ined)\r\n\r\n        
const formData = new 
Map()\r\n        
const file = {\r\n   
         name: 
'test.pdf',\r\n      
      type: 'applicat
ion/pdf',\r\n        
    arrayBuffer: vi.f
n().mockResolvedValue
(new 
ArrayBuffer(8)),\r\n 
           size: 
1024\r\n        
}\r\n        
formData.set('file', 
file)\r\n        form
Data.set('builderId',
 'builder-1')\r\n    
    formData.set('tit
le', 'Test 
Plan')\r\n        for
mData.set('descriptio
n', 'Test Description
')\r\n\r\n        
const req = {\r\n    
        formData: vi.
fn().mockResolvedValu
e(formData),\r\n     
   } as unknown as 
Request\r\n\r\n      
  const res = await 
POST(req)\r\n        
expect(res.status).to
Be(200)\r\n        ex
pect(prisma.plan.crea
te).toHaveBeenCalledW
ith(expect.objectCont
aining({\r\n         
   data: expect.objec
tContaining({\r\n    
            title: 
'Test Plan',\r\n     
           
builderId: 
'builder-1',\r\n     
       }),\r\n       
 }))\r\n    })\r\n})\
r\n","usedDeprecatedR
ules":[]},{"filePath"
:"C:\\Users\\shaun\\A
ntigrabity Workspace\
\auditforecaster\\src
\\app\\forgot-passwor
d\\page.tsx","message
s":[{"ruleId":"react/
no-unescaped-entities
","severity":2,"messa
ge":"`'` can be 
escaped with 
`&apos;`, `&lsquo;`, 
`&#39;`, `&rsquo;`.",
"line":23,"column":56
,"nodeType":"JSXText"
,"messageId":"unescap
edEntityAlts","sugges
tions":[{"messageId":
"replaceWithAlt","dat
a":{"alt":"&apos;"},"
fix":{"range":[868,99
0],"text":"\r\n      
                  
Enter your email 
address and 
we&apos;ll send you 
a link to reset your 
password.\r\n        
            
"},"desc":"Replace 
with `&apos;`."},{"me
ssageId":"replaceWith
Alt","data":{"alt":"&
lsquo;"},"fix":{"rang
e":[868,990],"text":"
\r\n                 
       Enter your 
email address and 
we&lsquo;ll send you 
a link to reset your 
password.\r\n        
            
"},"desc":"Replace 
with `&lsquo;`."},{"m
essageId":"replaceWit
hAlt","data":{"alt":"
&#39;"},"fix":{"range
":[868,990],"text":"\
r\n                  
      Enter your 
email address and 
we&#39;ll send you a 
link to reset your 
password.\r\n        
            
"},"desc":"Replace 
with `&#39;`."},{"mes
sageId":"replaceWithA
lt","data":{"alt":"&r
squo;"},"fix":{"range
":[868,990],"text":"\
r\n                  
      Enter your 
email address and 
we&rsquo;ll send you 
a link to reset your 
password.\r\n        
            
"},"desc":"Replace 
with `&rsquo;`."}]}],
"suppressedMessages":
[],"errorCount":1,"fa
talErrorCount":0,"war
ningCount":0,"fixable
ErrorCount":0,"fixabl
eWarningCount":0,"sou
rce":"'use client'\r\
n\r\nimport { 
useActionState } 
from 
'react'\r\nimport { 
resetPassword } from 
'@/app/actions/auth'\
r\nimport { Button } 
from '@/components/ui
/button'\r\nimport { 
Input } from '@/compo
nents/ui/input'\r\nim
port { Label } from '
@/components/ui/label
'\r\nimport { Card, 
CardContent, 
CardHeader, 
CardTitle, 
CardDescription } 
from '@/components/ui
/card'\r\nimport 
Link from 'next/link'
\r\n\r\nexport 
default function 
ForgotPasswordPage() 
{\r\n    const 
[state, dispatch, 
isPending] = 
useActionState(\r\n  
      
resetPassword,\r\n   
     undefined\r\n   
 )\r\n\r\n    return 
(\r\n        <div 
className=\"flex 
min-h-screen 
items-center 
justify-center 
bg-gray-50 
p-4\">\r\n           
 <Card 
className=\"w-full 
max-w-md\">\r\n      
          
<CardHeader className
=\"space-y-1\">\r\n  
                  
<CardTitle 
className=\"text-2xl 
font-bold\">Reset Pas
sword</CardTitle>\r\n
                    <
CardDescription>\r\n 
                     
  Enter your email 
address and we'll 
send you a link to 
reset your 
password.\r\n        
            </CardDes
cription>\r\n        
        
</CardHeader>\r\n    
            
<CardContent>\r\n    
                
{state?.success ? 
(\r\n                
        <div classNam
e=\"space-y-4\">\r\n 
                     
      <div 
className=\"p-4 
bg-green-50 
text-green-700 
rounded-md 
text-sm\">\r\n       
                     
    
{state.message}\r\n  
                     
     </div>\r\n      
                     
 <Button asChild clas
sName=\"w-full\">\r\n
                     
           <Link href
=\"/login\">Return 
to Sign 
in</Link>\r\n        
                    
</Button>\r\n        
                
</div>\r\n           
         ) : (\r\n   
                     
<form 
action={dispatch} cla
ssName=\"space-y-4\">
\r\n                 
           <div class
Name=\"space-y-2\">\r
\n                   
             <Label h
tmlFor=\"email\">Emai
l</Label>\r\n        
                     
   <Input\r\n        
                     
       
id=\"email\"\r\n     
                     
          
type=\"email\"\r\n   
                     
            
name=\"email\"\r\n   
                     
            placehold
er=\"m@example.com\"\
r\n                  
                  
required\r\n         
                     
  />\r\n             
               
</div>\r\n           
                 
<div\r\n             
                   
className=\"flex h-8 
items-end 
space-x-1\"\r\n      
                     
     aria-live=\"poli
te\"\r\n             
                   ar
ia-atomic=\"true\"\r\
n                    
        >\r\n        
                     
   {state?.error && 
(\r\n                
                    
<p 
className=\"text-sm t
ext-red-500\">{state.
error}</p>\r\n       
                     
    )}\r\n           
                 
</div>\r\n           
                 
<Button 
className=\"w-full\" 
aria-disabled={isPend
ing} 
type=\"submit\">\r\n 
                     
          {isPending 
? 'Sending...' : 
'Send Reset 
Link'}\r\n           
                 
</Button>\r\n        
                    
<div className=\"text
-center 
text-sm\">\r\n       
                     
    <Link 
href=\"/login\" class
Name=\"text-blue-600 
hover:underline\">\r\
n                    
                Back 
to Sign in\r\n       
                     
    </Link>\r\n      
                     
 </div>\r\n          
              
</form>\r\n          
          )}\r\n     
           
</CardContent>\r\n   
         </Card>\r\n 
       </div>\r\n    
)\r\n}\r\n","usedDepr
ecatedRules":[]},{"fi
lePath":"C:\\Users\\s
haun\\Antigrabity Wor
kspace\\auditforecast
er\\src\\app\\page.ts
x","messages":[{"rule
Id":"react/no-unescap
ed-entities","severit
y":2,"message":"`'` 
can be escaped with 
`&apos;`, `&lsquo;`, 
`&#39;`, `&rsquo;`.",
"line":42,"column":66
,"nodeType":"JSXText"
,"messageId":"unescap
edEntityAlts","sugges
tions":[{"messageId":
"replaceWithAlt","dat
a":{"alt":"&apos;"},"
fix":{"range":[2041,2
236],"text":"\n      
          Streamline 
your operations with 
the most advanced 
platform for energy 
raters.\n            
    From fleet 
management to 
predictive 
analytics, 
we&apos;ve got you 
covered.\n           
   
"},"desc":"Replace 
with `&apos;`."},{"me
ssageId":"replaceWith
Alt","data":{"alt":"&
lsquo;"},"fix":{"rang
e":[2041,2236],"text"
:"\n                
Streamline your 
operations with the 
most advanced 
platform for energy 
raters.\n            
    From fleet 
management to 
predictive 
analytics, 
we&lsquo;ve got you 
covered.\n           
   
"},"desc":"Replace 
with `&lsquo;`."},{"m
essageId":"replaceWit
hAlt","data":{"alt":"
&#39;"},"fix":{"range
":[2041,2236],"text":
"\n                
Streamline your 
operations with the 
most advanced 
platform for energy 
raters.\n            
    From fleet 
management to 
predictive 
analytics, we&#39;ve 
got you covered.\n   
           
"},"desc":"Replace 
with `&#39;`."},{"mes
sageId":"replaceWithA
lt","data":{"alt":"&r
squo;"},"fix":{"range
":[2041,2236],"text":
"\n                
Streamline your 
operations with the 
most advanced 
platform for energy 
raters.\n            
    From fleet 
management to 
predictive 
analytics, 
we&rsquo;ve got you 
covered.\n           
   
"},"desc":"Replace 
with `&rsquo;`."}]}],
"suppressedMessages":
[],"errorCount":1,"fa
talErrorCount":0,"war
ningCount":0,"fixable
ErrorCount":0,"fixabl
eWarningCount":0,"sou
rce":"import { 
Metadata } from 
\"next\"\nimport 
Link from \"next/link
\"\nimport { Navbar 
} from \"@/components
/marketing/navbar\"\n
import { Footer } 
from \"@/components/m
arketing/footer\"\nim
port { Button } from 
\"@/components/ui/but
ton\"\nimport { 
ArrowRight, 
BarChart3, Calendar, 
Shield, Zap, Users, 
Smartphone } from \"l
ucide-react\"\n\nexpo
rt const metadata: 
Metadata = {\n  
title: 
\"AuditForecaster | 
The Future of Energy 
Auditing\",\n  
description: 
\"Enterprise-grade 
platform for energy 
raters. Manage 
fleets, schedule 
jobs, and analyze 
performance with 
AI-driven 
insights.\",\n  
openGraph: {\n    
type: \"website\",\n 
   locale: 
\"en_US\",\n    url: 
\"https://auditforeca
ster.com\",\n    
title: 
\"AuditForecaster | 
The Future of Energy 
Auditing\",\n    
description: 
\"Enterprise-grade 
platform for energy 
raters.\",\n    
siteName: \"AuditFore
caster\",\n  
},\n}\n\nexport 
default function 
LandingPage() {\n  
return (\n    <div cl
assName=\"min-h-scree
n bg-black 
text-white selection:
bg-emerald-500/30\">\
n      <Navbar 
/>\n\n      <main>\n 
       {/* Hero 
Section */}\n        
<section 
className=\"relative 
pt-32 pb-20 md:pt-48 
md:pb-32 
overflow-hidden\">\n 
         <div 
className=\"absolute 
inset-0 bg-[radial-gr
adient(ellipse_at_top
,_var(--tw-gradient-s
tops))] 
from-emerald-900/20 
via-black to-black\" 
/>\n          <div cl
assName=\"container 
mx-auto px-4 
relative z-10\">\n   
         <div classNa
me=\"max-w-4xl 
mx-auto text-center 
space-y-8\">\n       
       <div className
=\"inline-flex 
items-center 
rounded-full border b
order-emerald-500/30 
bg-emerald-500/10 
px-3 py-1 text-sm 
font-medium 
text-emerald-400 back
drop-blur-xl\">\n    
            <span 
className=\"flex h-2 
w-2 rounded-full 
bg-emerald-400 mr-2 a
nimate-pulse\"></span
>\n                
v1.0 Now Available\n 
             
</div>\n             
 <h1 
className=\"text-5xl 
md:text-7xl 
font-bold 
tracking-tight 
bg-clip-text 
text-transparent 
bg-gradient-to-b 
from-white 
to-white/50\">\n     
           The 
Future of <br />\n   
             Energy 
Auditing\n           
   </h1>\n           
   <p 
className=\"text-xl 
text-gray-400 
max-w-2xl mx-auto 
leading-relaxed\">\n 
               
Streamline your 
operations with the 
most advanced 
platform for energy 
raters.\n            
    From fleet 
management to 
predictive 
analytics, we've got 
you covered.\n       
       </p>\n        
      <div 
className=\"flex 
flex-col sm:flex-row 
items-center 
justify-center gap-4 
pt-4\">\n            
    <Link 
href=\"/login\">\n   
               
<Button size=\"lg\" c
lassName=\"bg-emerald
-500 
hover:bg-emerald-600 
text-white border-0 
h-12 px-8 
text-lg\">\n         
           Start 
Free Trial 
<ArrowRight 
className=\"ml-2 h-5 
w-5\" />\n           
       </Button>\n   
             
</Link>\n            
    <Link href=\"#fea
tures\">\n           
       <Button 
size=\"lg\" 
variant=\"outline\" c
lassName=\"border-whi
te/10 bg-white/5 
hover:bg-white/10 
text-white h-12 px-8 
text-lg\">\n         
           View 
Features\n           
       </Button>\n   
             
</Link>\n            
  </div>\n           
 </div>\n          
</div>\n        
</section>\n\n       
 {/* Features Grid 
*/}\n        
<section 
id=\"features\" 
className=\"py-24 
bg-black/50\">\n     
     <div className=\
"container mx-auto 
px-4\">\n            
<div className=\"text
-center mb-16\">\n   
           <h2 
className=\"text-3xl 
md:text-4xl 
font-bold 
mb-4\">Everything 
you need to 
scale</h2>\n         
     <p className=\"t
ext-gray-400 
max-w-2xl 
mx-auto\">\n         
       Built by 
raters, for raters. 
Our comprehensive 
suite of tools helps 
you manage every 
aspect of your 
business.\n          
    </p>\n           
 </div>\n\n          
  <div 
className=\"grid 
md:grid-cols-3 
gap-8\">\n           
   <FeatureCard\n    
            
icon={<Calendar 
className=\"h-8 w-8 
text-emerald-400\" 
/>}\n                
title=\"Smart 
Scheduling\"\n       
         description=
\"Drag-and-drop 
calendar with 
conflict detection 
and route 
optimization for 
your inspectors.\"\n 
             />\n    
          
<FeatureCard\n       
         
icon={<BarChart3 
className=\"h-8 w-8 
text-blue-400\" 
/>}\n                
title=\"Predictive 
Analytics\"\n        
        description=\
"AI-powered insights 
to forecast revenue, 
track inspector 
performance, and 
identify 
bottlenecks.\"\n     
         />\n        
      <FeatureCard\n 
               
icon={<Smartphone 
className=\"h-8 w-8 
text-purple-400\" 
/>}\n                
title=\"Mobile Field 
App\"\n              
  description=\"Offli
ne-capable PWA for 
inspectors to 
capture data, 
photos, and 
signatures on 
site.\"\n            
  />\n              
<FeatureCard\n       
         
icon={<Users 
className=\"h-8 w-8 
text-orange-400\" 
/>}\n                
title=\"Team 
Management\"\n       
         
description=\"Manage 
inspectors, 
builders, and 
subcontractors with 
granular role-based 
access control.\"\n  
            />\n     
         
<FeatureCard\n       
         icon={<Zap 
className=\"h-8 w-8 
text-yellow-400\" 
/>}\n                
title=\"Automated 
Reporting\"\n        
        description=\
"Generate 
professional PDF 
reports and invoices 
instantly. Send them 
to clients with one 
click.\"\n           
   />\n              
<FeatureCard\n       
         
icon={<Shield 
className=\"h-8 w-8 
text-red-400\" />}\n 
               
title=\"Enterprise 
Security\"\n         
       description=\"
Bank-grade 
encryption, audit 
logs, and secure API 
access for your 
peace of mind.\"\n   
           />\n      
      </div>\n       
   </div>\n        
</section>\n\n       
 {/* CTA Section 
*/}\n        
<section 
className=\"py-24 
relative 
overflow-hidden\">\n 
         <div 
className=\"absolute 
inset-0 
bg-emerald-900/10\" 
/>\n          <div cl
assName=\"container 
mx-auto px-4 
relative z-10 
text-center\">\n     
       <h2 
className=\"text-4xl 
font-bold 
mb-6\">Ready to 
transform your 
business?</h2>\n     
       <p 
className=\"text-xl 
text-gray-400 mb-10 
max-w-2xl 
mx-auto\">\n         
     Join the 
leading energy 
rating companies who 
trust 
AuditForecaster to 
power their 
operations.\n        
    </p>\n           
 <Link 
href=\"/login\">\n   
           <Button 
size=\"lg\" 
className=\"bg-white 
text-black 
hover:bg-gray-200 
h-12 px-8 text-lg 
font-semibold\">\n   
             Get 
Started Now\n        
      </Button>\n    
        </Link>\n    
      </div>\n       
 </section>\n      
</main>\n\n      
<Footer />\n    
</div>\n  
)\n}\n\nfunction 
FeatureCard({ icon, 
title, description 
}: { icon: 
React.ReactNode, 
title: string, 
description: string 
}) {\n  return (\n   
 <div 
className=\"p-8 
rounded-2xl border 
border-white/10 
bg-white/5 
backdrop-blur-sm 
hover:bg-white/10 tra
nsition-colors\">\n  
    <div 
className=\"mb-4 p-3 
rounded-lg 
bg-white/5 
w-fit\">\n        
{icon}\n      
</div>\n      <h3 
className=\"text-xl 
font-bold mb-3 text-w
hite\">{title}</h3>\n
      <p className=\"
text-gray-400 
leading-relaxed\">\n 
       
{description}\n      
</p>\n    </div>\n  )
\n}\n","usedDeprecate
dRules":[]},{"filePat
h":"C:\\Users\\shaun\
\Antigrabity Workspac
e\\auditforecaster\\s
rc\\auth.ts","message
s":[{"ruleId":"@types
cript-eslint/no-unuse
d-vars","severity":1,
"message":"'env' is 
defined but never use
d.","line":9,"column"
:10,"nodeType":null,"
messageId":"unusedVar
","endLine":9,"endCol
umn":13},{"ruleId":"@
typescript-eslint/no-
explicit-any","severi
ty":2,"message":"Unex
pected any. Specify 
a different type.","l
ine":98,"column":37,"
nodeType":"TSAnyKeywo
rd","messageId":"unex
pectedAny","endLine":
98,"endColumn":40,"su
ggestions":[{"message
Id":"suggestUnknown",
"fix":{"range":[3438,
3441],"text":"unknown
"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3438,3441],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":111,"col
umn":36,"nodeType":"T
SAnyKeyword","message
Id":"unexpectedAny","
endLine":111,"endColu
mn":39,"suggestions":
[{"messageId":"sugges
tUnknown","fix":{"ran
ge":[3888,3891],"text
":"unknown"},"desc":"
Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
3888,3891],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":2,"fatal
ErrorCount":0,"warnin
gCount":1,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import NextAuth 
from \"next-auth\"\r\
nimport Credentials 
from \"next-auth/prov
iders/credentials\"\r
\nimport Google from 
\"next-auth/providers
/google\"\r\nimport 
{ prisma } from \"@/l
ib/prisma\"\r\nimport
 { z } from 
\"zod\"\r\nimport 
type { User } from \"
@prisma/client\"\r\ni
mport bcrypt from \"b
cryptjs\"\r\nimport 
{ authConfig } from \
"./auth.config\"\r\ni
mport { env } from \"
@/lib/env\"\r\n\r\nas
ync function 
getUser(email: 
string): 
Promise<User | 
undefined> {\r\n    
try {\r\n        
const user = await pr
isma.user.findUnique(
{\r\n            
where: { email 
},\r\n        
});\r\n        
return user || 
undefined;\r\n    } 
catch (error) {\r\n  
      console.error('
Failed to fetch 
user:', error);\r\n  
      throw new 
Error('Failed to 
fetch user.');\r\n   
 }\r\n}\r\n\r\n\r\nco
nst nextAuthResult = 
NextAuth({\r\n    
...authConfig,\r\n   
 trustHost: 
true,\r\n    
providers: [\r\n     
   Google({\r\n      
      clientId: proce
ss.env.GOOGLE_CLIENT_
ID,\r\n            
clientSecret: process
.env.GOOGLE_CLIENT_SE
CRET,\r\n            
authorization: {\r\n 
               
params: {\r\n        
            prompt: 
\"consent\",\r\n     
               
access_type: 
\"offline\",\r\n     
               
response_type: 
\"code\",\r\n        
            scope: 
\"openid email 
profile https://www.g
oogleapis.com/auth/ca
lendar https://www.go
ogleapis.com/auth/gma
il.send https://www.g
oogleapis.com/auth/ph
otoslibrary\"\r\n    
            }\r\n    
        }\r\n        
}),\r\n        
Credentials({\r\n    
        async authori
ze(credentials) 
{\r\n                
const 
parsedCredentials = 
z\r\n                
    .object({ email: 
z.string().email(), 
password: 
z.string().min(6) 
})\r\n               
     .safeParse(crede
ntials);\r\n\r\n     
           if (parsed
Credentials.success) 
{\r\n                
    const { email, 
password } = parsedCr
edentials.data;\r\n  
                  
const user = await ge
tUser(email);\r\n\r\n
                    
if (!user || 
!user.passwordHash) 
return null;\r\n\r\n 
                   
const passwordsMatch 
= await bcrypt.compar
e(password, user.pass
wordHash);\r\n\r\n   
                 if 
(passwordsMatch) 
return user;\r\n     
           }\r\n\r\n 
               
return null;\r\n     
       },\r\n        
}),\r\n    ],\r\n    
callbacks: {\r\n     
   ...authConfig.call
backs,\r\n        
async session({ 
session, token }) 
{\r\n            // 
Add role to 
session\r\n          
  if (token.sub && 
session.user) {\r\n  
              
session.user.id = 
token.sub\r\n        
        const user = 
await prisma.user.fin
dUnique({ where: { 
id: token.sub } 
})\r\n               
 if (user) {\r\n     
               
session.user.role = 
user.role\r\n        
            session.u
ser.builderId = 
user.builderId\r\n   
             }\r\n   
         }\r\n       
     // Add access 
token to session for 
API calls\r\n        
    if 
(token.accessToken) 
{\r\n                
session.accessToken 
= token.accessToken 
as string\r\n        
    }\r\n            
return session\r\n   
     },\r\n        
async jwt({ token, 
user, account }) 
{\r\n            if 
(user) {\r\n         
       token.role = 
user.role\r\n        
    }\r\n            
// Persist the 
access_token and 
refresh_token to the 
token\r\n            
if (account) {\r\n   
             
token.accessToken = a
ccount.access_token\r
\n                
token.refreshToken = 
account.refresh_token
\r\n                
token.expiresAt = acc
ount.expires_at\r\n  
          }\r\n      
      return 
token\r\n        
}\r\n    },\r\n})\r\n
\r\nexport const { 
handlers, signIn, 
signOut } = nextAuthR
esult\r\n\r\n// Wrap 
auth to support E2E 
mocking\r\n// Wrap 
auth to support E2E 
mocking\r\nexport 
const auth = async 
(...args: any[]) => 
{\r\n    if (process.
env.MOCK_AUTH_FOR_E2E
 === 'true') {\r\n   
     return {\r\n    
        user: {\r\n  
              name: 
'E2E Admin',\r\n     
           email: 'ad
min@example.com',\r\n
                
role: 'ADMIN',\r\n   
             id: 
'e2e-admin-id',\r\n  
              
builderId: 'e2e-test-
builder'\r\n         
   },\r\n            
expires: new 
Date(Date.now() + 24 
* 60 * 60 * 1000).toI
SOString()\r\n       
 }\r\n    }\r\n    
return 
(nextAuthResult.auth 
as any)(...args)\r\n}
\r\n\r\nexport { 
nextAuthResult }\r\n"
,"usedDeprecatedRules
":[]},{"filePath":"C:
\\Users\\shaun\\Antig
rabity Workspace\\aud
itforecaster\\src\\co
mponents\\__tests__\\
create-job-form.test.
tsx","messages":[{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":47,"colu
mn":54,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":47,"endColumn
":57,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2301,2304],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2301,2304],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[{"
ruleId":"@typescript-
eslint/no-explicit-an
y","severity":2,"mess
age":"Unexpected 
any. Specify a 
different type.","lin
e":19,"column":20,"no
deType":"TSAnyKeyword
","messageId":"unexpe
ctedAny","endLine":19
,"endColumn":23,"sugg
estions":[{"messageId
":"suggestUnknown","f
ix":{"range":[613,616
],"text":"unknown"},"
desc":"Use `unknown` 
instead, this will 
force you to 
explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
613,616],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}],"supp
ressions":[{"kind":"d
irective","justificat
ion":""}]}],"errorCou
nt":1,"fatalErrorCoun
t":0,"warningCount":0
,"fixableErrorCount":
0,"fixableWarningCoun
t":0,"source":"import
 { render, screen, 
fireEvent, waitFor } 
from '@testing-librar
y/react'\r\nimport { 
CreateJobForm } from 
'../create-job-form'\
r\nimport { 
createJob } from '@/a
pp/actions/jobs'\r\ni
mport { vi, 
describe, it, expect 
} from 
'vitest'\r\n\r\n// 
Mock dependencies\r\n
vi.mock('@/app/action
s/jobs', () => 
({\r\n    createJob: 
vi.fn(),\r\n}))\r\n\r
\nvi.mock('@/componen
ts/ui/use-toast', () 
=> ({\r\n    
useToast: vi.fn(() 
=> ({ toast: vi.fn() 
})),\r\n}))\r\n\r\n//
 Mock Radix UI 
Select to simplify 
testing\r\ntype 
MockProps = {\r\n    
children?: 
React.ReactNode;\r\n 
   // eslint-disable-
next-line @typescript
-eslint/no-explicit-a
ny\r\n    [key: 
string]: any;\r\n}\r\
n\r\nvi.mock('@/compo
nents/ui/select', () 
=> ({\r\n    Select: 
({ children }: 
MockProps) => <div da
ta-testid=\"select\">
{children}</div>,\r\n
    SelectTrigger: 
({ children }: 
MockProps) => <button
>{children}</button>,
\r\n    SelectValue: 
({ placeholder }: 
MockProps) => <span>{
placeholder}</span>,\
r\n    
SelectContent: ({ 
children }: 
MockProps) => <div>{c
hildren}</div>,\r\n  
  SelectItem: ({ 
children, value, 
onClick }: 
MockProps) => <div 
onClick={() => onClic
k?.(value)}>{children
}</div>,\r\n}))\r\n\r
\nconst mockBuilders 
= [{ id: 'b1', name: 
'Builder One', 
email: 
'b1@test.com', 
phone: '123', 
address: '123', 
contactInfo: null, 
paymentTerms: null, 
createdAt: new 
Date(), updatedAt: 
new Date() 
}]\r\nconst 
mockInspectors = [{ 
id: 'i1', name: 
'Inspector One', 
email: 
'i1@test.com', role: 
'INSPECTOR', 
emailVerified: null, 
image: null, 
createdAt: new 
Date(), updatedAt: 
new Date(), 
passwordHash: 'hash' 
}]\r\n\r\ndescribe('C
reateJobForm', () => 
{\r\n    it('renders 
all form fields', () 
=> {\r\n        rende
r(<CreateJobForm buil
ders={mockBuilders} i
nspectors={mockInspec
tors} />)\r\n\r\n    
    expect(screen.get
ByPlaceholderText('Lo
t Number')).toBeInThe
Document()\r\n       
 expect(screen.getByP
laceholderText('Stree
t Address')).toBeInTh
eDocument()\r\n      
  expect(screen.getBy
PlaceholderText('City
')).toBeInTheDocument
()\r\n        expect(
screen.getByText('Sel
ect Builder')).toBeIn
TheDocument()\r\n    
    expect(screen.get
ByText('Assign 
Inspector (Optional)'
)).toBeInTheDocument(
)\r\n        expect(s
creen.getByText('Sche
dule Job')).toBeInThe
Document()\r\n    
})\r\n\r\n    
it('submits form 
with data', async () 
=> {\r\n        
const mockCreateJob 
= vi.mocked(createJob
)\r\n        mockCrea
teJob.mockResolvedVal
ue(undefined as 
any)\r\n\r\n        r
ender(<CreateJobForm 
builders={mockBuilder
s} inspectors={mockIn
spectors} 
/>)\r\n\r\n        fi
reEvent.change(screen
.getByPlaceholderText
('Lot Number'), { 
target: { value: 
'123' } })\r\n       
 fireEvent.change(scr
een.getByPlaceholderT
ext('Street 
Address'), { target: 
{ value: 'Main St' } 
})\r\n        fireEve
nt.change(screen.getB
yPlaceholderText('Cit
y'), { target: { 
value: 'Test City' } 
})\r\n\r\n        
const submitBtn = scr
een.getByText('Schedu
le Job')\r\n        f
ireEvent.click(submit
Btn)\r\n\r\n        
await waitFor(() => 
{\r\n            expe
ct(mockCreateJob).toH
aveBeenCalled()\r\n  
      })\r\n    })\r\
n})\r\n","usedDepreca
tedRules":[]},{"fileP
ath":"C:\\Users\\shau
n\\Antigrabity Worksp
ace\\auditforecaster\
\src\\components\\__t
ests__\\inspection-fo
rm.test.tsx","message
s":[{"ruleId":"@types
cript-eslint/no-expli
cit-any","severity":2
,"message":"Unexpecte
d any. Specify a 
different type.","lin
e":58,"column":61,"no
deType":"TSAnyKeyword
","messageId":"unexpe
ctedAny","endLine":58
,"endColumn":64,"sugg
estions":[{"messageId
":"suggestUnknown","f
ix":{"range":[2080,20
83],"text":"unknown"}
,"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2080,2083],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":1,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { render, 
screen, fireEvent, 
waitFor } from '@test
ing-library/react'\r\
nimport { 
InspectionForm } 
from '../inspection-f
orm'\r\nimport { 
updateInspection } 
from '@/app/actions/i
nspections'\r\nimport
 { vi, describe, it, 
expect } from 
'vitest'\r\n\r\n// 
Mock dependencies\r\n
vi.mock('@/app/action
s/inspections', () 
=> ({\r\n    
updateInspection: vi.
fn(),\r\n}))\r\n\r\nv
i.mock('@/components/
ui/use-toast', () => 
({\r\n    useToast: 
vi.fn(() => ({ 
toast: vi.fn() })),\r
\n}))\r\n\r\nvi.mock(
'@/hooks/use-offline-
sync', () => ({\r\n  
  useOfflineSync: () 
=> ({\r\n        
isOffline: 
false,\r\n        
lastSaved: null,\r\n 
       offlineData: 
null,\r\n        
saveDraft: 
vi.fn()\r\n    
})\r\n}))\r\n\r\n// 
Mock child 
components to avoid 
deep rendering issues
\r\nvi.mock('@/compon
ents/photo-upload', 
() => ({\r\n    
PhotoUpload: () => 
<div data-testid=\"ph
oto-upload\">Photo 
Upload Component</div
>\r\n}))\r\n\r\nvi.mo
ck('@/components/chec
klist-section', () 
=> ({\r\n    
ChecklistSection: () 
=> <div data-testid=\
"checklist-section\">
Checklist Section Com
ponent</div>\r\n}))\r
\n\r\nvi.mock('@/comp
onents/signature-pad'
, () => ({\r\n    
SignaturePad: () => 
<div data-testid=\"si
gnature-pad\">Signatu
re Pad Component</div
>\r\n}))\r\n\r\ndescr
ibe('InspectionForm',
 () => {\r\n    
const mockJobId = 
'job-123'\r\n    
const 
mockInitialData = 
{\r\n        
checklist: [],\r\n   
     signatureUrl: 
undefined,\r\n       
 cfm50: 1000,\r\n    
    notes: 'Test 
notes'\r\n    
}\r\n\r\n    
it('renders 
correctly with 
initial data', () => 
{\r\n        render(<
InspectionForm 
jobId={mockJobId} ini
tialData={mockInitial
Data} />)\r\n\r\n    
    expect(screen.get
ByText('Blower Door 
Test Results')).toBeI
nTheDocument()\r\n   
     expect(screen.ge
tByLabelText('CFM @ 5
0Pa')).toHaveValue(10
00)\r\n        expect
(screen.getByText('Te
st notes')).toBeInThe
Document()\r\n       
 // Photo upload 
requires 
inspectionId which 
we don't provide in 
this test\r\n        
expect(screen.getByTe
stId('checklist-secti
on')).toBeInTheDocume
nt()\r\n    
})\r\n\r\n    
it('submits 
inspection data', 
async () => {\r\n    
    const 
mockUpdateInspection 
= vi.mocked(updateIns
pection)\r\n        m
ockUpdateInspection.m
ockResolvedValue(unde
fined as 
any)\r\n\r\n        r
ender(<InspectionForm
 jobId={mockJobId} in
itialData={mockInitia
lData} />)\r\n\r\n   
     const submitBtn 
= screen.getByRole('b
utton', { name: 
/Complete 
Inspection/i })\r\n  
      fireEvent.click
(submitBtn)\r\n\r\n  
      await 
waitFor(() => {\r\n  
          expect(mock
UpdateInspection).toH
aveBeenCalled()\r\n  
      })\r\n    })\r\
n})\r\n","usedDepreca
tedRules":[]},{"fileP
ath":"C:\\Users\\shau
n\\Antigrabity Worksp
ace\\auditforecaster\
\src\\components\\app
-sidebar.tsx","messag
es":[{"ruleId":"react
-hooks/exhaustive-dep
s","severity":1,"mess
age":"React Hook 
useEffect has a 
missing dependency: 
'expandedItems'. 
Either include it or 
remove the 
dependency array.","l
ine":183,"column":8,"
nodeType":"ArrayExpre
ssion","endLine":183,
"endColumn":18,"sugge
stions":[{"desc":"Upd
ate the dependencies 
array to be: 
[expandedItems, pathn
ame]","fix":{"range":
[5794,5804],"text":"[
expandedItems, pathna
me]"}}]}],"suppressed
Messages":[],"errorCo
unt":0,"fatalErrorCou
nt":0,"warningCount":
1,"fixableErrorCount"
:0,"fixableWarningCou
nt":0,"source":"'use 
client'\r\n\r\nimport
 Link from \"next/lin
k\"\r\nimport { 
usePathname } from \"
next/navigation\"\r\n
import {\r\n    
Home,\r\n    
ClipboardList,\r\n   
 Calendar,\r\n    
Users,\r\n    
FileText,\r\n    
FileBarChart,\r\n    
LayoutTemplate,\r\n  
  DollarSign,\r\n    
Receipt,\r\n    
Percent,\r\n    
CheckSquare,\r\n    
Settings,\r\n    
LogOut,\r\n    
ChevronDown,\r\n    
ChevronRight,\r\n    
Wrench,\r\n    
Truck,\r\n    
HardHat,\r\n    
MapPin,\r\n    
Activity,\r\n    
Link as 
LinkIcon,\r\n    
BarChart3,\r\n    
Terminal\r\n} from \"
lucide-react\"\r\nimp
ort { Button } from \
"@/components/ui/butt
on\"\r\nimport { 
useState, useEffect 
} from 
\"react\"\r\nimport 
{ cn } from \"@/lib/u
tils\"\r\n\r\ntype 
NavItem = {\r\n    
name: string\r\n    
href: string\r\n    
icon: React.ElementTy
pe\r\n    roles: 
string[]\r\n    
children?: NavItem[]\
r\n}\r\n\r\nconst 
NAV_ITEMS: NavItem[] 
= [\r\n    {\r\n     
   name: 
\"Dashboard\",\r\n   
     href: 
\"/dashboard\",\r\n  
      icon: 
Home,\r\n        
roles: 
[\"ADMIN\"]\r\n    
},\r\n    {\r\n      
  name: 
\"Analytics\",\r\n   
     href: \"/dashboa
rd/analytics\",\r\n  
      icon: 
BarChart3,\r\n       
 roles: 
[\"ADMIN\"]\r\n    
},\r\n    {\r\n      
  name: 
\"Jobs\",\r\n        
href: \"/dashboard/jo
bs\",\r\n        
icon: 
ClipboardList,\r\n   
     roles: 
[\"ADMIN\", 
\"INSPECTOR\"],\r\n  
      children: 
[\r\n            { 
name: \"All Jobs\", 
href: 
\"/dashboard/jobs\", 
icon: ClipboardList, 
roles: [\"ADMIN\", 
\"INSPECTOR\"] 
},\r\n            { 
name: \"Schedule\", 
href: \"/dashboard/jo
bs?view=calendar\", 
icon: Calendar, 
roles: [\"ADMIN\", 
\"INSPECTOR\"] 
},\r\n        ]\r\n  
  },\r\n    {\r\n    
    name: 
\"Builders\",\r\n    
    href: \"/dashboar
d/builders\",\r\n    
    icon: Users,\r\n 
       roles: 
[\"ADMIN\"],\r\n     
   children: [\r\n   
         { name: 
\"Builder List\", 
href: \"/dashboard/bu
ilders\", icon: 
Users, roles: 
[\"ADMIN\"] },\r\n   
         { name: 
\"Plans\", href: \"/d
ashboard/builders/pla
ns\", icon: 
FileText, roles: 
[\"ADMIN\"] },\r\n   
     ]\r\n    },\r\n 
   {\r\n        
name: 
\"Reports\",\r\n     
   href: \"/dashboard
/reports\",\r\n      
  icon: 
FileBarChart,\r\n    
    roles: 
[\"ADMIN\"],\r\n     
   children: [\r\n   
         { name: 
\"All Reports\", 
href: \"/dashboard/re
ports\", icon: 
FileBarChart, roles: 
[\"ADMIN\"] },\r\n   
         { name: 
\"Templates\", href: 
\"/dashboard/reports/
templates\", icon: 
LayoutTemplate, 
roles: [\"ADMIN\"] 
},\r\n        ]\r\n  
  },\r\n    {\r\n    
    name: 
\"Finances\",\r\n    
    href: \"/dashboar
d/finances\",\r\n    
    icon: 
DollarSign,\r\n      
  roles: 
[\"ADMIN\"],\r\n     
   children: [\r\n   
         { name: 
\"Invoices\", href: \
"/dashboard/finances/
invoices\", icon: 
Receipt, roles: 
[\"ADMIN\"] },\r\n   
         { name: 
\"45L Tax Credits\", 
href: \"/dashboard/fi
nances/tax-credits\",
 icon: Percent, 
roles: [\"ADMIN\"] 
},\r\n        ]\r\n  
  },\r\n    {\r\n    
    name: 
\"Assets\",\r\n      
  href: \"/dashboard/
assets\",\r\n        
icon: Wrench,\r\n    
    roles: 
[\"ADMIN\"],\r\n     
   children: [\r\n   
         { name: 
\"Equipment\", href: 
\"/dashboard/assets/e
quipment\", icon: 
Wrench, roles: 
[\"ADMIN\"] },\r\n   
         { name: 
\"Fleet\", href: \"/d
ashboard/assets/fleet
\", icon: Truck, 
roles: [\"ADMIN\"] 
},\r\n        ]\r\n  
  },\r\n    {\r\n    
    name: 
\"Team\",\r\n        
href: \"/dashboard/te
am\",\r\n        
icon: Users,\r\n     
   roles: 
[\"ADMIN\"],\r\n     
   children: [\r\n   
         { name: 
\"Inspectors\", 
href: \"/dashboard/te
am/inspectors\", 
icon: HardHat, 
roles: [\"ADMIN\"] 
},\r\n            { 
name: \"Users\", 
href: \"/dashboard/te
am/users\", icon: 
Users, roles: 
[\"ADMIN\"] },\r\n   
     ]\r\n    },\r\n 
   {\r\n        
name: 
\"Logistics\",\r\n   
     href: \"/dashboa
rd/logistics\",\r\n  
      icon: 
MapPin,\r\n        
roles: [\"ADMIN\", 
\"INSPECTOR\"],\r\n  
      children: 
[\r\n            { 
name: \"Mileage & 
Routes\", href: \"/da
shboard/logistics/mil
eage\", icon: 
MapPin, roles: 
[\"ADMIN\", 
\"INSPECTOR\"] 
},\r\n        ]\r\n  
  },\r\n    {\r\n    
    name: \"QA 
Review\",\r\n        
href: \"/dashboard/qa
\",\r\n        icon: 
CheckSquare,\r\n     
   roles: 
[\"ADMIN\", 
\"QA\"]\r\n    
},\r\n    {\r\n      
  name: 
\"Admin\",\r\n       
 href: \"/dashboard/a
dmin\",\r\n        
icon: Activity,\r\n  
      roles: 
[\"ADMIN\"],\r\n     
   children: [\r\n   
         { name: 
\"Integrations\", 
href: \"/dashboard/ad
min/integrations\", 
icon: LinkIcon, 
roles: [\"ADMIN\"] 
},\r\n            { 
name: \"System 
Health\", href: \"/da
shboard/admin/health\
", icon: Activity, 
roles: [\"ADMIN\"] 
},\r\n        ]\r\n  
  },\r\n    {\r\n    
    name: \"Dev 
Tools\",\r\n        
href: \"/dashboard/de
v\",\r\n        
icon: Terminal,\r\n  
      roles: 
[\"ADMIN\"],\r\n     
   children: [\r\n   
         { name: 
\"Progress\", href: \
"/dashboard/dev/progr
ess\", icon: 
BarChart3, roles: 
[\"ADMIN\"] },\r\n   
     ]\r\n    },\r\n 
   {\r\n        
name: 
\"Settings\",\r\n    
    href: \"/dashboar
d/settings\",\r\n    
    icon: 
Settings,\r\n        
roles: [\"ADMIN\", 
\"INSPECTOR\", 
\"QA\", 
\"BUILDER\"],\r\n    
    children: [\r\n  
          { name: 
\"Profile\", href: \"
/dashboard/settings\"
, icon: Settings, 
roles: [\"ADMIN\", 
\"INSPECTOR\", 
\"QA\", \"BUILDER\"] 
},\r\n            { 
name: \"Pricing\", 
href: \"/dashboard/se
ttings/pricing\", 
icon: DollarSign, 
roles: [\"ADMIN\"] 
},\r\n        ]\r\n  
  },\r\n    {\r\n    
    name: \"Builder 
Portal\",\r\n        
href: \"/dashboard/bu
ilder\",\r\n        
icon: HardHat,\r\n   
     roles: 
[\"BUILDER\"],\r\n   
     children: [\r\n 
           { name: 
\"Dashboard\", href: 
\"/dashboard/builder\
", icon: Home, 
roles: [\"BUILDER\"] 
},\r\n            { 
name: \"My Jobs\", 
href: \"/dashboard/bu
ilder/jobs\", icon: 
ClipboardList, 
roles: [\"BUILDER\"] 
},\r\n        ]\r\n  
  },\r\n]\r\n\r\nexpo
rt function 
AppSidebar({ 
userRole, onSignOut, 
className }: { 
userRole: string, 
onSignOut: () => 
Promise<void>, 
className?: string 
}) {\r\n    const 
pathname = 
usePathname()\r\n    
const 
[expandedItems, 
setExpandedItems] = u
seState<string[]>([])
\r\n\r\n    // 
Auto-expand the 
active section based 
on pathname\r\n    
useEffect(() => 
{\r\n        const 
activeItem = 
NAV_ITEMS.find(item 
=>\r\n            ite
m.children?.some(chil
d => pathname.startsW
ith(child.href))\r\n 
       )\r\n        
if (activeItem && !ex
pandedItems.includes(
activeItem.name)) 
{\r\n            setE
xpandedItems(prev => 
[...prev, activeItem.
name])\r\n        
}\r\n    }, 
[pathname])\r\n\r\n  
  const toggleExpand 
= (name: string) => 
{\r\n        setExpan
dedItems(prev =>\r\n 
           prev.inclu
des(name)\r\n        
        ? 
prev.filter(item => 
item !== name)\r\n   
             : 
[...prev, name]\r\n  
      )\r\n    
}\r\n\r\n    const 
isVisible = (item: 
NavItem) => item.role
s.includes(userRole)\
r\n\r\n    return 
(\r\n        <aside c
lassName={cn(\"w-full
 border-r 
bg-gray-100/40 
md:w-64 
md:min-h-screen flex 
flex-col\", 
className)}>\r\n     
       <div 
className=\"flex 
h-14 items-center 
border-b px-4 
lg:h-[60px] lg:px-6 
bg-white\">\r\n      
          <Link 
href=\"/\" 
className=\"flex 
items-center gap-2 
font-semibold\">\r\n 
                   
<span className=\"\">
Ulrich 
Energy</span>\r\n    
            
</Link>\r\n          
  </div>\r\n\r\n     
       <nav 
className=\"flex-1 
overflow-y-auto py-4 
px-2 
space-y-1\">\r\n     
           {NAV_ITEMS
.filter(isVisible).ma
p((item) => (\r\n    
                <div 
key={item.name}>\r\n 
                     
  {item.children ? 
(\r\n                
            <div clas
sName=\"space-y-1\">\
r\n                  
              
<button\r\n          
                     
     onClick={() => t
oggleExpand(item.name
)}\r\n               
                     
className={cn(\r\n   
                     
                
\"w-full flex 
items-center 
justify-between 
gap-3 rounded-lg 
px-3 py-2 text-sm 
font-medium 
transition-all hover:
bg-gray-100\",\r\n   
                     
                pathn
ame.startsWith(item.h
ref) ? 
\"text-blue-600\" : \
"text-gray-500\"\r\n 
                     
              )}\r\n 
                     
          >\r\n      
                     
         <div 
className=\"flex 
items-center 
gap-3\">\r\n         
                     
          <item.icon 
className=\"h-4 
w-4\" />\r\n         
                     
          
{item.name}\r\n      
                     
         </div>\r\n  
                     
             {expande
dItems.includes(item.
name) ? (\r\n        
                     
           
<ChevronDown 
className=\"h-4 w-4 
opacity-50\" />\r\n  
                     
             ) : 
(\r\n                
                     
   <ChevronRight 
className=\"h-4 w-4 
opacity-50\" />\r\n  
                     
             )}\r\n  
                     
         
</button>\r\n\r\n    
                     
       {expandedItems
.includes(item.name) 
&& (\r\n             
                     
  <div 
className=\"ml-4 
pl-2 border-l 
space-y-1\">\r\n     
                     
              {item.c
hildren.filter(isVisi
ble).map((child) => 
(\r\n                
                     
       <Link\r\n     
                     
                     
 
key={child.name}\r\n 
                     
                     
     href={child.href
}\r\n                
                     
           
className={cn(\r\n   
                     
                     
       \"flex 
items-center gap-3 
rounded-lg px-3 py-2 
text-sm 
transition-all hover:
bg-gray-100\",\r\n   
                     
                     
       pathname === 
child.href ? 
\"bg-gray-100 
text-blue-600 
font-medium\" : \"tex
t-gray-500\"\r\n     
                     
                     
 )}\r\n              
                     
         >\r\n       
                     
                    
<child.icon 
className=\"h-4 
w-4\" />\r\n         
                     
                  
{child.name}\r\n     
                     
                  
</Link>\r\n          
                     
         ))}\r\n     
                     
          </div>\r\n 
                     
          )}\r\n     
                     
  </div>\r\n         
               ) : 
(\r\n                
            
<Link\r\n            
                    
href={item.href}\r\n 
                     
          
className={cn(\r\n   
                     
            \"flex 
items-center gap-3 
rounded-lg px-3 py-2 
text-sm font-medium 
transition-all hover:
bg-gray-100\",\r\n   
                     
            pathname 
=== item.href ? 
\"bg-gray-100 
text-blue-600\" : \"t
ext-gray-500\"\r\n   
                     
        )}\r\n       
                     
>\r\n                
                
<item.icon 
className=\"h-4 
w-4\" />\r\n         
                     
  {item.name}\r\n    
                     
   </Link>\r\n       
                 
)}\r\n               
     </div>\r\n      
          ))}\r\n    
        
</nav>\r\n\r\n       
     <div 
className=\"border-t 
p-4 bg-white\">\r\n  
              <form a
ction={onSignOut}>\r\
n                    
<Button 
variant=\"ghost\" 
size=\"sm\" 
className=\"w-full 
justify-start 
text-red-700 
hover:text-red-800 ho
ver:bg-red-50\">\r\n 
                     
  <LogOut 
className=\"mr-2 h-4 
w-4\" />\r\n         
               Sign 
Out\r\n              
      </Button>\r\n  
              
</form>\r\n          
  </div>\r\n        
</aside>\r\n    )\r\n
}\r\n","usedDeprecate
dRules":[]},{"filePat
h":"C:\\Users\\shaun\
\Antigrabity Workspac
e\\auditforecaster\\s
rc\\components\\asset
s\\asset-qr-code.tsx"
,"messages":[{"ruleId
":"@typescript-eslint
/no-unused-vars","sev
erity":1,"message":"'
handlePrint' is 
assigned a value but 
never used.","line":2
4,"column":11,"nodeTy
pe":null,"messageId":
"unusedVar","endLine"
:24,"endColumn":22}],
"suppressedMessages":
[],"errorCount":0,"fa
talErrorCount":0,"war
ningCount":1,"fixable
ErrorCount":0,"fixabl
eWarningCount":0,"sou
rce":"'use client'\r\
n\r\nimport { 
QRCodeSVG } from 'qrc
ode.react'\r\nimport 
{ Button } from \"@/c
omponents/ui/button\"
\r\nimport { Printer 
} from \"lucide-react
\"\r\nimport {\r\n   
 Dialog,\r\n    
DialogContent,\r\n   
 DialogHeader,\r\n   
 DialogTitle,\r\n    
DialogTrigger,\r\n} 
from \"@/components/u
i/dialog\"\r\n\r\nint
erface 
AssetQRCodeProps 
{\r\n    assetId: 
string\r\n    name: 
string\r\n    
serialNumber: string\
r\n}\r\n\r\nexport 
function 
AssetQRCode({ 
assetId, name, 
serialNumber }: 
AssetQRCodeProps) 
{\r\n    // In a 
real app, this would 
point to the asset's 
public URL or deep 
link\r\n    const 
qrValue = `https://au
ditforecaster.app/ass
ets/${assetId}`\r\n\r
\n    const 
handlePrint = () => 
{\r\n        const 
printWindow = 
window.open('', '', '
width=600,height=600'
)\r\n        if 
(printWindow) {\r\n  
          printWindow
.document.write(`\r\n
        <html>\r\n   
       <head>\r\n    
        <title>Asset 
Label - 
${name}</title>\r\n  
          
<style>\r\n          
    body { \r\n      
          
font-family: 
sans-serif; \r\n     
           display: 
flex; \r\n           
     flex-direction: 
column; \r\n         
       align-items: 
center; \r\n         
       
justify-content: 
center; \r\n         
       height: 
100vh; \r\n          
      margin: 0; 
\r\n              
}\r\n              
.label {\r\n         
       border: 2px 
solid black;\r\n     
           padding: 
20px;\r\n            
    text-align: 
center;\r\n          
      border-radius: 
8px;\r\n             
 }\r\n              
h1 { margin: 0 0 
10px 0; font-size: 
18px; }\r\n          
    p { margin: 10px 
0 0 0; font-size: 
14px; color: #555; 
}\r\n            
</style>\r\n         
 </head>\r\n         
 <body>\r\n          
  <div 
class=\"label\">\r\n 
             
<h1>${name}</h1>\r\n 
             <div id=
\"qr-target\"></div>\
r\n              
<p>SN: ${serialNumber
}</p>\r\n            
</div>\r\n          
</body>\r\n        
</html>\r\n      
`)\r\n\r\n           
 // We need to 
render the QR code 
into the new window. 
\r\n            // 
Since we can't 
easily transfer the 
React component, 
we'll rely on the 
user printing the 
dialog for now\r\n   
         // or use a 
more complex print 
library. \r\n        
    // For MVP Vibe: 
We'll just print the 
current window but 
target the dialog 
content.\r\n         
   // Actually, 
let's keep it 
simple: Just show 
the dialog and let 
them print the 
screen or use a 
dedicated label 
printer feature 
later.\r\n           
 printWindow.close()\
r\n            
window.print()\r\n   
     }\r\n    
}\r\n\r\n    return 
(\r\n        
<Dialog>\r\n         
   <DialogTrigger 
asChild>\r\n         
       <Button 
variant=\"ghost\" 
size=\"icon\" 
title=\"View QR 
Code\">\r\n          
          <div 
className=\"h-6 w-6 
flex items-center 
justify-center 
rounded-md border 
bg-white\">\r\n      
                  
<div className=\"h-3 
w-3 bg-black\" 
/>\r\n               
     </div>\r\n      
          
</Button>\r\n        
    
</DialogTrigger>\r\n 
           
<DialogContent classN
ame=\"sm:max-w-md\">\
r\n                
<DialogHeader>\r\n   
                 
<DialogTitle>Asset La
bel</DialogTitle>\r\n
                
</DialogHeader>\r\n  
              <div 
className=\"flex 
flex-col 
items-center 
justify-center p-6 
space-y-4 border-2 
border-dashed 
rounded-lg 
bg-slate-50\">\r\n   
                 
<div className=\"text
-center\">\r\n       
                 <h3 
className=\"font-bold
 text-lg\">{name}</h3
>\r\n                
        <p 
className=\"text-sm t
ext-muted-foreground\
">{serialNumber}</p>\
r\n                  
  </div>\r\n         
           <div 
className=\"bg-white 
p-4 rounded-lg 
shadow-sm\">\r\n     
                   
<QRCodeSVG 
value={qrValue} 
size={150} />\r\n    
                
</div>\r\n           
         <p 
className=\"text-xs t
ext-muted-foreground 
text-center 
max-w-[200px]\">\r\n 
                     
  Scan to view asset 
details, history, 
and calibration 
status.\r\n          
          </p>\r\n   
             
</div>\r\n           
     <div 
className=\"flex 
justify-end\">\r\n   
                 
<Button onClick={() 
=> 
window.print()}>\r\n 
                     
  <Printer 
className=\"mr-2 h-4 
w-4\" /> Print 
Label\r\n            
        
</Button>\r\n        
        </div>\r\n   
         
</DialogContent>\r\n 
       </Dialog>\r\n 
   )\r\n}\r\n","usedD
eprecatedRules":[]},{
"filePath":"C:\\Users
\\shaun\\Antigrabity 
Workspace\\auditforec
aster\\src\\component
s\\assets\\equipment-
dialog.tsx","messages
":[{"ruleId":"@typesc
ript-eslint/no-unused
-vars","severity":1,"
message":"'AnimatePre
sence' is defined 
but never used.","lin
e":40,"column":18,"no
deType":null,"message
Id":"unusedVar","endL
ine":40,"endColumn":3
3}],"suppressedMessag
es":[],"errorCount":0
,"fatalErrorCount":0,
"warningCount":1,"fix
ableErrorCount":0,"fi
xableWarningCount":0,
"source":"'use client
'\r\n\r\nimport { 
useState } from 
\"react\"\r\nimport 
{ useForm } from \"re
act-hook-form\"\r\nim
port { zodResolver } 
from \"@hookform/reso
lvers/zod\"\r\nimport
 { EquipmentClientInp
ut, EquipmentClientSc
hema } from \"@/lib/s
chemas\"\r\nimport { 
useSync } from \"@/pr
oviders/sync-provider
\"\r\nimport { 
Button } from \"@/com
ponents/ui/button\"\r
\nimport {\r\n    
Dialog,\r\n    
DialogContent,\r\n   
 DialogDescription,\r
\n    
DialogFooter,\r\n    
DialogHeader,\r\n    
DialogTitle,\r\n    
DialogTrigger,\r\n} 
from \"@/components/u
i/dialog\"\r\nimport 
{\r\n    Form,\r\n   
 FormControl,\r\n    
FormField,\r\n    
FormItem,\r\n    
FormLabel,\r\n    
FormMessage,\r\n} 
from \"@/components/u
i/form\"\r\nimport { 
Input } from \"@/comp
onents/ui/input\"\r\n
import {\r\n    
Select,\r\n    
SelectContent,\r\n   
 SelectItem,\r\n    
SelectTrigger,\r\n   
 SelectValue,\r\n} 
from \"@/components/u
i/select\"\r\nimport 
{ useToast } from \"@
/components/ui/use-to
ast\"\r\nimport { 
Plus, Calendar as 
CalendarIcon, 
Loader2 } from \"luci
de-react\"\r\nimport 
{ format, addYears } 
from \"date-fns\"\r\n
import { Popover, 
PopoverContent, 
PopoverTrigger } 
from \"@/components/u
i/popover\"\r\nimport
 { Calendar } from \"
@/components/ui/calen
dar\"\r\nimport { cn 
} from \"@/lib/utils\
"\r\nimport { 
motion, 
AnimatePresence } 
from \"framer-motion\
"\r\n\r\nconst 
SPRING_CONFIG = { 
stiffness: 300, 
damping: 30 
}\r\n\r\nexport 
function 
EquipmentDialog() 
{\r\n    const 
[open, setOpen] = 
useState(false)\r\n  
  const { toast } = 
useToast()\r\n\r\n   
 const form = 
useForm({\r\n        
resolver: zodResolver
(EquipmentClientSchem
a),\r\n        
defaultValues: {\r\n 
           name: 
\"\",\r\n            
type: \"\",\r\n      
      serialNumber: 
\"\",\r\n            
status: \"ACTIVE\" 
as const,\r\n        
    notes: \"\",\r\n 
           
calibrationCertUrl: 
\"\",\r\n        
},\r\n    })\r\n\r\n 
   // Auto-calc next 
calibration when 
last calibration 
changes\r\n    const 
handleLastCalChange 
= (date: Date | 
undefined) => {\r\n  
      form.setValue(\
"lastCalibration\", 
date)\r\n        if 
(date) {\r\n         
   form.setValue(\"ne
xtCalibration\", 
addYears(date, 
1))\r\n        }\r\n 
   }\r\n\r\n    
const { engine } = 
useSync()\r\n\r\n    
async function 
onSubmit(data: Equipm
entClientInput) 
{\r\n        try 
{\r\n            // 
Deep Implementation: 
Enqueue mutation via 
Sync Engine\r\n      
      // This 
handles IDB 
persistence, queue 
management, and 
background sync 
automatically.\r\n   
         await engine
.enqueue('CREATE', 
'equipment', 
data)\r\n\r\n        
    toast({\r\n      
          title: 
\"Saved\",\r\n       
         
description: 
\"Equipment saved. 
Syncing in 
background...\",\r\n 
           
})\r\n\r\n           
 setOpen(false)\r\n  
          
form.reset()\r\n     
   } catch (error) 
{\r\n            cons
ole.error(\"Failed 
to enqueue:\", 
error)\r\n           
 toast({\r\n         
       variant: 
\"destructive\",\r\n 
               
title: 
\"Error\",\r\n       
         
description: 
\"Failed to save 
equipment 
locally.\",\r\n      
      })\r\n        
}\r\n    }\r\n\r\n   
 return (\r\n        
<Dialog open={open} o
nOpenChange={setOpen}
>\r\n            
<DialogTrigger 
asChild>\r\n         
       <motion.div 
whileHover={{ scale: 
1.05 }} whileTap={{ 
scale: 0.95 }}>\r\n  
                  
<Button className=\"b
g-primary/90 
hover:bg-primary 
backdrop-blur-sm 
shadow-lg\">\r\n     
                   
<Plus 
className=\"mr-2 h-4 
w-4\" /> Add 
Equipment\r\n        
            
</Button>\r\n        
        
</motion.div>\r\n    
        
</DialogTrigger>\r\n 
           
<DialogContent classN
ame=\"sm:max-w-[500px
] bg-background/60 
backdrop-blur-xl 
border-white/10 
shadow-2xl\">\r\n    
            
<motion.div\r\n      
              
initial={{ opacity: 
0, y: 20 }}\r\n      
              
animate={{ opacity: 
1, y: 0 }}\r\n       
             transiti
on={SPRING_CONFIG}\r\
n                
>\r\n                
    
<DialogHeader>\r\n   
                     
<DialogTitle 
className=\"text-2xl 
font-bold 
tracking-tight 
bg-clip-text 
text-transparent 
bg-gradient-to-r 
from-foreground to-fo
reground/70\">\r\n   
                     
    Add 
Equipment\r\n        
                
</DialogTitle>\r\n   
                     
<DialogDescription cl
assName=\"text-muted-
foreground/80\">\r\n 
                     
      Register new 
equipment. Ensure 
calibration data is 
accurate.\r\n        
                </Dia
logDescription>\r\n  
                  
</DialogHeader>\r\n  
                  
<Form {...form}>\r\n 
                     
  <form onSubmit={for
m.handleSubmit(onSubm
it)} className=\"spac
e-y-6 mt-6\">\r\n    
                     
   <div 
className=\"grid 
grid-cols-2 
gap-6\">\r\n         
                     
  <FormField\r\n     
                     
          control={fo
rm.control}\r\n      
                     
         
name=\"name\"\r\n    
                     
           
render={({ field }) 
=> (\r\n             
                     
      <FormItem>\r\n 
                     
                     
 <FormLabel>Name</For
mLabel>\r\n          
                     
             
<FormControl>\r\n    
                     
                     
  <Input placeholder=
\"Retrotec 5000\" 
{...field} className=
\"bg-background/50 
border-white/10 focus
:ring-primary/20\" 
/>\r\n               
                     
        
</FormControl>\r\n   
                     
                    
<FormMessage />\r\n  
                     
                 
</FormItem>\r\n      
                     
         )}\r\n      
                     
     />\r\n          
                     
 <FormField\r\n      
                     
         control={for
m.control}\r\n       
                     
        
name=\"type\"\r\n    
                     
           
render={({ field }) 
=> (\r\n             
                     
      <FormItem>\r\n 
                     
                     
 <FormLabel>Type</For
mLabel>\r\n          
                     
             
<FormControl>\r\n    
                     
                     
  <Input 
placeholder=\"Blower 
Door\" {...field} cla
ssName=\"bg-backgroun
d/50 border-white/10 
focus:ring-primary/20
\" />\r\n            
                     
           
</FormControl>\r\n   
                     
                    
<FormMessage />\r\n  
                     
                 
</FormItem>\r\n      
                     
         )}\r\n      
                     
     />\r\n          
                  
</div>\r\n\r\n       
                     
<FormField\r\n       
                     
    control={form.con
trol}\r\n            
                    n
ame=\"serialNumber\"\
r\n                  
              
render={({ field }) 
=> (\r\n             
                     
  <FormItem>\r\n     
                     
              
<FormLabel>Serial Num
ber</FormLabel>\r\n  
                     
                 
<FormControl>\r\n    
                     
                   
<Input placeholder=\"
SN-123456\" 
{...field} className=
\"bg-background/50 
border-white/10 focus
:ring-primary/20\" 
/>\r\n               
                     
    
</FormControl>\r\n   
                     
                
<FormMessage />\r\n  
                     
             
</FormItem>\r\n      
                     
     )}\r\n          
                  
/>\r\n\r\n           
                 
<div 
className=\"grid 
grid-cols-2 
gap-6\">\r\n         
                     
  <FormField\r\n     
                     
          control={fo
rm.control}\r\n      
                     
         name=\"lastC
alibration\"\r\n     
                     
          render={({ 
field }) => (\r\n    
                     
               
<FormItem 
className=\"flex 
flex-col\">\r\n      
                     
                 
<FormLabel>Last Calib
ration</FormLabel>\r\
n                    
                     
   <Popover>\r\n     
                     
                     
 <PopoverTrigger 
asChild>\r\n         
                     
                     
 <FormControl>\r\n   
                     
                     
           
<Button\r\n          
                     
                     
        variant={\"ou
tline\"}\r\n         
                     
                     
         
className={cn(\r\n   
                     
                     
                   
\"w-full pl-3 
text-left 
font-normal 
bg-background/50 
border-white/10 hover
:bg-background/70\",\
r\n                  
                     
                     
    !field.value && \
"text-muted-foregroun
d\"\r\n              
                     
                     
    )}\r\n           
                     
                     
   >\r\n             
                     
                     
     {field.value ? 
(\r\n                
                     
                     
      
format(field.value, 
\"PPP\")\r\n         
                     
                     
         ) : (\r\n   
                     
                     
                   
<span>Pick a 
date</span>\r\n      
                     
                     
            )}\r\n   
                     
                     
               
<CalendarIcon 
className=\"ml-auto 
h-4 w-4 opacity-50\" 
/>\r\n               
                     
                    
</Button>\r\n        
                     
                     
  </FormControl>\r\n 
                     
                     
     </PopoverTrigger
>\r\n                
                     
           
<PopoverContent 
className=\"w-auto 
p-0 border-white/10 
bg-background/95 
backdrop-blur-xl\" 
align=\"start\">\r\n 
                     
                     
         
<Calendar\r\n        
                     
                     
      
mode=\"single\"\r\n  
                     
                     
            selected=
{field.value}\r\n    
                     
                     
          onSelect={h
andleLastCalChange}\r
\n                   
                     
                
disabled={(date) 
=>\r\n               
                     
                     
   date > new Date() 
|| date < new Date(\"
1900-01-01\")\r\n    
                     
                     
          }\r\n      
                     
                     
        
initialFocus\r\n     
                     
                     
     />\r\n          
                     
                 </Po
poverContent>\r\n    
                     
                   
</Popover>\r\n       
                     
                
<FormMessage />\r\n  
                     
                 
</FormItem>\r\n      
                     
         )}\r\n      
                     
     />\r\n\r\n      
                     
     <FormField\r\n  
                     
             control=
{form.control}\r\n   
                     
            name=\"ne
xtCalibration\"\r\n  
                     
             
render={({ field }) 
=> (\r\n             
                     
      <FormItem 
className=\"flex 
flex-col\">\r\n      
                     
                 
<FormLabel>Next Calib
ration</FormLabel>\r\
n                    
                     
   <Popover>\r\n     
                     
                     
 <PopoverTrigger 
asChild>\r\n         
                     
                     
 <FormControl>\r\n   
                     
                     
           
<Button\r\n          
                     
                     
        variant={\"ou
tline\"}\r\n         
                     
                     
         
className={cn(\r\n   
                     
                     
                   
\"w-full pl-3 
text-left 
font-normal 
bg-background/50 
border-white/10 hover
:bg-background/70\",\
r\n                  
                     
                     
    !field.value && \
"text-muted-foregroun
d\"\r\n              
                     
                     
    )}\r\n           
                     
                     
   >\r\n             
                     
                     
     {field.value ? 
(\r\n                
                     
                     
      
format(field.value, 
\"PPP\")\r\n         
                     
                     
         ) : (\r\n   
                     
                     
                   <s
pan>Auto-calculated</
span>\r\n            
                     
                     
      )}\r\n         
                     
                     
         
<CalendarIcon 
className=\"ml-auto 
h-4 w-4 opacity-50\" 
/>\r\n               
                     
                    
</Button>\r\n        
                     
                     
  </FormControl>\r\n 
                     
                     
     </PopoverTrigger
>\r\n                
                     
           
<PopoverContent 
className=\"w-auto 
p-0 border-white/10 
bg-background/95 
backdrop-blur-xl\" 
align=\"start\">\r\n 
                     
                     
         
<Calendar\r\n        
                     
                     
      
mode=\"single\"\r\n  
                     
                     
            selected=
{field.value}\r\n    
                     
                     
          onSelect={f
ield.onChange}\r\n   
                     
                     
           
initialFocus\r\n     
                     
                     
     />\r\n          
                     
                 </Po
poverContent>\r\n    
                     
                   
</Popover>\r\n       
                     
                
<FormMessage />\r\n  
                     
                 
</FormItem>\r\n      
                     
         )}\r\n      
                     
     />\r\n          
                  
</div>\r\n\r\n       
                     
<FormField\r\n       
                     
    control={form.con
trol}\r\n            
                    
name=\"status\"\r\n  
                     
         render={({ 
field }) => (\r\n    
                     
           
<FormItem>\r\n       
                     
            <FormLabe
l>Status</FormLabel>\
r\n                  
                     
 <Select onValueChang
e={field.onChange} de
faultValue={field.val
ue}>\r\n             
                     
          
<FormControl>\r\n    
                     
                     
  <SelectTrigger clas
sName=\"bg-background
/50 border-white/10 f
ocus:ring-primary/20\
">\r\n               
                     
                
<SelectValue 
placeholder=\"Select 
status\" />\r\n      
                     
                     
</SelectTrigger>\r\n 
                     
                     
 </FormControl>\r\n  
                     
                     
<SelectContent classN
ame=\"bg-background/9
5 backdrop-blur-xl bo
rder-white/10\">\r\n 
                     
                     
     <SelectItem valu
e=\"ACTIVE\">Active</
SelectItem>\r\n      
                     
                     
<SelectItem value=\"C
ALIBRATION_DUE\">Cali
bration 
Due</SelectItem>\r\n 
                     
                     
     <SelectItem 
value=\"REPAIR\">Out 
for Repair</SelectIte
m>\r\n               
                     
            
<SelectItem value=\"R
ETIRED\">Retired</Sel
ectItem>\r\n         
                     
              
</SelectContent>\r\n 
                     
                  
</Select>\r\n        
                     
           
<FormMessage />\r\n  
                     
             
</FormItem>\r\n      
                     
     )}\r\n          
                  
/>\r\n\r\n           
                 
<DialogFooter>\r\n   
                     
        <motion.div 
whileHover={{ scale: 
1.02 }} whileTap={{ 
scale: 0.98 }} 
className=\"w-full 
sm:w-auto\">\r\n     
                     
          <Button 
type=\"submit\" disab
led={form.formState.i
sSubmitting} 
className=\"w-full 
sm:w-auto bg-primary 
hover:bg-primary/90 
shadow-lg shadow-prim
ary/20\">\r\n        
                     
           {form.form
State.isSubmitting ? 
(\r\n                
                     
       <>\r\n        
                     
                   
<Loader2 
className=\"mr-2 h-4 
w-4 animate-spin\" 
/> Saving...\r\n     
                     
                  
</>\r\n              
                     
     ) : (\r\n       
                     
                
\"Save 
Equipment\"\r\n      
                     
             )}\r\n  
                     
             
</Button>\r\n        
                     
   </motion.div>\r\n 
                     
      
</DialogFooter>\r\n  
                     
 </form>\r\n         
           
</Form>\r\n          
      
</motion.div>\r\n    
        
</DialogContent>\r\n 
       </Dialog>\r\n 
   )\r\n}\r\n","usedD
eprecatedRules":[]},{
"filePath":"C:\\Users
\\shaun\\Antigrabity 
Workspace\\auditforec
aster\\src\\component
s\\assets\\fleet\\veh
icle-dialog.tsx","mes
sages":[{"ruleId":"@t
ypescript-eslint/no-e
xplicit-any","severit
y":2,"message":"Unexp
ected any. Specify a 
different type.","lin
e":44,"column":49,"no
deType":"TSAnyKeyword
","messageId":"unexpe
ctedAny","endLine":44
,"endColumn":52,"sugg
estions":[{"messageId
":"suggestUnknown","f
ix":{"range":[1351,13
54],"text":"unknown"}
,"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1351,1354],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":53,"colu
mn":41,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":53,"endColumn
":44,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1746,1749],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1746,1749],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":2,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"'use client'\r\n\r
\nimport { useState 
} from 
\"react\"\r\nimport 
{ useForm } from \"re
act-hook-form\"\r\nim
port { zodResolver } 
from \"@hookform/reso
lvers/zod\"\r\nimport
 { VehicleInput, 
VehicleSchema } from 
\"@/lib/schemas\"\r\n
import { useSync } 
from \"@/providers/sy
nc-provider\"\r\nimpo
rt { Button } from \"
@/components/ui/butto
n\"\r\nimport {\r\n  
  Dialog,\r\n    
DialogContent,\r\n   
 DialogDescription,\r
\n    
DialogFooter,\r\n    
DialogHeader,\r\n    
DialogTitle,\r\n    
DialogTrigger,\r\n} 
from \"@/components/u
i/dialog\"\r\nimport 
{\r\n    Form,\r\n   
 FormControl,\r\n    
FormField,\r\n    
FormItem,\r\n    
FormLabel,\r\n    
FormMessage,\r\n} 
from \"@/components/u
i/form\"\r\nimport { 
Input } from \"@/comp
onents/ui/input\"\r\n
import { Select, 
SelectContent, 
SelectItem, 
SelectTrigger, 
SelectValue } from \"
@/components/ui/selec
t\"\r\nimport { 
useToast } from \"@/c
omponents/ui/use-toas
t\"\r\nimport { Plus 
} from \"lucide-react
\"\r\n\r\ninterface 
VehicleDialogProps 
{\r\n    mode: 
\"create\" | 
\"edit\"\r\n    
vehicle?: 
VehicleInput & { id: 
string }\r\n    
users: { id: string; 
name: string | null 
}[]\r\n    trigger?: 
React.ReactNode\r\n}\
r\n\r\nexport 
function 
VehicleDialog({ 
mode, vehicle, 
users, trigger }: 
VehicleDialogProps) 
{\r\n    const 
[open, setOpen] = 
useState(false)\r\n  
  const { toast } = 
useToast()\r\n    
const { engine } = 
useSync()\r\n\r\n    
const form = useForm<
VehicleInput>({\r\n  
      resolver: zodRe
solver(VehicleSchema)
 as any,\r\n        
defaultValues: {\r\n 
           name: 
vehicle?.name || 
\"\",\r\n            
make: vehicle?.make 
|| \"\",\r\n         
   model: 
vehicle?.model || 
\"\",\r\n            
year: vehicle?.year 
|| new Date().getFull
Year(),\r\n          
  licensePlate: vehic
le?.licensePlate || 
\"\",\r\n            
vin: vehicle?.vin || 
\"\",\r\n            
mileage: 
vehicle?.mileage || 
0,\r\n            
status: 
(vehicle?.status as 
any) || 
\"ACTIVE\",\r\n      
      assignedTo: 
vehicle?.assignedTo 
|| \"\",\r\n         
   nextService: vehic
le?.nextService,\r\n 
       },\r\n    
})\r\n\r\n    async 
function 
onSubmit(data: 
VehicleInput) {\r\n  
      try {\r\n      
      if (mode === 
\"create\") {\r\n    
            await eng
ine.enqueue('CREATE',
 'vehicle', 
data)\r\n            
} else {\r\n         
       if 
(!vehicle?.id) 
return\r\n           
     await engine.enq
ueue('UPDATE', 
'vehicle', { 
...data, id: 
vehicle.id })\r\n    
        }\r\n\r\n    
        toast({\r\n  
              title: 
\"Saved\",\r\n       
         
description: 
\"Vehicle saved. 
Syncing in 
background...\",\r\n 
           })\r\n    
        
setOpen(false)\r\n   
         
form.reset()\r\n     
   } catch (error) 
{\r\n            cons
ole.error(\"Failed 
to enqueue:\", 
error)\r\n           
 toast({\r\n         
       variant: 
\"destructive\",\r\n 
               
title: 
\"Error\",\r\n       
         
description: 
\"Failed to save 
vehicle 
locally.\",\r\n      
      })\r\n        
}\r\n    }\r\n\r\n   
 return (\r\n        
<Dialog open={open} o
nOpenChange={setOpen}
>\r\n            
<DialogTrigger 
asChild>\r\n         
       {trigger || 
(\r\n                
    <Button className
=\"bg-orange-600 
hover:bg-orange-500 
text-white shadow-lg 
shadow-orange-500/20\
">\r\n               
         <Plus 
className=\"mr-2 h-4 
w-4\" /> Add 
Vehicle\r\n          
          
</Button>\r\n        
        )}\r\n       
     
</DialogTrigger>\r\n 
           
<DialogContent classN
ame=\"sm:max-w-[600px
] border-white/10 
bg-black/80 
backdrop-blur-xl 
text-white\">\r\n    
            
<DialogHeader>\r\n   
                 
<DialogTitle 
className=\"text-xl 
font-bold\">{mode 
=== \"create\" ? 
\"Add Vehicle\" : 
\"Edit Vehicle\"}</Di
alogTitle>\r\n       
             
<DialogDescription cl
assName=\"text-gray-4
00\">\r\n            
            Enter 
vehicle details and 
assignment.\r\n      
              </Dialo
gDescription>\r\n    
            
</DialogHeader>\r\n  
              <Form 
{...form}>\r\n       
             <form on
Submit={form.handleSu
bmit(onSubmit)} class
Name=\"space-y-4\">\r
\n                   
     <div 
className=\"grid 
grid-cols-2 
gap-4\">\r\n         
                   
<FormField\r\n       
                     
    control={form.con
trol}\r\n            
                    
name=\"name\"\r\n    
                     
       render={({ 
field }) => (\r\n    
                     
           
<FormItem>\r\n       
                     
            
<FormLabel className=
\"text-gray-300\">Nam
e</FormLabel>\r\n    
                     
               
<FormControl>\r\n    
                     
                   
<Input 
placeholder=\"Truck 
01\" {...field} class
Name=\"bg-white/5 
border-white/10 
text-white\" />\r\n  
                     
                 
</FormControl>\r\n   
                     
                
<FormMessage />\r\n  
                     
             
</FormItem>\r\n      
                     
     )}\r\n          
                  
/>\r\n               
             
<FormField\r\n       
                     
    control={form.con
trol}\r\n            
                    n
ame=\"licensePlate\"\
r\n                  
              
render={({ field }) 
=> (\r\n             
                     
  <FormItem>\r\n     
                     
              
<FormLabel className=
\"text-gray-300\">Lic
ense Plate</FormLabel
>\r\n                
                     
   <FormControl>\r\n 
                     
                     
 <Input placeholder=\
"ABC-123\" 
{...field} className=
\"bg-white/5 
border-white/10 
text-white\" />\r\n  
                     
                 
</FormControl>\r\n   
                     
                
<FormMessage />\r\n  
                     
             
</FormItem>\r\n      
                     
     )}\r\n          
                  
/>\r\n               
         
</div>\r\n\r\n       
                 
<div 
className=\"grid 
grid-cols-3 
gap-4\">\r\n         
                   
<FormField\r\n       
                     
    control={form.con
trol}\r\n            
                    
name=\"year\"\r\n    
                     
       render={({ 
field }) => (\r\n    
                     
           
<FormItem>\r\n       
                     
            
<FormLabel className=
\"text-gray-300\">Yea
r</FormLabel>\r\n    
                     
               
<FormControl>\r\n    
                     
                   
<Input 
type=\"number\" 
{...field} className=
\"bg-white/5 
border-white/10 
text-white\" />\r\n  
                     
                 
</FormControl>\r\n   
                     
                
<FormMessage />\r\n  
                     
             
</FormItem>\r\n      
                     
     )}\r\n          
                  
/>\r\n               
             
<FormField\r\n       
                     
    control={form.con
trol}\r\n            
                    
name=\"make\"\r\n    
                     
       render={({ 
field }) => (\r\n    
                     
           
<FormItem>\r\n       
                     
            
<FormLabel className=
\"text-gray-300\">Mak
e</FormLabel>\r\n    
                     
               
<FormControl>\r\n    
                     
                   
<Input 
placeholder=\"Ford\" 
{...field} className=
\"bg-white/5 
border-white/10 
text-white\" />\r\n  
                     
                 
</FormControl>\r\n   
                     
                
<FormMessage />\r\n  
                     
             
</FormItem>\r\n      
                     
     )}\r\n          
                  
/>\r\n               
             
<FormField\r\n       
                     
    control={form.con
trol}\r\n            
                    
name=\"model\"\r\n   
                     
        render={({ 
field }) => (\r\n    
                     
           
<FormItem>\r\n       
                     
            
<FormLabel className=
\"text-gray-300\">Mod
el</FormLabel>\r\n   
                     
                
<FormControl>\r\n    
                     
                   
<Input placeholder=\"
F-150\" {...field} cl
assName=\"bg-white/5 
border-white/10 
text-white\" />\r\n  
                     
                 
</FormControl>\r\n   
                     
                
<FormMessage />\r\n  
                     
             
</FormItem>\r\n      
                     
     )}\r\n          
                  
/>\r\n               
         
</div>\r\n\r\n       
                 
<div 
className=\"grid 
grid-cols-2 
gap-4\">\r\n         
                   
<FormField\r\n       
                     
    control={form.con
trol}\r\n            
                    
name=\"mileage\"\r\n 
                     
          render={({ 
field }) => (\r\n    
                     
           
<FormItem>\r\n       
                     
            
<FormLabel className=
\"text-gray-300\">Mil
eage</FormLabel>\r\n 
                     
                  
<FormControl>\r\n    
                     
                   
<Input 
type=\"number\" 
{...field} className=
\"bg-white/5 
border-white/10 
text-white\" />\r\n  
                     
                 
</FormControl>\r\n   
                     
                
<FormMessage />\r\n  
                     
             
</FormItem>\r\n      
                     
     )}\r\n          
                  
/>\r\n               
             
<FormField\r\n       
                     
    control={form.con
trol}\r\n            
                    
name=\"status\"\r\n  
                     
         render={({ 
field }) => (\r\n    
                     
           
<FormItem>\r\n       
                     
            
<FormLabel className=
\"text-gray-300\">Sta
tus</FormLabel>\r\n  
                     
                 
<Select onValueChange
={field.onChange} def
aultValue={field.valu
e}>\r\n              
                     
         
<FormControl>\r\n    
                     
                     
  <SelectTrigger clas
sName=\"bg-white/5 
border-white/10 
text-white\">\r\n    
                     
                     
      <SelectValue 
placeholder=\"Select 
status\" />\r\n      
                     
                     
</SelectTrigger>\r\n 
                     
                     
 </FormControl>\r\n  
                     
                     
<SelectContent>\r\n  
                     
                     
    <SelectItem value
=\"ACTIVE\">Active</S
electItem>\r\n       
                     
                    
<SelectItem value=\"M
AINTENANCE\">Maintena
nce</SelectItem>\r\n 
                     
                     
     <SelectItem valu
e=\"RETIRED\">Retired
</SelectItem>\r\n    
                     
                   
</SelectContent>\r\n 
                     
                  
</Select>\r\n        
                     
           
<FormMessage />\r\n  
                     
             
</FormItem>\r\n      
                     
     )}\r\n          
                  
/>\r\n               
         
</div>\r\n\r\n       
                 
<div 
className=\"grid 
grid-cols-2 
gap-4\">\r\n         
                   
<FormField\r\n       
                     
    control={form.con
trol}\r\n            
                    n
ame=\"assignedTo\"\r\
n                    
            
render={({ field }) 
=> (\r\n             
                     
  <FormItem>\r\n     
                     
              
<FormLabel className=
\"text-gray-300\">Ass
igned 
To</FormLabel>\r\n   
                     
                
<Select onValueChange
={field.onChange} def
aultValue={field.valu
e || \"\"}>\r\n      
                     
                 
<FormControl>\r\n    
                     
                     
  <SelectTrigger clas
sName=\"bg-white/5 
border-white/10 
text-white\">\r\n    
                     
                     
      <SelectValue pl
aceholder=\"Unassigne
d\" />\r\n           
                     
                
</SelectTrigger>\r\n 
                     
                     
 </FormControl>\r\n  
                     
                     
<SelectContent>\r\n  
                     
                     
    <SelectItem value
=\"unassigned\">Unass
igned</SelectItem>\r\
n                    
                     
       
{users.map(user => 
(\r\n                
                     
               
<SelectItem 
key={user.id} value={
user.id}>{user.name}<
/SelectItem>\r\n     
                     
                     
 ))}\r\n             
                     
          
</SelectContent>\r\n 
                     
                  
</Select>\r\n        
                     
           
<FormMessage />\r\n  
                     
             
</FormItem>\r\n      
                     
     )}\r\n          
                  
/>\r\n               
             
<FormField\r\n       
                     
    control={form.con
trol}\r\n            
                    n
ame=\"nextService\"\r
\n                   
             
render={({ field }) 
=> (\r\n             
                     
  <FormItem>\r\n     
                     
              
<FormLabel className=
\"text-gray-300\">Nex
t Service</FormLabel>
\r\n                 
                     
  <FormControl>\r\n  
                     
                     
<Input\r\n           
                     
                
type=\"date\"\r\n    
                     
                     
  {...field}\r\n     
                     
                     
 value={field.value 
? new Date(field.valu
e).toISOString().spli
t('T')[0] : ''}\r\n  
                     
                     
    onChange={(e) => 
field.onChange(e.targ
et.value ? new 
Date(e.target.value) 
: undefined)}\r\n    
                     
                     
  className=\"bg-whit
e/5 border-white/10 
text-white\"\r\n     
                     
                  
/>\r\n               
                     
    
</FormControl>\r\n   
                     
                
<FormMessage />\r\n  
                     
             
</FormItem>\r\n      
                     
     )}\r\n          
                  
/>\r\n               
         
</div>\r\n\r\n       
                 
<DialogFooter>\r\n   
                     
    <Button 
type=\"submit\" disab
led={form.formState.i
sSubmitting} 
className=\"w-full 
bg-orange-600 
hover:bg-orange-500 
text-white shadow-lg 
shadow-orange-500/20\
">\r\n               
                 {for
m.formState.isSubmitt
ing ? \"Saving...\" 
: \"Save 
Vehicle\"}\r\n       
                     
</Button>\r\n        
                
</DialogFooter>\r\n  
                  
</form>\r\n          
      </Form>\r\n    
        
</DialogContent>\r\n 
       </Dialog>\r\n 
   )\r\n}\r\n","usedD
eprecatedRules":[]},{
"filePath":"C:\\Users
\\shaun\\Antigrabity 
Workspace\\auditforec
aster\\src\\component
s\\contractors\\subco
ntractor-actions.tsx"
,"messages":[{"ruleId
":"@typescript-eslint
/no-unused-vars","sev
erity":1,"message":"'
DropdownMenu' is 
defined but never use
d.","line":6,"column"
:5,"nodeType":null,"m
essageId":"unusedVar"
,"endLine":6,"endColu
mn":17},{"ruleId":"@t
ypescript-eslint/no-u
nused-vars","severity
":1,"message":"'Dropd
ownMenuContent' is 
defined but never use
d.","line":7,"column"
:5,"nodeType":null,"m
essageId":"unusedVar"
,"endLine":7,"endColu
mn":24},{"ruleId":"@t
ypescript-eslint/no-u
nused-vars","severity
":1,"message":"'Dropd
ownMenuItem' is 
defined but never use
d.","line":8,"column"
:5,"nodeType":null,"m
essageId":"unusedVar"
,"endLine":8,"endColu
mn":21},{"ruleId":"@t
ypescript-eslint/no-u
nused-vars","severity
":1,"message":"'Dropd
ownMenuLabel' is 
defined but never use
d.","line":9,"column"
:5,"nodeType":null,"m
essageId":"unusedVar"
,"endLine":9,"endColu
mn":22},{"ruleId":"@t
ypescript-eslint/no-u
nused-vars","severity
":1,"message":"'Dropd
ownMenuSeparator' is 
defined but never use
d.","line":10,"column
":5,"nodeType":null,"
messageId":"unusedVar
","endLine":10,"endCo
lumn":26},{"ruleId":"
@typescript-eslint/no
-unused-vars","severi
ty":1,"message":"'Dro
pdownMenuTrigger' is 
defined but never use
d.","line":11,"column
":5,"nodeType":null,"
messageId":"unusedVar
","endLine":11,"endCo
lumn":24},{"ruleId":"
@typescript-eslint/no
-unused-vars","severi
ty":1,"message":"'Mor
eHorizontal' is 
defined but never use
d.","line":13,"column
":10,"nodeType":null,
"messageId":"unusedVa
r","endLine":13,"endC
olumn":24},{"ruleId":
"@typescript-eslint/n
o-unused-vars","sever
ity":1,"message":"'er
ror' is defined but 
never used.","line":4
5,"column":18,"nodeTy
pe":null,"messageId":
"unusedVar","endLine"
:45,"endColumn":23}],
"suppressedMessages":
[],"errorCount":0,"fa
talErrorCount":0,"war
ningCount":8,"fixable
ErrorCount":0,"fixabl
eWarningCount":0,"sou
rce":"'use client'\r\
n\r\nimport { 
useState } from 
\"react\"\r\nimport 
{ Button } from \"@/c
omponents/ui/button\"
\r\nimport {\r\n    
DropdownMenu,\r\n    
DropdownMenuContent,\
r\n    DropdownMenuIt
em,\r\n    DropdownMe
nuLabel,\r\n    Dropd
ownMenuSeparator,\r\n
    DropdownMenuTrigg
er,\r\n} from \"@/com
ponents/ui/dropdown-m
enu\"\r\nimport { 
MoreHorizontal, 
Pencil, Trash } from 
\"lucide-react\"\r\ni
mport { 
SubcontractorDialog 
} from \"./subcontrac
tor-dialog\"\r\nimpor
t { 
deleteSubcontractor 
} from \"@/app/action
s/contractors\"\r\nim
port { useToast } 
from \"@/components/u
i/use-toast\"\r\nimpo
rt { 
SubcontractorInput } 
from \"@/lib/schemas\
"\r\n\r\ninterface Su
bcontractorActionsPro
ps {\r\n    
subcontractor: 
SubcontractorInput & 
{ id: string 
}\r\n}\r\n\r\nexport 
function Subcontracto
rActions({ 
subcontractor }: Subc
ontractorActionsProps
) {\r\n    const { 
toast } = 
useToast()\r\n    
const [isDeleting, 
setIsDeleting] = useS
tate(false)\r\n\r\n  
  async function 
handleDelete() {\r\n 
       if 
(!confirm(\"Are you 
sure you want to 
delete this 
subcontractor?\")) 
return\r\n\r\n       
 setIsDeleting(true)\
r\n        try {\r\n 
           const 
result = await delete
Subcontractor(subcont
ractor.id)\r\n       
     if 
(result.success) 
{\r\n                
toast({\r\n          
          title: 
\"Success\",\r\n     
               
description: 
result.message,\r\n  
              })\r\n 
           } else 
{\r\n                
toast({\r\n          
          variant: 
\"destructive\",\r\n 
                   
title: 
\"Error\",\r\n       
             
description: 
result.message,\r\n  
              })\r\n 
           }\r\n     
   } catch (error) 
{\r\n            
toast({\r\n          
      variant: 
\"destructive\",\r\n 
               
title: 
\"Error\",\r\n       
         
description: 
\"Failed to delete su
bcontractor.\",\r\n  
          })\r\n     
   } finally {\r\n   
         setIsDeletin
g(false)\r\n        
}\r\n    }\r\n\r\n   
 return (\r\n        
<div 
className=\"flex 
items-center 
gap-2\">\r\n         
   <SubcontractorDial
og\r\n               
 mode=\"edit\"\r\n   
             subcontr
actor={subcontractor}
\r\n                
trigger={\r\n        
            <Button 
variant=\"ghost\" 
size=\"icon\">\r\n   
                     
<Pencil 
className=\"h-4 
w-4\" />\r\n         
           
</Button>\r\n        
        }\r\n        
    />\r\n           
 <Button 
variant=\"ghost\" 
size=\"icon\" onClick
={handleDelete} disab
led={isDeleting}>\r\n
                
<Trash 
className=\"h-4 w-4 
text-destructive\" 
/>\r\n            
</Button>\r\n        
</div>\r\n    )\r\n}\
r\n","usedDeprecatedR
ules":[]},{"filePath"
:"C:\\Users\\shaun\\A
ntigrabity Workspace\
\auditforecaster\\src
\\components\\contrac
tors\\subcontractor-d
ialog.tsx","messages"
:[{"ruleId":"@typescr
ipt-eslint/no-unused-
vars","severity":1,"m
essage":"'Pencil' is 
defined but never use
d.","line":35,"column
":16,"nodeType":null,
"messageId":"unusedVa
r","endLine":35,"endC
olumn":22},{"ruleId":
"@typescript-eslint/n
o-unused-vars","sever
ity":1,"message":"'er
ror' is defined but 
never used.","line":8
0,"column":18,"nodeTy
pe":null,"messageId":
"unusedVar","endLine"
:80,"endColumn":23}],
"suppressedMessages":
[],"errorCount":0,"fa
talErrorCount":0,"war
ningCount":2,"fixable
ErrorCount":0,"fixabl
eWarningCount":0,"sou
rce":"'use client'\r\
n\r\nimport { 
useState } from 
\"react\"\r\nimport 
{ useForm, Resolver 
} from \"react-hook-f
orm\"\r\nimport { 
zodResolver } from \"
@hookform/resolvers/z
od\"\r\nimport { 
SubcontractorInput, 
SubcontractorSchema 
} from \"@/lib/schema
s\"\r\nimport { 
createSubcontractor, 
updateSubcontractor 
} from \"@/app/action
s/contractors\"\r\nim
port { Button } from 
\"@/components/ui/but
ton\"\r\nimport 
{\r\n    Dialog,\r\n 
   
DialogContent,\r\n   
 DialogDescription,\r
\n    
DialogFooter,\r\n    
DialogHeader,\r\n    
DialogTitle,\r\n    
DialogTrigger,\r\n} 
from \"@/components/u
i/dialog\"\r\nimport 
{\r\n    Form,\r\n   
 FormControl,\r\n    
FormField,\r\n    
FormItem,\r\n    
FormLabel,\r\n    
FormMessage,\r\n} 
from \"@/components/u
i/form\"\r\nimport { 
Input } from \"@/comp
onents/ui/input\"\r\n
import {\r\n    
Select,\r\n    
SelectContent,\r\n   
 SelectItem,\r\n    
SelectTrigger,\r\n   
 SelectValue,\r\n} 
from \"@/components/u
i/select\"\r\nimport 
{ useToast } from \"@
/components/ui/use-to
ast\"\r\nimport { 
Plus, Pencil } from \
"lucide-react\"\r\n\r
\ninterface Subcontra
ctorDialogProps 
{\r\n    mode: 
\"create\" | 
\"edit\"\r\n    
subcontractor?: 
SubcontractorInput & 
{ id: string }\r\n   
 trigger?: React.Reac
tNode\r\n}\r\n\r\nexp
ort function Subcontr
actorDialog({ mode, 
subcontractor, 
trigger }: Subcontrac
torDialogProps) 
{\r\n    const 
[open, setOpen] = 
useState(false)\r\n  
  const { toast } = 
useToast()\r\n\r\n   
 const form = useForm
<SubcontractorInput>(
{\r\n        
resolver: zodResolver
(SubcontractorSchema)
 as Resolver<Subcontr
actorInput>,\r\n     
   defaultValues: 
{\r\n            
name: 
subcontractor?.name 
|| \"\",\r\n         
   type: 
(subcontractor?.type 
=== \"Company\" ? 
\"Company\" : 
\"Individual\") as 
\"Individual\" | 
\"Company\",\r\n     
       status: (subco
ntractor?.status === 
\"INACTIVE\" ? 
\"INACTIVE\" : 
\"ACTIVE\") as 
\"ACTIVE\" | 
\"INACTIVE\",\r\n    
    },\r\n    
})\r\n\r\n    async 
function 
onSubmit(data: 
SubcontractorInput) 
{\r\n        try 
{\r\n            let 
result\r\n           
 if (mode === 
\"create\") {\r\n    
            result = 
await createSubcontra
ctor(data)\r\n       
     } else {\r\n    
            if 
(!subcontractor?.id) 
return\r\n           
     result = await u
pdateSubcontractor(su
bcontractor.id, 
data)\r\n            
}\r\n\r\n            
if (result.success) 
{\r\n                
toast({\r\n          
          title: 
\"Success\",\r\n     
               
description: 
result.message,\r\n  
              })\r\n 
               
setOpen(false)\r\n   
             
form.reset()\r\n     
       } else {\r\n  
              
toast({\r\n          
          variant: 
\"destructive\",\r\n 
                   
title: 
\"Error\",\r\n       
             
description: 
result.message,\r\n  
              })\r\n 
           }\r\n     
   } catch (error) 
{\r\n            
toast({\r\n          
      variant: 
\"destructive\",\r\n 
               
title: 
\"Error\",\r\n       
         
description: 
\"Something went 
wrong. Please try 
again.\",\r\n        
    })\r\n        
}\r\n    }\r\n\r\n   
 return (\r\n        
<Dialog open={open} o
nOpenChange={setOpen}
>\r\n            
<DialogTrigger 
asChild>\r\n         
       {trigger || 
(\r\n                
    <Button>\r\n     
                   
<Plus 
className=\"mr-2 h-4 
w-4\" /> Add 
Subcontractor\r\n    
                
</Button>\r\n        
        )}\r\n       
     
</DialogTrigger>\r\n 
           
<DialogContent classN
ame=\"sm:max-w-[425px
]\">\r\n             
   
<DialogHeader>\r\n   
                 
<DialogTitle>{mode 
=== \"create\" ? 
\"Add 
Subcontractor\" : 
\"Edit Subcontractor\
"}</DialogTitle>\r\n 
                   <D
ialogDescription>\r\n
                     
   {mode === 
\"create\"\r\n       
                     
? \"Add a new 
subcontractor to 
your network.\"\r\n  
                     
     : \"Update the 
subcontractor's 
details.\"}\r\n      
              </Dialo
gDescription>\r\n    
            
</DialogHeader>\r\n  
              <Form 
{...form}>\r\n       
             <form on
Submit={form.handleSu
bmit(onSubmit)} class
Name=\"space-y-4\">\r
\n                   
     <FormField\r\n  
                     
     control={form.co
ntrol}\r\n           
                 
name=\"name\"\r\n    
                     
   render={({ field 
}) => (\r\n          
                     
 <FormItem>\r\n      
                     
         <FormLabel>N
ame</FormLabel>\r\n  
                     
             
<FormControl>\r\n    
                     
               
<Input 
placeholder=\"John 
Doe or Acme Corp\" 
{...field} />\r\n    
                     
           
</FormControl>\r\n   
                     
            
<FormMessage />\r\n  
                     
         
</FormItem>\r\n      
                     
 )}\r\n              
          />\r\n     
                   
<FormField\r\n       
                     
control={form.control
}\r\n                
            
name=\"type\"\r\n    
                     
   render={({ field 
}) => (\r\n          
                     
 <FormItem>\r\n      
                     
         <FormLabel>T
ype</FormLabel>\r\n  
                     
             <Select 
onValueChange={field.
onChange} defaultValu
e={field.value}>\r\n 
                     
                  
<FormControl>\r\n    
                     
                   
<SelectTrigger>\r\n  
                     
                     
    <SelectValue 
placeholder=\"Select 
a type\" />\r\n      
                     
                 
</SelectTrigger>\r\n 
                     
                  
</FormControl>\r\n   
                     
                
<SelectContent>\r\n  
                     
                     
<SelectItem value=\"I
ndividual\">Individua
l</SelectItem>\r\n   
                     
                    
<SelectItem value=\"C
ompany\">Company</Sel
ectItem>\r\n         
                     
          
</SelectContent>\r\n 
                     
              
</Select>\r\n        
                     
       <FormMessage 
/>\r\n               
                 
</FormItem>\r\n      
                     
 )}\r\n              
          />\r\n     
                   
<FormField\r\n       
                     
control={form.control
}\r\n                
            
name=\"email\"\r\n   
                     
    render={({ field 
}) => (\r\n          
                     
 <FormItem>\r\n      
                     
         <FormLabel>E
mail</FormLabel>\r\n 
                     
              
<FormControl>\r\n    
                     
               
<Input placeholder=\"
email@example.com\" 
{...field} />\r\n    
                     
           
</FormControl>\r\n   
                     
            
<FormMessage />\r\n  
                     
         
</FormItem>\r\n      
                     
 )}\r\n              
          />\r\n     
                   
<FormField\r\n       
                     
control={form.control
}\r\n                
            
name=\"phone\"\r\n   
                     
    render={({ field 
}) => (\r\n          
                     
 <FormItem>\r\n      
                     
         <FormLabel>P
hone</FormLabel>\r\n 
                     
              
<FormControl>\r\n    
                     
               
<Input 
placeholder=\"(555) 
555-5555\" 
{...field} />\r\n    
                     
           
</FormControl>\r\n   
                     
            
<FormMessage />\r\n  
                     
         
</FormItem>\r\n      
                     
 )}\r\n              
          />\r\n     
                   
<DialogFooter>\r\n   
                     
    <Button 
type=\"submit\" disab
led={form.formState.i
sSubmitting}>\r\n    
                     
       {form.formStat
e.isSubmitting ? 
\"Saving...\" : 
\"Save\"}\r\n        
                    
</Button>\r\n        
                
</DialogFooter>\r\n  
                  
</form>\r\n          
      </Form>\r\n    
        
</DialogContent>\r\n 
       </Dialog>\r\n 
   )\r\n}\r\n","usedD
eprecatedRules":[]},{
"filePath":"C:\\Users
\\shaun\\Antigrabity 
Workspace\\auditforec
aster\\src\\component
s\\equipment-form.tsx
","messages":[{"ruleI
d":"@typescript-eslin
t/no-explicit-any","s
everity":2,"message":
"Unexpected any. 
Specify a different t
ype.","line":53,"colu
mn":21,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":53,"endColumn
":24,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1435,1438],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1435,1438],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":1,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"'use client'\r\n\r
\nimport { useState 
} from 
\"react\"\r\nimport 
{ Button } from \"@/c
omponents/ui/button\"
\r\nimport { Input } 
from \"@/components/u
i/input\"\r\nimport 
{ Label } from \"@/co
mponents/ui/label\"\r
\nimport { Textarea 
} from \"@/components
/ui/textarea\"\r\nimp
ort {\r\n    
Select,\r\n    
SelectContent,\r\n   
 SelectItem,\r\n    
SelectTrigger,\r\n   
 SelectValue,\r\n} 
from \"@/components/u
i/select\"\r\nimport 
{ createEquipment, 
updateEquipment } 
from \"@/app/actions/
equipment\"\r\nimport
 { useToast } from \"
@/components/ui/use-t
oast\"\r\nimport { 
useRouter } from \"ne
xt/navigation\"\r\nim
port { format } from 
\"date-fns\"\r\n\r\nt
ype Equipment = 
{\r\n    id: 
string\r\n    name: 
string\r\n    type: 
string\r\n    
serialNumber: 
string\r\n    
status: string\r\n   
 lastCalibration: 
Date | null\r\n    
nextCalibration: 
Date | null\r\n    
assignedTo: string | 
null\r\n    notes: 
string | null\r\n}\r\
n\r\ntype User = 
{\r\n    id: 
string\r\n    name: 
string | null\r\n}\r\
n\r\ninterface 
EquipmentFormProps 
{\r\n    equipment?: 
Equipment\r\n    
users: User[]\r\n    
onSuccess: () => void
\r\n}\r\n\r\nexport 
function 
EquipmentForm({ 
equipment, users, 
onSuccess }: 
EquipmentFormProps) 
{\r\n    const 
[isLoading, 
setIsLoading] = 
useState(false)\r\n  
  const { toast } = 
useToast()\r\n    
const router = 
useRouter()\r\n\r\n  
  async function 
handleSubmit(event: R
eact.FormEvent<HTMLFo
rmElement>) {\r\n    
    event.preventDefa
ult()\r\n        setI
sLoading(true)\r\n\r\
n        const 
formData = new FormDa
ta(event.currentTarge
t)\r\n        const 
data: any = {\r\n    
        name: formDat
a.get(\"name\"),\r\n 
           type: form
Data.get(\"type\"),\r
\n            
serialNumber: formDat
a.get(\"serialNumber\
"),\r\n            
status: formData.get(
\"status\"),\r\n     
       notes: formDat
a.get(\"notes\"),\r\n
        }\r\n\r\n    
    const lastCal = f
ormData.get(\"lastCal
ibration\")\r\n      
  if (lastCal) 
data.lastCalibration 
= new Date(lastCal 
as string)\r\n\r\n   
     const nextCal = 
formData.get(\"nextCa
libration\")\r\n     
   if (nextCal) 
data.nextCalibration 
= new Date(nextCal 
as string)\r\n\r\n   
     try {\r\n       
     const result = 
equipment\r\n        
        ? await updat
eEquipment(equipment.
id, data)\r\n        
        : await creat
eEquipment(data)\r\n\
r\n            
toast({\r\n          
      title: 
result.message,\r\n  
              
variant: result.messa
ge.includes('Failed')
 ? 'destructive' : 
'default'\r\n        
    })\r\n\r\n       
     if (!result.mess
age.includes('Failed'
)) {\r\n             
   onSuccess()\r\n   
             
router.refresh()\r\n 
           }\r\n     
   } catch {\r\n     
       toast({\r\n   
             title: 
\"An error 
occurred\",\r\n      
          
description: 
\"Please try again 
later\",\r\n         
       variant: 
\"destructive\"\r\n  
          })\r\n     
   } finally {\r\n   
         setIsLoading
(false)\r\n        
}\r\n    }\r\n\r\n   
 return (\r\n        
<form onSubmit={handl
eSubmit} className=\"
space-y-4\">\r\n     
       <div 
className=\"grid 
grid-cols-2 
gap-4\">\r\n         
       <div className
=\"space-y-2\">\r\n  
                  
<Label htmlFor=\"name
\">Equipment 
Name</Label>\r\n     
               
<Input id=\"name\" 
name=\"name\" default
Value={equipment?.nam
e} required placehold
er=\"Retrotec 5000\" 
/>\r\n               
 </div>\r\n          
      <div className=
\"space-y-2\">\r\n   
                 
<Label htmlFor=\"type
\">Type</Label>\r\n  
                  
<Select 
name=\"type\" default
Value={equipment?.typ
e || \"Blower 
Door\"}>\r\n         
               
<SelectTrigger>\r\n  
                     
     <SelectValue 
placeholder=\"Select 
type\" />\r\n        
                
</SelectTrigger>\r\n 
                     
  
<SelectContent>\r\n  
                     
     <SelectItem 
value=\"Blower 
Door\">Blower Door</S
electItem>\r\n       
                     
<SelectItem 
value=\"Duct 
Blaster\">Duct Blaste
r</SelectItem>\r\n   
                     
    <SelectItem 
value=\"Infrared 
Camera\">Infrared Cam
era</SelectItem>\r\n 
                     
      <SelectItem 
value=\"Combustion An
alyzer\">Combustion A
nalyzer</SelectItem>\
r\n                  
          
<SelectItem value=\"O
ther\">Other</SelectI
tem>\r\n             
           
</SelectContent>\r\n 
                   
</Select>\r\n        
        </div>\r\n   
         
</div>\r\n\r\n       
     <div 
className=\"grid 
grid-cols-2 
gap-4\">\r\n         
       <div className
=\"space-y-2\">\r\n  
                  
<Label htmlFor=\"seri
alNumber\">Serial 
Number</Label>\r\n   
                 
<Input 
id=\"serialNumber\" n
ame=\"serialNumber\" 
defaultValue={equipme
nt?.serialNumber} 
required placeholder=
\"SN-12345\" />\r\n  
              
</div>\r\n           
     <div className=\
"space-y-2\">\r\n    
                
<Label htmlFor=\"stat
us\">Status</Label>\r
\n                   
 <Select 
name=\"status\" defau
ltValue={equipment?.s
tatus || 
\"ACTIVE\"}>\r\n     
                   
<SelectTrigger>\r\n  
                     
     <SelectValue 
placeholder=\"Select 
status\" />\r\n      
                  
</SelectTrigger>\r\n 
                     
  
<SelectContent>\r\n  
                     
     <SelectItem valu
e=\"ACTIVE\">Active</
SelectItem>\r\n      
                     
 <SelectItem value=\"
CALIBRATION_DUE\">Cal
ibration 
Due</SelectItem>\r\n 
                     
      <SelectItem 
value=\"REPAIR\">In R
epair</SelectItem>\r\
n                    
        <SelectItem v
alue=\"RETIRED\">Reti
red</SelectItem>\r\n 
                     
  
</SelectContent>\r\n 
                   
</Select>\r\n        
        </div>\r\n   
         
</div>\r\n\r\n       
     <div 
className=\"grid 
grid-cols-2 
gap-4\">\r\n         
       <div className
=\"space-y-2\">\r\n  
                  
<Label htmlFor=\"last
Calibration\">Last Ca
libration</Label>\r\n
                    
<Input\r\n           
             id=\"las
tCalibration\"\r\n   
                     
name=\"lastCalibratio
n\"\r\n              
          
type=\"date\"\r\n    
                    d
efaultValue={equipmen
t?.lastCalibration ? 
format(new Date(equip
ment.lastCalibration)
, 'yyyy-MM-dd') : 
''}\r\n              
      />\r\n         
       </div>\r\n    
            <div clas
sName=\"space-y-2\">\
r\n                  
  <Label htmlFor=\"ne
xtCalibration\">Next 
Calibration 
Due</Label>\r\n      
              
<Input\r\n           
             id=\"nex
tCalibration\"\r\n   
                     
name=\"nextCalibratio
n\"\r\n              
          
type=\"date\"\r\n    
                    d
efaultValue={equipmen
t?.nextCalibration ? 
format(new Date(equip
ment.nextCalibration)
, 'yyyy-MM-dd') : 
''}\r\n              
      />\r\n         
       </div>\r\n    
        
</div>\r\n\r\n       
     <div className=\
"space-y-2\">\r\n    
            <Label ht
mlFor=\"assignedTo\">
Assigned 
To</Label>\r\n       
         <Select 
name=\"assignedTo\" d
efaultValue={equipmen
t?.assignedTo || 
\"unassigned\"}>\r\n 
                   
<SelectTrigger>\r\n  
                     
 <SelectValue 
placeholder=\"Select 
user\" />\r\n        
            
</SelectTrigger>\r\n 
                   
<SelectContent>\r\n  
                     
 <SelectItem value=\"
unassigned\">Unassign
ed</SelectItem>\r\n  
                     
 {users.map((user) 
=> (\r\n             
               
<SelectItem 
key={user.id} 
value={user.id}>\r\n 
                     
          
{user.name}\r\n      
                     
 </SelectItem>\r\n   
                     
))}\r\n              
      
</SelectContent>\r\n 
               
</Select>\r\n        
    </div>\r\n\r\n   
         <div classNa
me=\"space-y-2\">\r\n
                
<Label htmlFor=\"note
s\">Notes</Label>\r\n
                
<Textarea 
id=\"notes\" 
name=\"notes\" defaul
tValue={equipment?.no
tes || ''} placeholde
r=\"Additional 
notes...\" />\r\n    
        
</div>\r\n\r\n       
     <div 
className=\"flex 
justify-end gap-2 
pt-4\">\r\n          
      <Button 
type=\"button\" 
variant=\"outline\" o
nClick={onSuccess}>Ca
ncel</Button>\r\n    
            <Button 
type=\"submit\" disab
led={isLoading}>\r\n 
                   
{isLoading ? 
\"Saving...\" : 
(equipment ? 
\"Update Equipment\" 
: \"Add 
Equipment\")}\r\n    
            
</Button>\r\n        
    </div>\r\n       
 </form>\r\n    )\r\n
}\r\n","usedDeprecate
dRules":[]},{"filePat
h":"C:\\Users\\shaun\
\Antigrabity Workspac
e\\auditforecaster\\s
rc\\components\\jobs\
\job-dialog.tsx","mes
sages":[{"ruleId":"@t
ypescript-eslint/no-e
xplicit-any","severit
y":2,"message":"Unexp
ected any. Specify a 
different type.","lin
e":43,"column":45,"no
deType":"TSAnyKeyword
","messageId":"unexpe
ctedAny","endLine":43
,"endColumn":48,"sugg
estions":[{"messageId
":"suggestUnknown","f
ix":{"range":[1312,13
15],"text":"unknown"}
,"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1312,1315],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":1,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"'use client'\r\n\r
\nimport { useState 
} from 
\"react\"\r\nimport 
{ useForm } from \"re
act-hook-form\"\r\nim
port { zodResolver } 
from \"@hookform/reso
lvers/zod\"\r\nimport
 { JobInput, 
JobSchema } from \"@/
lib/schemas\"\r\nimpo
rt { useSync } from \
"@/providers/sync-pro
vider\"\r\nimport { 
Button } from \"@/com
ponents/ui/button\"\r
\nimport {\r\n    
Dialog,\r\n    
DialogContent,\r\n   
 DialogDescription,\r
\n    
DialogFooter,\r\n    
DialogHeader,\r\n    
DialogTitle,\r\n    
DialogTrigger,\r\n} 
from \"@/components/u
i/dialog\"\r\nimport 
{\r\n    Form,\r\n   
 FormControl,\r\n    
FormField,\r\n    
FormItem,\r\n    
FormLabel,\r\n    
FormMessage,\r\n} 
from \"@/components/u
i/form\"\r\nimport { 
Input } from \"@/comp
onents/ui/input\"\r\n
import { Select, 
SelectContent, 
SelectItem, 
SelectTrigger, 
SelectValue } from \"
@/components/ui/selec
t\"\r\nimport { 
useToast } from \"@/c
omponents/ui/use-toas
t\"\r\nimport { 
PlusCircle } from \"l
ucide-react\"\r\nimpo
rt { Builder, User } 
from \"@prisma/client
\"\r\n\r\ninterface 
JobDialogProps {\r\n 
   builders: 
Builder[]\r\n    
inspectors: 
Pick<User, 'id' | 
'name' | 'email' | 
'image' | 'role'>[]\r
\n}\r\n\r\nexport 
function JobDialog({ 
builders, inspectors 
}: JobDialogProps) 
{\r\n    const 
[open, setOpen] = 
useState(false)\r\n  
  const { toast } = 
useToast()\r\n    
const { engine } = 
useSync()\r\n\r\n    
const form = useForm<
JobInput>({\r\n      
  resolver: zodResolv
er(JobSchema) as 
any,\r\n        
defaultValues: {\r\n 
           status: 
\"PENDING\"\r\n      
  },\r\n    
})\r\n\r\n    async 
function 
onSubmit(data: 
JobInput) {\r\n      
  try {\r\n          
  console.log('JobDia
log: Enqueuing 
job...')\r\n         
   await engine.enque
ue('CREATE', 'job', 
data)\r\n            
console.log('JobDialo
g: Job enqueued succe
ssfully')\r\n\r\n    
        toast({\r\n  
              title: 
\"Scheduled\",\r\n   
             
description: \"Job 
scheduled. Syncing 
in 
background...\",\r\n 
           })\r\n    
        
setOpen(false)\r\n   
         
form.reset()\r\n     
   } catch (error) 
{\r\n            cons
ole.error(\"Failed 
to enqueue:\", 
error)\r\n           
 toast({\r\n         
       variant: 
\"destructive\",\r\n 
               
title: 
\"Error\",\r\n       
         
description: 
\"Failed to schedule 
job locally.\",\r\n  
          })\r\n     
   }\r\n    
}\r\n\r\n    return 
(\r\n        <Dialog 
open={open} onOpenCha
nge={setOpen}>\r\n   
         
<DialogTrigger 
asChild>\r\n         
       <Button classN
ame=\"bg-emerald-600 
hover:bg-emerald-500 
text-white shadow-lg 
shadow-emerald-500/20
\">\r\n              
      <PlusCircle 
className=\"mr-2 h-4 
w-4\" /> New Job\r\n 
               
</Button>\r\n        
    
</DialogTrigger>\r\n 
           
<DialogContent classN
ame=\"sm:max-w-[500px
] border-white/10 
bg-black/80 
backdrop-blur-xl 
text-white\">\r\n    
            
<DialogHeader>\r\n   
                 
<DialogTitle 
className=\"text-xl 
font-bold\">Schedule 
New Job</DialogTitle>
\r\n                 
   
<DialogDescription cl
assName=\"text-gray-4
00\">\r\n            
            Create a 
new inspection 
job.\r\n             
       </DialogDescri
ption>\r\n           
     
</DialogHeader>\r\n  
              <Form 
{...form}>\r\n       
             <form on
Submit={form.handleSu
bmit(onSubmit)} class
Name=\"space-y-4\">\r
\n                   
     <div 
className=\"grid 
grid-cols-2 
gap-4\">\r\n         
                   
<FormField\r\n       
                     
    control={form.con
trol}\r\n            
                    n
ame=\"lotNumber\"\r\n
                     
           
render={({ field }) 
=> (\r\n             
                     
  <FormItem>\r\n     
                     
              
<FormLabel className=
\"text-gray-300\">Lot
 Number</FormLabel>\r
\n                   
                     
<FormControl>\r\n    
                     
                   
<Input 
placeholder=\"123\" 
{...field} className=
\"bg-white/5 
border-white/10 
text-white\" />\r\n  
                     
                 
</FormControl>\r\n   
                     
                
<FormMessage />\r\n  
                     
             
</FormItem>\r\n      
                     
     )}\r\n          
                  
/>\r\n               
             
<FormField\r\n       
                     
    control={form.con
trol}\r\n            
                    
name=\"city\"\r\n    
                     
       render={({ 
field }) => (\r\n    
                     
           
<FormItem>\r\n       
                     
            
<FormLabel className=
\"text-gray-300\">Cit
y</FormLabel>\r\n    
                     
               
<FormControl>\r\n    
                     
                   
<Input placeholder=\"
Austin\" {...field} c
lassName=\"bg-white/5
 border-white/10 
text-white\" />\r\n  
                     
                 
</FormControl>\r\n   
                     
                
<FormMessage />\r\n  
                     
             
</FormItem>\r\n      
                     
     )}\r\n          
                  
/>\r\n               
         
</div>\r\n\r\n       
                 
<FormField\r\n       
                     
control={form.control
}\r\n                
            name=\"st
reetAddress\"\r\n    
                     
   render={({ field 
}) => (\r\n          
                     
 <FormItem>\r\n      
                     
         <FormLabel c
lassName=\"text-gray-
300\">Street Address<
/FormLabel>\r\n      
                     
         
<FormControl>\r\n    
                     
               
<Input 
placeholder=\"123 
Main St\" {...field} 
className=\"bg-white/
5 border-white/10 
text-white\" />\r\n  
                     
             
</FormControl>\r\n   
                     
            
<FormMessage />\r\n  
                     
         
</FormItem>\r\n      
                     
 )}\r\n              
          />\r\n\r\n 
                     
  <FormField\r\n     
                     
  control={form.contr
ol}\r\n              
              name=\"
builderId\"\r\n      
                     
 render={({ field }) 
=> (\r\n             
                   
<FormItem>\r\n       
                     
        <FormLabel cl
assName=\"text-gray-3
00\">Builder</FormLab
el>\r\n              
                     
 <Select onValueChang
e={field.onChange} de
faultValue={field.val
ue}>\r\n             
                     
      
<FormControl>\r\n    
                     
                   
<SelectTrigger classN
ame=\"bg-white/5 
border-white/10 
text-white\">\r\n    
                     
                     
  <SelectValue 
placeholder=\"Select 
Builder\" />\r\n     
                     
                  
</SelectTrigger>\r\n 
                     
                  
</FormControl>\r\n   
                     
                
<SelectContent>\r\n  
                     
                     
{builders.map(b => 
(\r\n                
                     
           
<SelectItem 
key={b.id} value={b.i
d}>{b.name}</SelectIt
em>\r\n              
                     
         ))}\r\n     
                     
              
</SelectContent>\r\n 
                     
              
</Select>\r\n        
                     
       <FormMessage 
/>\r\n               
                 
</FormItem>\r\n      
                     
 )}\r\n              
          />\r\n\r\n 
                     
  <div 
className=\"grid 
grid-cols-2 
gap-4\">\r\n         
                   
<FormField\r\n       
                     
    control={form.con
trol}\r\n            
                    n
ame=\"inspectorId\"\r
\n                   
             
render={({ field }) 
=> (\r\n             
                     
  <FormItem>\r\n     
                     
              
<FormLabel className=
\"text-gray-300\">Ins
pector (Optional)</Fo
rmLabel>\r\n         
                     
          <Select onV
alueChange={field.onC
hange} defaultValue={
field.value}>\r\n    
                     
                   
<FormControl>\r\n    
                     
                     
  <SelectTrigger clas
sName=\"bg-white/5 
border-white/10 
text-white\">\r\n    
                     
                     
      <SelectValue pl
aceholder=\"Unassigne
d\" />\r\n           
                     
                
</SelectTrigger>\r\n 
                     
                     
 </FormControl>\r\n  
                     
                     
<SelectContent>\r\n  
                     
                     
    
{inspectors.map(i => 
(\r\n                
                     
               
<SelectItem 
key={i.id} value={i.i
d}>{i.name}</SelectIt
em>\r\n              
                     
             ))}\r\n 
                     
                     
 
</SelectContent>\r\n 
                     
                  
</Select>\r\n        
                     
           
<FormMessage />\r\n  
                     
             
</FormItem>\r\n      
                     
     )}\r\n          
                  
/>\r\n               
             
<FormField\r\n       
                     
    control={form.con
trol}\r\n            
                    n
ame=\"scheduledDate\"
\r\n                 
               
render={({ field }) 
=> (\r\n             
                     
  <FormItem>\r\n     
                     
              
<FormLabel className=
\"text-gray-300\">Dat
e</FormLabel>\r\n    
                     
               
<FormControl>\r\n    
                     
                   
<Input\r\n           
                     
                
type=\"date\"\r\n    
                     
                     
  {...field}\r\n     
                     
                     
 value={field.value 
? new Date(field.valu
e).toISOString().spli
t('T')[0] : ''}\r\n  
                     
                     
    onChange={(e) => 
field.onChange(e.targ
et.value ? new 
Date(e.target.value) 
: undefined)}\r\n    
                     
                     
  className=\"bg-whit
e/5 border-white/10 
text-white\"\r\n     
                     
                  
/>\r\n               
                     
    
</FormControl>\r\n   
                     
                
<FormMessage />\r\n  
                     
             
</FormItem>\r\n      
                     
     )}\r\n          
                  
/>\r\n               
         
</div>\r\n\r\n       
                 
<DialogFooter>\r\n   
                     
    <Button 
type=\"submit\" disab
led={form.formState.i
sSubmitting} 
className=\"w-full 
bg-emerald-700 
hover:bg-emerald-600 
text-white shadow-lg 
shadow-emerald-500/20
\">\r\n              
                  {fo
rm.formState.isSubmit
ting ? 
\"Scheduling...\" : 
\"Schedule 
Job\"}\r\n           
                 
</Button>\r\n        
                
</DialogFooter>\r\n  
                  
</form>\r\n          
      </Form>\r\n    
        
</DialogContent>\r\n 
       </Dialog>\r\n 
   )\r\n}\r\n","usedD
eprecatedRules":[]},{
"filePath":"C:\\Users
\\shaun\\Antigrabity 
Workspace\\auditforec
aster\\src\\component
s\\team\\inspector-di
alog.tsx","messages":
[{"ruleId":"@typescri
pt-eslint/no-explicit
-any","severity":2,"m
essage":"Unexpected 
any. Specify a 
different type.","lin
e":45,"column":51,"no
deType":"TSAnyKeyword
","messageId":"unexpe
ctedAny","endLine":45
,"endColumn":54,"sugg
estions":[{"messageId
":"suggestUnknown","f
ix":{"range":[1429,14
32],"text":"unknown"}
,"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1429,1432],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"react/no-unesc
aped-entities","sever
ity":2,"message":"`'`
 can be escaped with 
`&apos;`, `&lsquo;`, 
`&#39;`, `&rsquo;`.",
"line":112,"column":4
4,"nodeType":"JSXText
","messageId":"unesca
pedEntityAlts","sugge
stions":[{"messageId"
:"replaceWithAlt","da
ta":{"alt":"&apos;"},
"fix":{"range":[4145,
4257],"text":"\r\n   
                     
Enter the 
inspector&apos;s 
details, 
certifications, and 
payroll info.\r\n    
                
"},"desc":"Replace 
with `&apos;`."},{"me
ssageId":"replaceWith
Alt","data":{"alt":"&
lsquo;"},"fix":{"rang
e":[4145,4257],"text"
:"\r\n               
         Enter the 
inspector&lsquo;s 
details, 
certifications, and 
payroll info.\r\n    
                
"},"desc":"Replace 
with `&lsquo;`."},{"m
essageId":"replaceWit
hAlt","data":{"alt":"
&#39;"},"fix":{"range
":[4145,4257],"text":
"\r\n                
        Enter the 
inspector&#39;s 
details, 
certifications, and 
payroll info.\r\n    
                
"},"desc":"Replace 
with `&#39;`."},{"mes
sageId":"replaceWithA
lt","data":{"alt":"&r
squo;"},"fix":{"range
":[4145,4257],"text":
"\r\n                
        Enter the 
inspector&rsquo;s 
details, 
certifications, and 
payroll info.\r\n    
                
"},"desc":"Replace 
with `&rsquo;`."}]},{
"ruleId":"@typescript
-eslint/no-explicit-a
ny","severity":2,"mes
sage":"Unexpected 
any. Specify a 
different type.","lin
e":240,"column":74,"n
odeType":"TSAnyKeywor
d","messageId":"unexp
ectedAny","endLine":2
40,"endColumn":77,"su
ggestions":[{"message
Id":"suggestUnknown",
"fix":{"range":[13591
,13594],"text":"unkno
wn"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
13591,13594],"text":"
never"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":3,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"'use client'\r\n\r
\nimport { useState 
} from 
\"react\"\r\nimport 
{ useForm, 
useFieldArray } from 
\"react-hook-form\"\r
\nimport { 
zodResolver } from \"
@hookform/resolvers/z
od\"\r\nimport { 
InspectorInput, 
InspectorSchema } 
from \"@/lib/schemas\
"\r\nimport { 
useSync } from \"@/pr
oviders/sync-provider
\"\r\nimport { 
Button } from \"@/com
ponents/ui/button\"\r
\nimport {\r\n    
Dialog,\r\n    
DialogContent,\r\n   
 DialogDescription,\r
\n    
DialogFooter,\r\n    
DialogHeader,\r\n    
DialogTitle,\r\n    
DialogTrigger,\r\n} 
from \"@/components/u
i/dialog\"\r\nimport 
{\r\n    Form,\r\n   
 FormControl,\r\n    
FormField,\r\n    
FormItem,\r\n    
FormLabel,\r\n    
FormMessage,\r\n} 
from \"@/components/u
i/form\"\r\nimport { 
Input } from \"@/comp
onents/ui/input\"\r\n
import { Checkbox } 
from \"@/components/u
i/checkbox\"\r\nimpor
t { Textarea } from \
"@/components/ui/text
area\"\r\nimport { 
useToast } from \"@/c
omponents/ui/use-toas
t\"\r\nimport { 
Plus, Trash, 
UserPlus } from \"luc
ide-react\"\r\nimport
 { Tabs, 
TabsContent, 
TabsList, 
TabsTrigger } from \"
@/components/ui/tabs\
"\r\n\r\ninterface 
InspectorDialogProps 
{\r\n    mode: 
\"create\" | 
\"edit\"\r\n    
inspector?: 
InspectorInput & { 
id: string }\r\n    
trigger?: React.React
Node\r\n}\r\n\r\nexpo
rt function 
InspectorDialog({ 
mode, inspector, 
trigger }: InspectorD
ialogProps) {\r\n    
const [open, 
setOpen] = 
useState(false)\r\n  
  const { toast } = 
useToast()\r\n    
const { engine } = 
useSync()\r\n\r\n    
const form = useForm<
InspectorInput>({\r\n
        resolver: zod
Resolver(InspectorSch
ema) as any,\r\n     
   defaultValues: 
{\r\n            
name: 
inspector?.name || 
\"\",\r\n            
email: 
inspector?.email || 
\"\",\r\n            
role: 
\"INSPECTOR\",\r\n   
         
hersRaterId: inspecto
r?.hersRaterId || 
\"\",\r\n            
baseRate: 
inspector?.baseRate 
|| 0,\r\n            
certifications: inspe
ctor?.certifications 
|| [],\r\n           
 onboarding: inspecto
r?.onboarding ? 
{\r\n                
uniformIssued: inspec
tor.onboarding.unifor
mIssued ?? 
false,\r\n           
     ipadIssued: insp
ector.onboarding.ipad
Issued ?? false,\r\n 
               
badgePrinted: inspect
or.onboarding.badgePr
inted ?? false,\r\n  
              
trainingComplete: ins
pector.onboarding.tra
iningComplete ?? 
false,\r\n           
     notes: inspector
.onboarding.notes ?? 
\"\"\r\n            
} : {\r\n            
    uniformIssued: 
false,\r\n           
     ipadIssued: 
false,\r\n           
     badgePrinted: 
false,\r\n           
     
trainingComplete: 
false,\r\n           
     notes: \"\"\r\n 
           }\r\n     
   },\r\n    
})\r\n\r\n    const 
{ fields, append, 
remove } = 
useFieldArray({\r\n  
      control: 
form.control,\r\n    
    name: \"certifica
tions\",\r\n    
})\r\n\r\n    async 
function 
onSubmit(data: 
InspectorInput) 
{\r\n        try 
{\r\n            if 
(mode === 
\"create\") {\r\n    
            await eng
ine.enqueue('CREATE',
 'inspector', 
data)\r\n            
} else {\r\n         
       if 
(!inspector?.id) 
return\r\n           
     await engine.enq
ueue('UPDATE', 
'inspector', { 
...data, id: 
inspector.id })\r\n  
          }\r\n\r\n  
          
toast({\r\n          
      title: 
\"Saved\",\r\n       
         
description: 
\"Inspector saved. 
Syncing in 
background...\",\r\n 
           })\r\n    
        
setOpen(false)\r\n   
         
form.reset()\r\n     
   } catch (error) 
{\r\n            cons
ole.error(\"Failed 
to enqueue:\", 
error)\r\n           
 toast({\r\n         
       variant: 
\"destructive\",\r\n 
               
title: 
\"Error\",\r\n       
         
description: 
\"Failed to save 
inspector 
locally.\",\r\n      
      })\r\n        
}\r\n    }\r\n\r\n   
 return (\r\n        
<Dialog open={open} o
nOpenChange={setOpen}
>\r\n            
<DialogTrigger 
asChild>\r\n         
       {trigger || 
(\r\n                
    <Button className
=\"bg-blue-600 
hover:bg-blue-500 
text-white shadow-lg 
shadow-blue-500/20\">
\r\n                 
       <UserPlus 
className=\"mr-2 h-4 
w-4\" /> Onboard 
Inspector\r\n        
            
</Button>\r\n        
        )}\r\n       
     
</DialogTrigger>\r\n 
           
<DialogContent classN
ame=\"sm:max-w-[600px
] max-h-[90vh] 
overflow-y-auto 
border-white/10 
bg-black/80 
backdrop-blur-xl 
text-white\">\r\n    
            
<DialogHeader>\r\n   
                 
<DialogTitle 
className=\"text-xl 
font-bold\">{mode 
=== \"create\" ? 
\"Onboard 
Inspector\" : \"Edit 
Inspector\"}</DialogT
itle>\r\n            
        
<DialogDescription cl
assName=\"text-gray-4
00\">\r\n            
            Enter 
the inspector's 
details, 
certifications, and 
payroll info.\r\n    
                </Dia
logDescription>\r\n  
              
</DialogHeader>\r\n  
              <Form 
{...form}>\r\n       
             <form on
Submit={form.handleSu
bmit(onSubmit)} class
Name=\"space-y-6\">\r
\n                   
     <Tabs defaultVal
ue=\"basic\" classNam
e=\"w-full\">\r\n    
                     
   <TabsList 
className=\"grid 
w-full grid-cols-3 
bg-white/5\">\r\n    
                     
       <TabsTrigger 
value=\"basic\" class
Name=\"data-[state=ac
tive]:bg-blue-600\">B
asic</TabsTrigger>\r\
n                    
            
<TabsTrigger value=\"
professional\" classN
ame=\"data-[state=act
ive]:bg-blue-600\">Pr
ofessional</TabsTrigg
er>\r\n              
                  
<TabsTrigger 
value=\"onboarding\" 
className=\"data-[sta
te=active]:bg-blue-60
0\">Onboarding</TabsT
rigger>\r\n          
                  
</TabsList>\r\n\r\n  
                     
     <TabsContent 
value=\"basic\" class
Name=\"space-y-4 
mt-4\">\r\n          
                     
 <FormField\r\n      
                     
         control={for
m.control}\r\n       
                     
        
name=\"name\"\r\n    
                     
           
render={({ field }) 
=> (\r\n             
                     
      <FormItem>\r\n 
                     
                     
 <FormLabel className
=\"text-gray-300\">Fu
ll 
Name</FormLabel>\r\n 
                     
                     
 <FormControl>\r\n   
                     
                     
   <Input 
placeholder=\"Jane 
Doe\" {...field} clas
sName=\"bg-white/5 
border-white/10 
text-white placeholde
r:text-gray-500 focus
:border-blue-500/50\"
 />\r\n              
                     
         
</FormControl>\r\n   
                     
                    
<FormMessage />\r\n  
                     
                 
</FormItem>\r\n      
                     
         )}\r\n      
                     
     />\r\n          
                     
 <FormField\r\n      
                     
         control={for
m.control}\r\n       
                     
        
name=\"email\"\r\n   
                     
            
render={({ field }) 
=> (\r\n             
                     
      <FormItem>\r\n 
                     
                     
 <FormLabel className
=\"text-gray-300\">Em
ail Address</FormLabe
l>\r\n               
                     
        
<FormControl>\r\n    
                     
                     
  <Input placeholder=
\"jane@example.com\" 
{...field} className=
\"bg-white/5 
border-white/10 
text-white placeholde
r:text-gray-500 focus
:border-blue-500/50\"
 />\r\n              
                     
         
</FormControl>\r\n   
                     
                    
<FormMessage />\r\n  
                     
                 
</FormItem>\r\n      
                     
         )}\r\n      
                     
     />\r\n          
                     
 <FormField\r\n      
                     
         control={for
m.control}\r\n       
                     
        
name=\"phone\"\r\n   
                     
            
render={({ field }) 
=> (\r\n             
                     
      <FormItem>\r\n 
                     
                     
 <FormLabel className
=\"text-gray-300\">Ph
one Number</FormLabel
>\r\n                
                     
       
<FormControl>\r\n    
                     
                     
  <Input 
placeholder=\"(555) 
123-4567\" 
{...field} className=
\"bg-white/5 
border-white/10 
text-white placeholde
r:text-gray-500 focus
:border-blue-500/50\"
 />\r\n              
                     
         
</FormControl>\r\n   
                     
                    
<FormMessage />\r\n  
                     
                 
</FormItem>\r\n      
                     
         )}\r\n      
                     
     />\r\n          
                  </T
absContent>\r\n\r\n  
                     
     <TabsContent val
ue=\"professional\" c
lassName=\"space-y-4 
mt-4\">\r\n          
                     
 <div 
className=\"grid 
grid-cols-2 
gap-4\">\r\n         
                     
      <FormField\r\n 
                     
                  con
trol={form.control}\r
\n                   
                     
name=\"hersRaterId\"\
r\n                  
                     
 render={({ field }) 
=> (\r\n             
                     
          
<FormItem>\r\n       
                     
                    
<FormLabel className=
\"text-gray-300\">HER
S Rater 
ID</FormLabel>\r\n   
                     
                     
   <FormControl>\r\n 
                     
                     
         <Input place
holder=\"RT-12345\" 
{...field} className=
\"bg-white/5 
border-white/10 
text-white placeholde
r:text-gray-500 focus
:border-blue-500/50\"
 />\r\n              
                     
             
</FormControl>\r\n   
                     
                     
   <FormMessage 
/>\r\n               
                     
        
</FormItem>\r\n      
                     
             )}\r\n  
                     
             />\r\n  
                     
             
<FormField\r\n       
                     
            control={
form.control}\r\n    
                     
               name=\
"baseRate\"\r\n      
                     
             
render={({ field }) 
=> (\r\n             
                     
          
<FormItem>\r\n       
                     
                    
<FormLabel className=
\"text-gray-300\">Bas
e Monthly Rate 
($)</FormLabel>\r\n  
                     
                     
    
<FormControl>\r\n    
                     
                     
      <Input 
type=\"number\" 
placeholder=\"5000\" 
{...field} className=
\"bg-white/5 
border-white/10 
text-white placeholde
r:text-gray-500 focus
:border-blue-500/50\"
 />\r\n              
                     
             
</FormControl>\r\n   
                     
                     
   <FormMessage 
/>\r\n               
                     
        
</FormItem>\r\n      
                     
             )}\r\n  
                     
             />\r\n  
                     
         
</div>\r\n\r\n       
                     
    <div className=\"
space-y-2\">\r\n     
                     
          <div 
className=\"flex 
items-center justify-
between\">\r\n       
                     
            
<FormLabel className=
\"text-gray-300\">Cer
tifications</FormLabe
l>\r\n               
                     
    <Button 
type=\"button\" 
variant=\"outline\" 
size=\"sm\" 
onClick={() => 
append({ name: \"\" 
})} className=\"borde
r-white/10 
bg-white/5 
text-gray-300 
hover:bg-white/10 hov
er:text-white\">\r\n 
                     
                     
 <Plus 
className=\"h-4 w-4 
mr-2\" /> Add 
Cert\r\n             
                     
      </Button>\r\n  
                     
             
</div>\r\n           
                     
    
{fields.map((field, 
index) => (\r\n      
                     
             <div 
key={field.id} 
className=\"flex 
gap-2 items-start 
border 
border-white/10 
bg-white/5 p-2 
rounded-md\">\r\n    
                     
                   
<FormField\r\n       
                     
                    c
ontrol={form.control}
\r\n                 
                     
          name={`cert
ifications.${index}.n
ame`}\r\n            
                     
               
render={({ field }) 
=> (\r\n             
                     
                  
<FormItem className=\
"flex-1\">\r\n       
                     
                     
       
<FormControl>\r\n    
                     
                     
              <Input 
placeholder=\"Cert 
Name (e.g. BPI)\" 
{...field} className=
\"bg-transparent 
border-none 
text-white placeholde
r:text-gray-600 focus
-visible:ring-0\" 
/>\r\n               
                     
                    
</FormControl>\r\n   
                     
                     
       
</FormItem>\r\n      
                     
                     
)}\r\n               
                     
        />\r\n       
                     
                
<FormField\r\n       
                     
                    c
ontrol={form.control}
\r\n                 
                     
          name={`cert
ifications.${index}.l
icenseNumber`}\r\n   
                     
                     
   render={({ field 
}) => (\r\n          
                     
                     
<FormItem className=\
"flex-1\">\r\n       
                     
                     
       
<FormControl>\r\n    
                     
                     
              <Input 
placeholder=\"License
 #\" {...field} class
Name=\"bg-transparent
 border-none 
text-white placeholde
r:text-gray-600 focus
-visible:ring-0\" 
/>\r\n               
                     
                    
</FormControl>\r\n   
                     
                     
       
</FormItem>\r\n      
                     
                     
)}\r\n               
                     
        />\r\n       
                     
                
<Button 
type=\"button\" 
variant=\"ghost\" 
size=\"icon\" 
onClick={() => 
remove(index)} classN
ame=\"text-gray-500 
hover:text-red-400 ho
ver:bg-transparent\">
\r\n                 
                     
          <Trash 
className=\"h-4 
w-4\" />\r\n         
                     
              
</Button>\r\n        
                     
           
</div>\r\n           
                     
    ))}\r\n          
                     
 </div>\r\n          
                  
</TabsContent>\r\n   
                     
    <TabsContent 
value=\"onboarding\" 
className=\"space-y-4
 mt-4\">\r\n         
                     
  <div 
className=\"grid 
grid-cols-2 
gap-4\">\r\n         
                     
      
{['uniformIssued', 
'ipadIssued', 
'badgePrinted', 'trai
ningComplete'].map((k
ey) => (\r\n         
                     
          
<FormField\r\n       
                     
                
key={key}\r\n        
                     
               contro
l={form.control}\r\n 
                     
                     
 name={`onboarding.${
key}` as any}\r\n    
                     
                   
render={({ field }) 
=> (\r\n             
                     
              
<FormItem 
className=\"flex 
flex-row items-start 
space-x-3 space-y-0 
rounded-md border 
border-white/10 
bg-white/5 
p-4\">\r\n           
                     
                    
<FormControl>\r\n    
                     
                     
          
<Checkbox\r\n        
                     
                     
          checked={fi
eld.value}\r\n       
                     
                     
           onCheckedC
hange={field.onChange
}\r\n                
                     
                     
  className=\"border-
white/20 data-[state=
checked]:bg-blue-600 
data-[state=checked]:
border-blue-600\"\r\n
                     
                     
              />\r\n 
                     
                     
         
</FormControl>\r\n   
                     
                     
       <div className
=\"space-y-1 
leading-none\">\r\n  
                     
                     
            
<FormLabel className=
\"text-gray-300 capit
alize\">{key.replace(
/([A-Z])/g, ' $1').tr
im()}</FormLabel>\r\n
                     
                     
          </div>\r\n 
                     
                     
     </FormItem>\r\n 
                     
                     
 )}\r\n              
                     
     />\r\n          
                     
     ))}\r\n         
                     
  </div>\r\n         
                     
  <FormField\r\n     
                     
          control={fo
rm.control}\r\n      
                     
         name=\"onboa
rding.notes\"\r\n    
                     
           
render={({ field }) 
=> (\r\n             
                     
      <FormItem>\r\n 
                     
                     
 <FormLabel className
=\"text-gray-300\">On
boarding Notes</FormL
abel>\r\n            
                     
           
<FormControl>\r\n    
                     
                     
  <Textarea placehold
er=\"Additional 
details...\" 
{...field} className=
\"bg-white/5 
border-white/10 
text-white placeholde
r:text-gray-500 focus
:border-blue-500/50 
min-h-[100px]\" 
/>\r\n               
                     
        
</FormControl>\r\n   
                     
                    
<FormMessage />\r\n  
                     
                 
</FormItem>\r\n      
                     
         )}\r\n      
                     
     />\r\n          
                  
</TabsContent>\r\n   
                     
</Tabs>\r\n\r\n      
                  
<DialogFooter>\r\n   
                     
    <Button 
type=\"submit\" disab
led={form.formState.i
sSubmitting} 
className=\"w-full 
bg-blue-600 
hover:bg-blue-500 
text-white shadow-lg 
shadow-blue-500/20\">
\r\n                 
               {form.
formState.isSubmittin
g ? \"Saving...\" : 
\"Save 
Inspector\"}\r\n     
                     
  </Button>\r\n      
                  
</DialogFooter>\r\n  
                  
</form>\r\n          
      </Form>\r\n    
        
</DialogContent>\r\n 
       </Dialog>\r\n 
   )\r\n}\r\n","usedD
eprecatedRules":[]},{
"filePath":"C:\\Users
\\shaun\\Antigrabity 
Workspace\\auditforec
aster\\src\\component
s\\template-selection
-modal.tsx","messages
":[{"ruleId":"@typesc
ript-eslint/no-unused
-vars","severity":1,"
message":"'result' 
is assigned a value 
but never used.","lin
e":60,"column":19,"no
deType":null,"message
Id":"unusedVar","endL
ine":60,"endColumn":2
5}],"suppressedMessag
es":[],"errorCount":0
,"fatalErrorCount":0,
"warningCount":1,"fix
ableErrorCount":0,"fi
xableWarningCount":0,
"source":"'use client
'\r\n\r\nimport { 
useState, useEffect 
} from 
'react'\r\nimport { 
useRouter } from 'nex
t/navigation'\r\nimpo
rt { getTemplatesForS
election } from '@/ap
p/actions/jobs'\r\nim
port { Button } from 
'@/components/ui/butt
on'\r\nimport { 
Card, CardContent, 
CardHeader, 
CardTitle } from '@/c
omponents/ui/card'\r\
nimport { useToast } 
from '@/components/ui
/use-toast'\r\nimport
 { X, FileText } 
from 'lucide-react'\r
\n\r\ntype TemplateSe
lectionModalProps = 
{\r\n    jobId: 
string\r\n    
onClose: () => void\r
\n}\r\n\r\ntype 
Template = {\r\n    
id: string\r\n    
name: string\r\n    
description: string 
| null\r\n}\r\n\r\nex
port function Templat
eSelectionModal({ 
jobId, onClose }: Tem
plateSelectionModalPr
ops) {\r\n    const 
router = 
useRouter()\r\n    
const { toast } = 
useToast()\r\n    
const [templates, 
setTemplates] = useSt
ate<Template[]>([])\r
\n    const 
[loading, 
setLoading] = 
useState(true)\r\n   
 const [creating, 
setCreating] = useSta
te(false)\r\n\r\n    
useEffect(() => 
{\r\n        
loadTemplates()\r\n  
  }, [])\r\n\r\n    
const loadTemplates 
= async () => {\r\n  
      try {\r\n      
      const data = 
await getTemplatesFor
Selection()\r\n      
      setTemplates(da
ta)\r\n        } 
catch (error) {\r\n  
          console.err
or('Failed to load 
templates:', 
error)\r\n        } 
finally {\r\n        
    setLoading(false)
\r\n        }\r\n    
}\r\n\r\n    const 
handleSelectTemplate 
= async (templateId: 
string) => {\r\n     
   setCreating(true)\
r\n        try {\r\n 
           const 
response = await fetc
h('/api/inspections/c
reate', {\r\n        
        method: 
'POST',\r\n          
      headers: {\r\n 
                   
'Content-Type': 'appl
ication/json',\r\n   
             },\r\n  
              body: 
JSON.stringify({ 
jobId, templateId 
}),\r\n            
})\r\n\r\n           
 if (!response.ok) 
{\r\n                
const errorData = 
await 
response.json()\r\n  
              throw 
new Error(errorData.e
rror || 'Failed to 
create 
inspection')\r\n     
       }\r\n\r\n     
       const result 
= await 
response.json()\r\n  
          onClose() 
// Close modal 
immediately on 
success\r\n          
  router.push(`/dashb
oard/inspections/${jo
bId}`)\r\n        } 
catch (error) {\r\n  
          console.err
or('Failed to create 
inspection:', 
error)\r\n           
 toast({\r\n         
       title: 
\"Error\",\r\n       
         
description: 
\"Failed to create 
inspection. Please 
try again.\",\r\n    
            variant: 
\"destructive\",\r\n 
           })\r\n    
        setCreating(f
alse)\r\n        
}\r\n    }\r\n\r\n   
 return (\r\n        
<div 
className=\"fixed 
inset-0 bg-black/50 
flex items-center 
justify-center z-50 
p-4\">\r\n           
 <Card 
className=\"w-full 
max-w-2xl 
max-h-[80vh] flex 
flex-col\">\r\n      
          
<CardHeader 
className=\"flex 
flex-row 
items-center justify-
between\">\r\n       
             
<CardTitle>Select 
Inspection Template</
CardTitle>\r\n       
             <Button 
variant=\"ghost\" 
size=\"icon\" onClick
={onClose}>\r\n      
                  <X 
className=\"h-4 
w-4\" />\r\n         
           
</Button>\r\n        
        
</CardHeader>\r\n    
            
<CardContent 
className=\"flex-1 ov
erflow-y-auto\">\r\n 
                   
{loading ? (\r\n     
                   
<div className=\"text
-center py-8 text-mut
ed-foreground\">\r\n 
                     
      Loading 
templates...\r\n     
                   
</div>\r\n           
         ) : 
templates.length === 
0 ? (\r\n            
            <div clas
sName=\"text-center 
py-8\">\r\n          
                  <p 
className=\"text-mute
d-foreground 
mb-4\">No templates 
found</p>\r\n        
                    
<Button onClick={() 
=> router.push('/dash
board/reports/templat
es/new-advanced')}>\r
\n                   
             Create 
Your First 
Template\r\n         
                   
</Button>\r\n        
                
</div>\r\n           
         ) : (\r\n   
                     
<div className=\"spac
e-y-3\">\r\n         
                   {t
emplates.map(template
 => (\r\n            
                    
<button\r\n          
                     
     key={template.id
}\r\n                
                    
onClick={() => handle
SelectTemplate(templa
te.id)}\r\n          
                     
     disabled={creati
ng}\r\n              
                     
 className=\"w-full 
text-left p-4 border 
rounded-lg 
hover:bg-gray-50 hove
r:border-blue-500 
transition-colors 
disabled:opacity-50 d
isabled:cursor-not-al
lowed\"\r\n          
                     
 >\r\n               
                     
<div 
className=\"flex 
items-start 
gap-3\">\r\n         
                     
          <FileText 
className=\"h-5 w-5 
text-blue-600 
mt-0.5\" />\r\n      
                     
             <div cla
ssName=\"flex-1\">\r\
n                    
                     
   <div className=\"f
ont-semibold\">{templ
ate.name}</div>\r\n  
                     
                     
{template.description
 && (\r\n            
                     
               <div 
className=\"text-sm t
ext-muted-foreground 
mt-1\">\r\n          
                     
                     
{template.description
}\r\n                
                     
           
</div>\r\n           
                     
            )}\r\n   
                     
                
</div>\r\n           
                     
    </div>\r\n       
                     
    </button>\r\n    
                     
   ))}\r\n           
             
</div>\r\n           
         )}\r\n      
              
{creating && (\r\n   
                     
<div 
className=\"absolute 
inset-0 bg-white/80 
flex items-center jus
tify-center\">\r\n   
                     
    <p 
className=\"text-lg f
ont-semibold\">Creati
ng inspection...</p>\
r\n                  
      </div>\r\n     
               
)}\r\n               
 </CardContent>\r\n  
          
</Card>\r\n        
</div>\r\n    )\r\n}\
r\n","usedDeprecatedR
ules":[]},{"filePath"
:"C:\\Users\\shaun\\A
ntigrabity Workspace\
\auditforecaster\\src
\\components\\ui\\ale
rt.stories.tsx","mess
ages":[{"ruleId":"sto
rybook/no-renderer-pa
ckages","severity":2,
"message":"Do not 
import renderer 
package 
\"@storybook/react\" 
directly. Use a 
framework package 
instead (e.g. 
@storybook/nextjs, @s
torybook/react-vite, 
@storybook/nextjs-vit
e, @storybook/react-w
ebpack5, @storybook/r
eact-native-web-vite)
.","line":1,"column":
1,"nodeType":"ImportD
eclaration","messageI
d":"noRendererPackage
s","endLine":1,"endCo
lumn":56}],"suppresse
dMessages":[],"errorC
ount":1,"fatalErrorCo
unt":0,"warningCount"
:0,"fixableErrorCount
":0,"fixableWarningCo
unt":0,"source":"impo
rt type { Meta, 
StoryObj } from '@sto
rybook/react';\r\nimp
ort { Alert, 
AlertDescription, 
AlertTitle } from 
'./alert';\r\nimport 
{ Terminal, 
AlertCircle } from 'l
ucide-react';\r\n\r\n
const meta: 
Meta<typeof Alert> = 
{\r\n    title: 
'UI/Alert',\r\n    
component: 
Alert,\r\n    tags: 
['autodocs'],\r\n    
argTypes: {\r\n      
  variant: {\r\n     
       control: 
'select',\r\n        
    options: 
['default', 
'destructive'],\r\n  
      },\r\n    },\r\
n};\r\n\r\nexport 
default 
meta;\r\ntype Story 
= StoryObj<typeof Ale
rt>;\r\n\r\nexport 
const Default: Story 
= {\r\n    render: 
(args) => (\r\n      
  <Alert 
{...args}>\r\n       
     <Terminal 
className=\"h-4 
w-4\" />\r\n         
   <AlertTitle>Heads 
up!</AlertTitle>\r\n 
           <AlertDesc
ription>\r\n         
       You can add 
components to your 
app using the 
cli.\r\n            <
/AlertDescription>\r\
n        
</Alert>\r\n    
),\r\n    args: 
{\r\n        
variant: 
'default',\r\n    },\
r\n};\r\n\r\nexport 
const Destructive: 
Story = {\r\n    
render: (args) => 
(\r\n        <Alert 
{...args}>\r\n       
     <AlertCircle 
className=\"h-4 
w-4\" />\r\n         
   <AlertTitle>Error<
/AlertTitle>\r\n     
       <AlertDescript
ion>\r\n             
   Your session has 
expired. Please log 
in again.\r\n        
    </AlertDescriptio
n>\r\n        
</Alert>\r\n    
),\r\n    args: 
{\r\n        
variant: 
'destructive',\r\n   
 },\r\n};\r\n","usedD
eprecatedRules":[]},{
"filePath":"C:\\Users
\\shaun\\Antigrabity 
Workspace\\auditforec
aster\\src\\component
s\\ui\\button.stories
.tsx","messages":[{"r
uleId":"storybook/no-
renderer-packages","s
everity":2,"message":
"Do not import 
renderer package 
\"@storybook/react\" 
directly. Use a 
framework package 
instead (e.g. 
@storybook/nextjs, @s
torybook/react-vite, 
@storybook/nextjs-vit
e, @storybook/react-w
ebpack5, @storybook/r
eact-native-web-vite)
.","line":1,"column":
1,"nodeType":"ImportD
eclaration","messageI
d":"noRendererPackage
s","endLine":1,"endCo
lumn":56}],"suppresse
dMessages":[],"errorC
ount":1,"fatalErrorCo
unt":0,"warningCount"
:0,"fixableErrorCount
":0,"fixableWarningCo
unt":0,"source":"impo
rt type { Meta, 
StoryObj } from '@sto
rybook/react';\r\nimp
ort { Button } from '
./button';\r\n\r\ncon
st meta: Meta<typeof 
Button> = {\r\n    
title: 
'UI/Button',\r\n    
component: 
Button,\r\n    tags: 
['autodocs'],\r\n    
argTypes: {\r\n      
  variant: {\r\n     
       control: 
'select',\r\n        
    options: 
['default', 
'destructive', 
'outline', 
'secondary', 
'ghost', 
'link'],\r\n        
},\r\n        size: 
{\r\n            
control: 
'select',\r\n        
    options: 
['default', 'sm', 
'lg', 'icon'],\r\n   
     },\r\n    },\r\n
};\r\n\r\nexport 
default 
meta;\r\ntype Story 
= StoryObj<typeof But
ton>;\r\n\r\nexport 
const Default: Story 
= {\r\n    args: 
{\r\n        
children: 
'Button',\r\n        
variant: 
'default',\r\n    },\
r\n};\r\n\r\nexport 
const Destructive: 
Story = {\r\n    
args: {\r\n        
children: 
'Destructive',\r\n   
     variant: 
'destructive',\r\n   
 },\r\n};\r\n\r\nexpo
rt const Outline: 
Story = {\r\n    
args: {\r\n        
children: 
'Outline',\r\n       
 variant: 
'outline',\r\n    },\
r\n};\r\n\r\nexport 
const Secondary: 
Story = {\r\n    
args: {\r\n        
children: 
'Secondary',\r\n     
   variant: 
'secondary',\r\n    }
,\r\n};\r\n\r\nexport
 const Ghost: Story 
= {\r\n    args: 
{\r\n        
children: 
'Ghost',\r\n        
variant: 
'ghost',\r\n    },\r\
n};\r\n\r\nexport 
const Link: Story = 
{\r\n    args: {\r\n 
       children: 
'Link',\r\n        
variant: 'link',\r\n 
   },\r\n};\r\n","use
dDeprecatedRules":[]}
,{"filePath":"C:\\Use
rs\\shaun\\Antigrabit
y Workspace\\auditfor
ecaster\\src\\compone
nts\\ui\\calendar.tsx
","messages":[{"ruleI
d":"@typescript-eslin
t/no-unused-vars","se
verity":1,"message":"
'ChevronLeft' is 
defined but never use
d.","line":4,"column"
:10,"nodeType":null,"
messageId":"unusedVar
","endLine":4,"endCol
umn":21},{"ruleId":"@
typescript-eslint/no-
unused-vars","severit
y":1,"message":"'Chev
ronRight' is defined 
but never used.","lin
e":4,"column":23,"nod
eType":null,"messageI
d":"unusedVar","endLi
ne":4,"endColumn":35}
],"suppressedMessages
":[],"errorCount":0,"
fatalErrorCount":0,"w
arningCount":2,"fixab
leErrorCount":0,"fixa
bleWarningCount":0,"s
ource":"\"use client\
"\r\n\r\nimport * as 
React from 
\"react\"\r\nimport 
{ ChevronLeft, 
ChevronRight } from \
"lucide-react\"\r\nim
port { DayPicker } 
from \"react-day-pick
er\"\r\n\r\nimport { 
cn } from \"@/lib/uti
ls\"\r\nimport { 
buttonVariants } 
from \"@/components/u
i/button\"\r\n\r\nexp
ort type 
CalendarProps = React
.ComponentProps<typeo
f DayPicker>\r\n\r\nf
unction 
Calendar({\r\n    
className,\r\n    
classNames,\r\n    
showOutsideDays = 
true,\r\n    
...props\r\n}: 
CalendarProps) {\r\n 
   return (\r\n      
  <DayPicker\r\n     
       showOutsideDay
s={showOutsideDays}\r
\n            classNa
me={cn(\"p-3\", 
className)}\r\n      
      
classNames={{\r\n    
            months: 
\"flex flex-col 
sm:flex-row 
space-y-4 
sm:space-x-4 
sm:space-y-0\",\r\n  
              month: 
\"space-y-4\",\r\n   
             
caption: \"flex 
justify-center pt-1 
relative 
items-center\",\r\n  
              
caption_label: 
\"text-sm 
font-medium\",\r\n   
             nav: 
\"space-x-1 flex 
items-center\",\r\n  
              
nav_button: cn(\r\n  
                  
buttonVariants({ 
variant: \"outline\" 
}),\r\n              
      \"h-7 w-7 
bg-transparent p-0 
opacity-50 hover:opac
ity-100\"\r\n        
        ),\r\n       
         
nav_button_previous: 
\"absolute 
left-1\",\r\n        
        
nav_button_next: 
\"absolute 
right-1\",\r\n       
         table: 
\"w-full 
border-collapse 
space-y-1\",\r\n     
           head_row: 
\"flex\",\r\n        
        
head_cell:\r\n       
             \"text-m
uted-foreground 
rounded-md w-9 
font-normal 
text-[0.8rem]\",\r\n 
               row: 
\"flex w-full 
mt-2\",\r\n          
      cell: \"h-9 
w-9 text-center 
text-sm p-0 relative 
[&:has([aria-selected
].day-range-end)]:rou
nded-r-md [&:has([ari
a-selected].day-outsi
de)]:bg-accent/50 [&:
has([aria-selected])]
:bg-accent first:[&:h
as([aria-selected])]:
rounded-l-md last:[&:
has([aria-selected])]
:rounded-r-md focus-w
ithin:relative focus-
within:z-20\",\r\n   
             day: 
cn(\r\n              
      
buttonVariants({ 
variant: \"ghost\" 
}),\r\n              
      \"h-9 w-9 p-0 
font-normal aria-sele
cted:opacity-100\"\r\
n                
),\r\n               
 day_range_end: \"day
-range-end\",\r\n    
            
day_selected:\r\n    
                
\"bg-primary text-pri
mary-foreground 
hover:bg-primary hove
r:text-primary-foregr
ound 
focus:bg-primary focu
s:text-primary-foregr
ound\",\r\n          
      day_today: 
\"bg-accent text-acce
nt-foreground\",\r\n 
               
day_outside:\r\n     
               
\"day-outside text-mu
ted-foreground 
opacity-50 aria-selec
ted:bg-accent/50 aria
-selected:text-muted-
foreground aria-selec
ted:opacity-30\",\r\n
                
day_disabled: \"text-
muted-foreground 
opacity-50\",\r\n    
            day_range
_middle:\r\n         
           \"aria-sel
ected:bg-accent aria-
selected:text-accent-
foreground\",\r\n    
            
day_hidden: 
\"invisible\",\r\n   
             
...classNames,\r\n   
         }}\r\n      
      // 
components={{\r\n    
        //     
IconLeft: ({ 
...props }) => 
<ChevronLeft 
className=\"h-4 
w-4\" />,\r\n        
    //     
IconRight: ({ 
...props }) => 
<ChevronRight 
className=\"h-4 
w-4\" />,\r\n        
    // }}\r\n        
    {...props}\r\n   
     />\r\n    )\r\n}
\r\nCalendar.displayN
ame = \"Calendar\"\r\
n\r\nexport { 
Calendar }\r\n","used
DeprecatedRules":[]},
{"filePath":"C:\\User
s\\shaun\\Antigrabity
 Workspace\\auditfore
caster\\src\\hooks\\_
_tests__\\use-offline
-sync.test.ts","messa
ges":[{"ruleId":"@typ
escript-eslint/no-unu
sed-vars","severity":
1,"message":"'afterEa
ch' is defined but 
never used.","line":2
,"column":48,"nodeTyp
e":null,"messageId":"
unusedVar","endLine":
2,"endColumn":57},{"r
uleId":"@typescript-e
slint/no-explicit-any
","severity":2,"messa
ge":"Unexpected any. 
Specify a different t
ype.","line":60,"colu
mn":70,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":60,"endColumn
":73,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1989,1992],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1989,1992],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":1,"fatal
ErrorCount":0,"warnin
gCount":1,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { 
renderHook, act, 
waitFor } from '@test
ing-library/react'\r\
nimport { describe, 
it, expect, vi, 
beforeEach, 
afterEach } from 
'vitest'\r\nimport { 
useOfflineSync } 
from '../use-offline-
sync'\r\nimport { 
getInspectionDraft, 
saveInspectionDraft 
} from '@/lib/offline
-storage'\r\n\r\n// 
Mock dependencies\r\n
vi.mock('@/lib/offlin
e-storage', () => 
({\r\n    
getInspectionDraft: 
vi.fn(),\r\n    
saveInspectionDraft: 
vi.fn()\r\n}))\r\n\r\
nvi.mock('@/component
s/ui/use-toast', () 
=> ({\r\n    
useToast: () => ({ 
toast: vi.fn() })\r\n
}))\r\n\r\ndescribe('
useOfflineSync', () 
=> {\r\n    
beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n       
 // Default to 
online\r\n        Obj
ect.defineProperty(na
vigator, 'onLine', 
{\r\n            
configurable: 
true,\r\n            
value: true\r\n      
  })\r\n    
})\r\n\r\n    
it('should 
initialize with 
correct online 
status', () => {\r\n 
       const { 
result } = 
renderHook(() => useO
fflineSync('job-1'))\
r\n        expect(res
ult.current.isOffline
).toBe(false)\r\n    
})\r\n\r\n    
it('should 
initialize as 
offline if navigator 
says so', () => 
{\r\n        Object.d
efineProperty(navigat
or, 'onLine', {\r\n  
          
configurable: 
true,\r\n            
value: false\r\n     
   })\r\n        
const { result } = 
renderHook(() => useO
fflineSync('job-1'))\
r\n        expect(res
ult.current.isOffline
).toBe(true)\r\n    
})\r\n\r\n    
it('should update 
status on window 
events', () => {\r\n 
       const { 
result } = 
renderHook(() => useO
fflineSync('job-1'))\
r\n\r\n        
act(() => {\r\n      
      window.dispatch
Event(new Event('offl
ine'))\r\n        
})\r\n        expect(
result.current.isOffl
ine).toBe(true)\r\n\r
\n        act(() => 
{\r\n            wind
ow.dispatchEvent(new 
Event('online'))\r\n 
       })\r\n        
expect(result.current
.isOffline).toBe(fals
e)\r\n    })\r\n\r\n 
   it('should load 
draft on mount', 
async () => {\r\n    
    const mockDraft 
= {\r\n            
data: { foo: 'bar' 
},\r\n            
updatedAt: new Date()
.toISOString(),\r\n  
          synced: 
false\r\n        
}\r\n        vi.mocke
d(getInspectionDraft)
.mockResolvedValue(mo
ckDraft as 
any)\r\n\r\n        
const { result } = 
renderHook(() => useO
fflineSync('job-1'))\
r\n\r\n        await 
waitFor(() => {\r\n  
          expect(resu
lt.current.offlineDat
a).toEqual({ foo: 
'bar' })\r\n        
})\r\n        expect(
getInspectionDraft).t
oHaveBeenCalledWith('
job-1')\r\n    
})\r\n\r\n    
it('should save 
draft', async () => 
{\r\n        vi.mocke
d(saveInspectionDraft
).mockResolvedValue(u
ndefined)\r\n        
vi.mocked(getInspecti
onDraft).mockResolved
Value(null)\r\n\r\n  
      const { result 
} = renderHook(() => 
useOfflineSync('job-1
'))\r\n        const 
data = { foo: 'baz' 
}\r\n\r\n        
await act(async () 
=> {\r\n            
await result.current.
saveDraft(data)\r\n  
      })\r\n\r\n     
   expect(saveInspect
ionDraft).toHaveBeenC
alledWith(expect.obje
ctContaining({\r\n   
         jobId: 
'job-1',\r\n         
   data\r\n        
}))\r\n        expect
(result.current.lastS
aved).toBeInstanceOf(
Date)\r\n    })\r\n})
\r\n","usedDeprecated
Rules":[]},{"filePath
":"C:\\Users\\shaun\\
Antigrabity Workspace
\\auditforecaster\\sr
c\\hooks\\use-task-cl
aim.ts","messages":[{
"ruleId":"prefer-cons
t","severity":2,"mess
age":"'interval' is 
never reassigned. 
Use 'const' instead."
,"line":33,"column":9
,"nodeType":"Identifi
er","messageId":"useC
onst","endLine":33,"e
ndColumn":17}],"suppr
essedMessages":[],"er
rorCount":1,"fatalErr
orCount":0,"warningCo
unt":0,"fixableErrorC
ount":0,"fixableWarni
ngCount":0,"source":"
import { useState, 
useEffect } from 
'react'\r\nimport { 
claimTaskAction, 
releaseTaskAction } 
from '@/app/actions/t
ask-claiming'\r\nimpo
rt type { 
ClaimTaskResult } 
from '@/lib/task-clai
ming'\r\n\r\nexport 
function 
useTaskClaim(taskId: 
string) {\r\n    
const [isClaimed, 
setIsClaimed] = 
useState(false)\r\n  
  const [claimedBy, 
setClaimedBy] = 
useState<string | 
null>(null)\r\n    
const [expiresAt, 
setExpiresAt] = 
useState<Date | 
null>(null)\r\n\r\n  
  useEffect(() => 
{\r\n        let 
interval: NodeJS.Time
out\r\n\r\n        
const claim = async 
() => {\r\n          
  const result: 
ClaimTaskResult = 
await claimTaskAction
(taskId)\r\n         
   if 
(result.success) 
{\r\n                
if (result.claimed) 
{\r\n                
    setIsClaimed(true
)\r\n                
    setExpiresAt(resu
lt.expiresAt ? new Da
te(result.expiresAt) 
: null)\r\n          
      } else {\r\n   
                 // 
Feature disabled\r\n 
                   se
tIsClaimed(true)\r\n 
               }\r\n 
           } else 
{\r\n                
setIsClaimed(false)\r
\n                // 
Safely access 
claimedBy if it 
exists\r\n           
     const user = 
'claimedBy' in 
result ? 
result.claimedBy : 
null\r\n             
   setClaimedBy(user 
|| 'Unknown')\r\n    
        }\r\n        
}\r\n\r\n        
claim()\r\n        
// Refresh claim 
every 4 minutes (if 
duration is 5 
mins)\r\n        
interval = 
setInterval(claim, 4 
* 60 * 1000)\r\n\r\n 
       return () => 
{\r\n            clea
rInterval(interval)\r
\n            release
TaskAction(taskId)\r\
n        }\r\n    }, 
[taskId])\r\n\r\n    
return { isClaimed, 
claimedBy, expiresAt 
}\r\n}\r\n","usedDepr
ecatedRules":[]},{"fi
lePath":"C:\\Users\\s
haun\\Antigrabity Wor
kspace\\auditforecast
er\\src\\lib\\__tests
__\\task-claiming.tes
t.ts","messages":[{"r
uleId":"@typescript-e
slint/no-explicit-any
","severity":2,"messa
ge":"Unexpected any. 
Specify a different t
ype.","line":37,"colu
mn":68,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":37,"endColumn
":71,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1156,1159],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1156,1159],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":48,"colu
mn":14,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":48,"endColumn
":17,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[1643,1646],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
1643,1646],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]},{"ru
leId":"@typescript-es
lint/no-explicit-any"
,"severity":2,"messag
e":"Unexpected any. 
Specify a different t
ype.","line":61,"colu
mn":14,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":61,"endColumn
":17,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[2158,2161],"text":
"unknown"},"desc":"Us
e `unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
2158,2161],"text":"ne
ver"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":3,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { 
describe, it, 
expect, vi, 
beforeEach } from 
'vitest'\r\nimport { 
claimTask } from '../
task-claiming'\r\nimp
ort { prisma } from '
@/lib/prisma'\r\nimpo
rt { 
isFeatureEnabled } 
from '@/lib/feature-f
lags'\r\n\r\nvi.mock(
'@/lib/prisma', () 
=> ({\r\n    prisma: 
{\r\n        
taskClaim: {\r\n     
       deleteMany: 
vi.fn(),\r\n         
   create: 
vi.fn(),\r\n         
   findUnique: 
vi.fn(),\r\n         
   update: 
vi.fn()\r\n        
}\r\n    }\r\n}))\r\n
\r\nvi.mock('@/lib/fe
ature-flags', () => 
({\r\n    
FeatureFlags: 
{},\r\n    
isFeatureEnabled: vi.
fn()\r\n}))\r\n\r\nde
scribe('Task 
Claiming', () => 
{\r\n    
beforeEach(() => 
{\r\n        vi.clear
AllMocks()\r\n       
 vi.mocked(isFeatureE
nabled).mockReturnVal
ue(true)\r\n    
})\r\n\r\n    
it('should allow 
access if feature 
disabled', async () 
=> {\r\n        vi.mo
cked(isFeatureEnabled
).mockReturnValue(fal
se)\r\n        const 
result = await 
claimTask('task-1', 
'user-1')\r\n        
expect(result.success
).toBe(true)\r\n     
   expect(result.clai
med).toBe(false)\r\n 
       expect(prisma.
taskClaim.create).not
.toHaveBeenCalled()\r
\n    })\r\n\r\n    
it('should claim 
task successfully', 
async () => {\r\n    
    vi.mocked(prisma.
taskClaim.create).moc
kResolvedValue({} as 
any)\r\n        
const result = await 
claimTask('task-1', 
'user-1')\r\n        
expect(result.success
).toBe(true)\r\n     
   expect(result.clai
med).toBe(true)\r\n  
  })\r\n\r\n    
it('should return 
failure if already 
claimed by another', 
async () => {\r\n    
    vi.mocked(prisma.
taskClaim.create).moc
kRejectedValue(new 
Error('Unique 
constraint'))\r\n    
    vi.mocked(prisma.
taskClaim.findUnique)
.mockResolvedValue({\
r\n            
userId: 
'user-2',\r\n        
    user: { name: 
'Other User' }\r\n   
     } as 
any)\r\n\r\n        
const result = await 
claimTask('task-1', 
'user-1')\r\n        
expect(result.success
).toBe(false)\r\n    
    expect(result.cla
imedBy).toBe('Other 
User')\r\n    
})\r\n\r\n    
it('should extend 
claim if already 
claimed by self', 
async () => {\r\n    
    vi.mocked(prisma.
taskClaim.create).moc
kRejectedValue(new 
Error('Unique 
constraint'))\r\n    
    vi.mocked(prisma.
taskClaim.findUnique)
.mockResolvedValue({\
r\n            id: 
'claim-1',\r\n       
     userId: 
'user-1',\r\n        
    user: { name: 
'Me' }\r\n        } 
as any)\r\n\r\n      
  const result = 
await 
claimTask('task-1', 
'user-1')\r\n        
expect(result.success
).toBe(true)\r\n     
   expect(prisma.task
Claim.update).toHaveB
eenCalled()\r\n    })
\r\n})\r\n","usedDepr
ecatedRules":[]},{"fi
lePath":"C:\\Users\\s
haun\\Antigrabity Wor
kspace\\auditforecast
er\\src\\lib\\audit.t
s","messages":[{"rule
Id":"@typescript-esli
nt/no-explicit-any","
severity":2,"message"
:"Unexpected any. 
Specify a different t
ype.","line":11,"colu
mn":30,"nodeType":"TS
AnyKeyword","messageI
d":"unexpectedAny","e
ndLine":11,"endColumn
":33,"suggestions":[{
"messageId":"suggestU
nknown","fix":{"range
":[302,305],"text":"u
nknown"},"desc":"Use 
`unknown` instead, 
this will force you 
to explicitly, and 
safely assert the 
type is correct."},{"
messageId":"suggestNe
ver","fix":{"range":[
302,305],"text":"neve
r"},"desc":"Use 
`never` instead, 
this is useful when 
instantiating 
generic type 
parameters that you 
don't need to know 
the type of."}]}],"su
ppressedMessages":[],
"errorCount":1,"fatal
ErrorCount":0,"warnin
gCount":0,"fixableErr
orCount":0,"fixableWa
rningCount":0,"source
":"import { prisma } 
from \"@/lib/prisma\"
\r\nimport { auth } 
from 
\"@/auth\"\r\nimport 
{ headers } from \"ne
xt/headers\"\r\n\r\ni
mport { Prisma } 
from \"@prisma/client
\"\r\n\r\ninterface 
AuditLogParams {\r\n 
   entityType: 
string\r\n    
entityId: string\r\n 
   action: 
\"CREATE\" | 
\"UPDATE\" | 
\"DELETE\"\r\n    
changes?: 
Record<string, 
any>\r\n    tx?: Pris
ma.TransactionClient 
// Optional 
transaction client\r\
n}\r\n\r\nexport 
async function 
logAudit({ 
entityType, 
entityId, action, 
changes, tx }: 
AuditLogParams) 
{\r\n    try {\r\n   
     const session = 
await auth()\r\n     
   const headersList 
= await 
headers()\r\n        
const ip = headersLis
t.get('x-forwarded-fo
r') || 
'unknown'\r\n\r\n    
    const actorId = 
session?.user?.id || 
'SYSTEM'\r\n\r\n     
   const db = tx || 
prisma\r\n\r\n       
 await db.auditLog.cr
eate({\r\n           
 data: {\r\n         
       
entityType,\r\n      
          
entityId,\r\n        
        action,\r\n  
              
actorId,\r\n         
       changes: 
changes ? JSON.parse(
JSON.stringify(change
s)) : undefined,\r\n 
               
ipAddress: ip\r\n    
        }\r\n        
})\r\n    } catch 
(error) {\r\n        
console.error('Failed
 to write audit 
log:', error)\r\n    
    // We do NOT 
throw here, to 
prevent blocking the 
main action if 
logging fails\r\n    
}\r\n}\r\n","usedDepr
ecatedRules":[]},{"fi
lePath":"C:\\Users\\s
haun\\Antigrabity Wor
kspace\\auditforecast
er\\src\\lib\\forecas
ting.ts","messages":[
{"ruleId":"@typescrip
t-eslint/no-unused-va
rs","severity":1,"mes
sage":"'x' is 
defined but never use
d.","line":18,"column
":19,"nodeType":null,
"messageId":"unusedVa
r","endLine":18,"endC
olumn":20}],"suppress
edMessages":[],"error
Count":0,"fatalErrorC
ount":0,"warningCount
":1,"fixableErrorCoun
t":0,"fixableWarningC
ount":0,"source":"/**
\r\n * Simple Linear 
Regression for 
Revenue 
Forecasting\r\n * y 
= mx + b\r\n * m = 
slope (trend)\r\n * 
b = y-intercept\r\n 
*/\r\n\r\nexport 
interface DataPoint 
{\r\n    x: number 
// Time (e.g., month 
index 0, 1, 2)\r\n   
 y: number // Value 
(e.g., revenue)\r\n}\
r\n\r\nexport 
function 
calculateTrend(data: 
DataPoint[]) {\r\n   
 const n = 
data.length\r\n    
if (n < 2) return 
{\r\n        slope: 
0,\r\n        
intercept: 0,\r\n    
    predict: (x: 
number) => 
data[0]?.y || 0\r\n  
  }\r\n\r\n    let 
sumX = 0\r\n    let 
sumY = 0\r\n    let 
sumXY = 0\r\n    let 
sumXX = 0\r\n\r\n    
for (const point of 
data) {\r\n        
sumX += point.x\r\n  
      sumY += 
point.y\r\n        
sumXY += point.x * 
point.y\r\n        
sumXX += point.x * 
point.x\r\n    
}\r\n\r\n    const 
slope = (n * sumXY - 
sumX * sumY) / (n * 
sumXX - sumX * 
sumX)\r\n    const 
intercept = (sumY - 
slope * sumX) / 
n\r\n\r\n    return 
{\r\n        
slope,\r\n        
intercept,\r\n       
 predict: (x: 
number) => slope * x 
+ intercept\r\n    
}\r\n}\r\n\r\nexport 
function predictNextM
onth(history: 
number[]) {\r\n    
// Map history to 
x,y points (0, 
val0), (1, val1), 
...\r\n    const 
data = 
history.map((val, 
idx) => ({ x: idx, 
y: val }))\r\n    
const { predict } = c
alculateTrend(data)\r
\n\r\n    // Predict 
next month (index = 
length)\r\n    const 
nextIndex = 
history.length\r\n   
 const prediction = p
redict(nextIndex)\r\n
\r\n    return 
Math.max(0, 
prediction) // 
Revenue cannot be neg
ative\r\n}\r\n","used
DeprecatedRules":[]},
{"filePath":"C:\\User
s\\shaun\\Antigrabity
 Workspace\\auditfore
caster\\src\\lib\\int
egrations\\supplypro-
client.ts","messages"
:[{"ruleId":"@typescr
ipt-eslint/no-unused-
vars","severity":1,"m
essage":"'SupplyProOr
derSchema' is 
assigned a value but 
only used as a type."
,"line":5,"column":7,
"nodeType":null,"mess
ageId":"usedOnlyAsTyp
e","endLine":5,"endCo
lumn":27}],"suppresse
dMessages":[],"errorC
ount":0,"fatalErrorCo
unt":0,"warningCount"
:1,"fixableErrorCount
":0,"fixableWarningCo
unt":0,"source":"impo
rt { z } from 
'zod';\r\nimport { 
prisma } from '@/lib/
prisma';\r\n\r\n// 
Schema for SupplyPro 
Order (based on 
typical construction 
ERPs)\r\nconst 
SupplyProOrderSchema 
= z.object({\r\n    
OrderID: 
z.string(),\r\n    
BuilderName: 
z.string(),\r\n    
Subdivision: z.string
().optional(),\r\n   
 LotNumber: 
z.string(),\r\n    
Address: 
z.string(),\r\n    
City: 
z.string(),\r\n    
State: 
z.string(),\r\n    
Zip: z.string(),\r\n 
   TaskDate: 
z.string(), // ISO 
Date\r\n    
TaskName: 
z.string(),\r\n    
Status: z.string(),\r
\n});\r\n\r\ntype 
SupplyProOrder = 
z.infer<typeof Supply
ProOrderSchema>;\r\n\
r\nexport class 
SupplyProClient 
{\r\n    private 
apiKey: string;\r\n  
  private baseUrl: 
string;\r\n\r\n    
constructor(apiKey: 
string) {\r\n        
this.apiKey = 
apiKey;\r\n        
this.baseUrl = 'https
://api.supplypro.com/
v1'; // Placeholder 
URL\r\n    }\r\n\r\n 
   /**\r\n     * 
Fetches new orders 
from SupplyPro\r\n   
  */\r\n    async fet
chNewOrders(startDate
: Date): Promise<Supp
lyProOrder[]> {\r\n  
      if 
(!this.apiKey) {\r\n 
           console.wa
rn('SupplyPro Sync 
Skipped: No API 
Key');\r\n           
 return [];\r\n      
  }\r\n\r\n        
// Mock 
Implementation\r\n   
     // In reality, 
this would be an 
axios/fetch call\r\n 
       console.log(`F
etching SupplyPro 
orders since ${startD
ate.toISOString()}`);
\r\n        return 
[];\r\n    }\r\n\r\n 
   /**\r\n     * 
Syncs orders to 
local Jobs\r\n     
*/\r\n    async 
syncOrdersToJobs() 
{\r\n        const 
orders = await this.f
etchNewOrders(new 
Date()); // Fetch 
for today\r\n\r\n    
    for (const order 
of orders) {\r\n     
       // Check if 
job exists\r\n       
     const 
existingJob = await p
risma.job.findUnique(
{\r\n                
where: { 
buildProOrderId: 
order.OrderID }\r\n  
          
});\r\n\r\n          
  if (!existingJob) 
{\r\n                
// Create Job\r\n    
            await pri
sma.job.create({\r\n 
                   
data: {\r\n          
              
buildProOrderId: 
order.OrderID,\r\n   
                     
builder: {\r\n       
                     
connectOrCreate: 
{\r\n                
                
where: { id: 
'unknown' }, // 
Ideally match by 
name\r\n             
                   
create: { name: 
order.BuilderName 
}\r\n                
            }\r\n    
                    
},\r\n               
         lotNumber: 
order.LotNumber,\r\n 
                     
  streetAddress: 
order.Address,\r\n   
                     
city: 
order.City,\r\n      
                  
address: 
`${order.Address}, 
${order.City}, 
${order.State} 
${order.Zip}`,\r\n   
                     
scheduledDate: new Da
te(order.TaskDate),\r
\n                   
     status: 
'PENDING',\r\n       
                 
buildProSyncedAt: 
new Date(),\r\n      
              }\r\n  
              
});\r\n            
}\r\n        }\r\n   
 }\r\n}\r\n","usedDep
recatedRules":[]},{"f
ilePath":"C:\\Users\\
shaun\\Antigrabity Wo
rkspace\\auditforecas
ter\\src\\lib\\offlin
e-storage.ts","messag
es":[{"ruleId":"@type
script-eslint/no-unus
ed-vars","severity":1
,"message":"'newVersi
on' is defined but 
never used.","line":9
6,"column":37,"nodeTy
pe":null,"messageId":
"unusedVar","endLine"
:96,"endColumn":47},{
"ruleId":"@typescript
-eslint/no-unused-var
s","severity":1,"mess
age":"'transaction' 
is defined but never 
used.","line":96,"col
umn":49,"nodeType":nu
ll,"messageId":"unuse
dVar","endLine":96,"e
ndColumn":60}],"suppr
essedMessages":[],"er
rorCount":0,"fatalErr
orCount":0,"warningCo
unt":2,"fixableErrorC
ount":0,"fixableWarni
ngCount":0,"source":"
import { openDB, 
DBSchema, 
IDBPDatabase } from 
'idb';\r\nimport { 
EquipmentClientInput 
} from './schemas';\r
\n\r\nexport 
interface 
ChecklistItem {\r\n  
  id: string;\r\n    
label: string;\r\n   
 status: 'PASS' | 
'FAIL' | 'NA' | 
null;\r\n    note: st
ring;\r\n}\r\n\r\nexp
ort interface 
InspectionDraft 
{\r\n    id: 
string;\r\n    
jobId: string;\r\n   
 data: 
Record<string, 
unknown>;\r\n    
checklist: 
ChecklistItem[];\r\n 
   updatedAt?: 
number;\r\n    
synced?: boolean;\r\n
}\r\n\r\nexport 
interface 
OfflinePhoto {\r\n   
 id: string;\r\n    
inspectionId: 
string;\r\n    file: 
Blob;\r\n    
caption: string;\r\n 
   category: 
string;\r\n    
createdAt?: 
number;\r\n    
synced?: boolean;\r\n
}\r\n\r\nexport 
interface 
EquipmentDraft {\r\n 
   id: string; // 
Temporary ID (e.g., 
uuid)\r\n    data: Eq
uipmentClientInput;\r
\n    createdAt: 
number;\r\n    
synced: boolean;\r\n}
\r\n\r\nexport 
interface 
MutationQueueItem 
{\r\n    id: string; 
// UUID\r\n    type: 
'CREATE' | 'UPDATE' 
| 'DELETE';\r\n    
resource: 
'equipment' | 
'inspector' | 'job' 
| 'vehicle' | 
'inspection';\r\n    
payload: 
unknown;\r\n    
createdAt: 
number;\r\n    
retryCount: 
number;\r\n    
error?: string;\r\n}\
r\n\r\nexport 
interface FieldLog 
{\r\n    id: 
string;\r\n    
level: 'info' | 
'warn' | 
'error';\r\n    
message: string;\r\n 
   details?: 
Record<string, 
unknown>;\r\n    
timestamp: 
number;\r\n    
synced: boolean;\r\n}
\r\n\r\ninterface 
OfflineDB extends 
DBSchema {\r\n    
inspections: {\r\n   
     key: 
string;\r\n        
value: 
InspectionDraft;\r\n 
       indexes: { 
'by-job': string 
};\r\n    };\r\n    
photos: {\r\n        
key: string;\r\n     
   value: 
OfflinePhoto;\r\n    
    indexes: { 
'by-inspection': 
string };\r\n    
};\r\n    equipment: 
{\r\n        key: 
string;\r\n        
value: 
EquipmentDraft;\r\n  
  };\r\n    
mutation_queue: 
{\r\n        key: 
string;\r\n        
value: MutationQueueI
tem;\r\n        
indexes: { 
'by-created': number 
};\r\n    };\r\n    
logs: {\r\n        
key: string;\r\n     
   value: 
FieldLog;\r\n        
indexes: { 
'by-timestamp': 
number };\r\n    
};\r\n    
failed_mutations: 
{\r\n        key: 
string;\r\n        
value: MutationQueueI
tem;\r\n        
indexes: { 
'by-created': number 
};\r\n    
};\r\n}\r\n\r\nconst 
DB_NAME = 'audit-fore
caster-offline';\r\nc
onst DB_VERSION = 
5;\r\n\r\nlet 
dbPromise: Promise<ID
BPDatabase<OfflineDB>
>;\r\n\r\nfunction 
getDB() {\r\n    if 
(!dbPromise) {\r\n   
     dbPromise = open
DB<OfflineDB>(DB_NAME
, DB_VERSION, {\r\n  
          
upgrade(db, 
oldVersion, 
newVersion, 
transaction) {\r\n   
             if 
(oldVersion < 1) 
{\r\n                
    const 
inspectionStore = db.
createObjectStore('in
spections', { 
keyPath: 'id' 
});\r\n              
      inspectionStore
.createIndex('by-job'
, 'jobId');\r\n\r\n  
                  
const photoStore = db
.createObjectStore('p
hotos', { keyPath: 
'id' });\r\n         
           photoStore
.createIndex('by-insp
ection', 
'inspectionId');\r\n 
               }\r\n 
               if 
(oldVersion < 2) 
{\r\n                
    if (!db.objectSto
reNames.contains('equ
ipment')) {\r\n      
                  db.
createObjectStore('eq
uipment', { keyPath: 
'id' });\r\n         
           }\r\n     
           }\r\n     
           if 
(oldVersion < 3) 
{\r\n                
    if (!db.objectSto
reNames.contains('mut
ation_queue')) {\r\n 
                     
  const queueStore = 
db.createObjectStore(
'mutation_queue', { 
keyPath: 'id' 
});\r\n              
          queueStore.
createIndex('by-creat
ed', 
'createdAt');\r\n    
                
}\r\n                
}\r\n                
if (oldVersion < 4) 
{\r\n                
    if (!db.objectSto
reNames.contains('log
s')) {\r\n           
             const 
logStore = db.createO
bjectStore('logs', { 
keyPath: 'id' 
});\r\n              
          logStore.cr
eateIndex('by-timesta
mp', 
'timestamp');\r\n    
                
}\r\n                
}\r\n                
if (oldVersion < 5) 
{\r\n                
    if (!db.objectSto
reNames.contains('fai
led_mutations')) 
{\r\n                
        const 
failedStore = db.crea
teObjectStore('failed
_mutations', { 
keyPath: 'id' 
});\r\n              
          failedStore
.createIndex('by-crea
ted', 
'createdAt');\r\n    
                
}\r\n                
}\r\n            
},\r\n        
});\r\n    }\r\n    
return dbPromise;\r\n
}\r\n\r\nexport 
async function 
logFieldEvent(level: 
'info' | 'warn' | 
'error', message: 
string, details?: 
Record<string, 
unknown>) {\r\n    
const db = await 
getDB();\r\n    
await db.put('logs', 
{\r\n        id: cryp
to.randomUUID(),\r\n 
       level,\r\n    
    message,\r\n     
   details,\r\n      
  timestamp: 
Date.now(),\r\n      
  synced: false\r\n  
  });\r\n}\r\n\r\nexp
ort async function 
getFieldLogs() {\r\n 
   const db = await 
getDB();\r\n    
return db.getAllFromI
ndex('logs', 'by-time
stamp');\r\n}\r\n\r\n
export async 
function 
clearFieldLogs() 
{\r\n    const db = 
await getDB();\r\n   
 await db.clear('logs
');\r\n}\r\n\r\nexpor
t async function enqu
eueMutation(item: 
MutationQueueItem) 
{\r\n    const db = 
await getDB();\r\n   
 await db.put('mutati
on_queue', item);\r\n
}\r\n\r\nexport 
async function 
getMutationQueue() 
{\r\n    const db = 
await getDB();\r\n   
 return db.getAllFrom
Index('mutation_queue
', 'by-created');\r\n
}\r\n\r\nexport 
async function 
removeMutation(id: 
string) {\r\n    
const db = await 
getDB();\r\n    
await db.delete('muta
tion_queue', id);\r\n
}\r\n\r\nexport 
async function addFai
ledMutation(item: 
MutationQueueItem) 
{\r\n    const db = 
await getDB();\r\n   
 await db.put('failed
_mutations', item);\r
\n}\r\n\r\nexport 
async function 
getFailedMutations() 
{\r\n    const db = 
await getDB();\r\n   
 return db.getAllFrom
Index('failed_mutatio
ns', 'by-created');\r
\n}\r\n\r\nexport 
async function remove
FailedMutation(id: 
string) {\r\n    
const db = await 
getDB();\r\n    
await db.delete('fail
ed_mutations', id);\r
\n}\r\n\r\nexport 
async function saveIn
spectionDraft(inspect
ion: 
InspectionDraft) 
{\r\n    const db = 
await getDB();\r\n   
 await db.put('inspec
tions', {\r\n        
...inspection,\r\n   
     updatedAt: 
Date.now(),\r\n      
  synced: false,\r\n 
   });\r\n}\r\n\r\nex
port async function g
etInspectionDraft(id:
 string) {\r\n    
const db = await 
getDB();\r\n    
return db.get('inspec
tions', id);\r\n}\r\n
\r\nexport async 
function getInspectio
nDraftByJobId(jobId: 
string) {\r\n    
const db = await 
getDB();\r\n    
return db.getFromInde
x('inspections', 
'by-job', jobId);\r\n
}\r\n\r\nexport 
async function saveOf
flinePhoto(photo: 
OfflinePhoto) {\r\n  
  const db = await 
getDB();\r\n    
await 
db.put('photos', 
{\r\n        
...photo,\r\n        
createdAt: 
Date.now(),\r\n      
  synced: false,\r\n 
   });\r\n}\r\n\r\nex
port async function g
etOfflinePhotos(inspe
ctionId: string) 
{\r\n    const db = 
await getDB();\r\n   
 return db.getAllFrom
Index('photos', 
'by-inspection', insp
ectionId);\r\n}\r\n\r
\nexport async 
function getAllUnsync
edInspections() 
{\r\n    const db = 
await getDB();\r\n   
 const all = await db
.getAll('inspections'
);\r\n    return 
all.filter(i => !i.sy
nced);\r\n}\r\n\r\nex
port async function m
arkInspectionSynced(i
d: string) {\r\n    
const db = await 
getDB();\r\n    
const inspection = 
await db.get('inspect
ions', id);\r\n    
if (inspection) 
{\r\n        await db
.put('inspections', 
{ ...inspection, 
synced: true });\r\n 
   }\r\n}\r\n\r\n// 
--- Equipment 
Offline Logic 
---\r\n\r\nexport 
async function saveEq
uipmentDraft(draft: 
EquipmentDraft) 
{\r\n    const db = 
await getDB();\r\n   
 await 
db.put('equipment', 
{\r\n        
...draft,\r\n        
createdAt: 
Date.now(),\r\n      
  synced: false,\r\n 
   });\r\n}\r\n\r\nex
port async function g
etEquipmentDraft(id: 
string) {\r\n    
const db = await 
getDB();\r\n    
return 
db.get('equipment', i
d);\r\n}\r\n\r\nexpor
t async function getA
llUnsyncedEquipment()
 {\r\n    const db = 
await getDB();\r\n   
 const all = await db
.getAll('equipment');
\r\n    return 
all.filter(e => !e.sy
nced);\r\n}\r\n\r\nex
port async function m
arkEquipmentSynced(id
: string) {\r\n    
const db = await 
getDB();\r\n    
const item = await 
db.get('equipment', 
id);\r\n    if 
(item) {\r\n        
await 
db.put('equipment', 
{ ...item, synced: 
true });\r\n    }\r\n
}\r\n","usedDeprecate
dRules":[]},{"filePat
h":"C:\\Users\\shaun\
\Antigrabity Workspac
e\\auditforecaster\\s
rc\\lib\\sync-engine.
ts","messages":[{"rul
eId":"@typescript-esl
int/no-unused-vars","
severity":1,"message"
:"'EquipmentClientInp
ut' is defined but 
never used.","line":8
,"column":10,"nodeTyp
e":null,"messageId":"
unusedVar","endLine":
8,"endColumn":30},{"r
uleId":"@typescript-e
slint/no-unused-vars"
,"severity":1,"messag
e":"'JobInput' is 
defined but never use
d.","line":8,"column"
:32,"nodeType":null,"
messageId":"unusedVar
","endLine":8,"endCol
umn":40}],"suppressed
Messages":[],"errorCo
unt":0,"fatalErrorCou
nt":0,"warningCount":
2,"fixableErrorCount"
:0,"fixableWarningCou
nt":0,"source":"impor
t {\r\n    
enqueueMutation,\r\n 
   getMutationQueue,\
r\n    
removeMutation,\r\n  
  addFailedMutation,\
r\n    MutationQueueI
tem\r\n} from './offl
ine-storage';\r\nimpo
rt { EquipmentClientI
nput, JobInput } 
from '@/lib/schemas';
\r\n\r\n// Adapters 
moved to sync-actions
.ts\r\n\r\nexport 
class SyncEngine 
{\r\n    private 
isProcessing = 
false;\r\n    
private subscribers: 
((isSyncing: 
boolean) => void)[] 
= [];\r\n\r\n    
subscribe(callback: 
(isSyncing: boolean) 
=> void) {\r\n       
 this.subscribers.pus
h(callback);\r\n     
   return () => 
{\r\n            
this.subscribers = th
is.subscribers.filter
(cb => cb !== 
callback);\r\n       
 };\r\n    }\r\n\r\n 
   private 
notify(isSyncing: 
boolean) {\r\n       
 this.subscribers.for
Each(cb => 
cb(isSyncing));\r\n  
  }\r\n\r\n    async 
enqueue(\r\n        
type: MutationQueueIt
em['type'],\r\n      
  resource: MutationQ
ueueItem['resource'],
\r\n        payload: 
unknown\r\n    ) 
{\r\n        const 
item: 
MutationQueueItem = 
{\r\n            id: 
crypto.randomUUID(),\
r\n            
type,\r\n            
resource,\r\n        
    payload,\r\n     
       createdAt: 
Date.now(),\r\n      
      retryCount: 
0\r\n        
};\r\n\r\n        
await enqueueMutation
(item);\r\n        
this.triggerSync(); 
// Try to sync 
immediately\r\n    
}\r\n\r\n    async 
triggerSync() {\r\n  
      if 
(this.isProcessing) 
return;\r\n        
if 
(!navigator.onLine) 
return;\r\n\r\n      
  this.isProcessing 
= true;\r\n        th
is.notify(true);\r\n\
r\n        try {\r\n 
           await this
.processQueue();\r\n 
       } finally 
{\r\n            
this.isProcessing = 
false;\r\n           
 this.notify(false);\
r\n        }\r\n    
}\r\n\r\n    private 
async processQueue() 
{\r\n        const 
queue = await getMuta
tionQueue();\r\n     
   if (queue.length 
=== 0) 
return;\r\n\r\n      
  const isV2 = 
typeof window !== 
'undefined' && proces
s.env.NEXT_PUBLIC_ENA
BLE_OFFLINE_SYNC_V2 
=== 'true';\r\n\r\n  
      // Process 
sequentially 
(FIFO)\r\n        
for (const item of 
queue) {\r\n         
   const actionKey = 
`${item.resource}:${i
tem.type}`;\r\n\r\n  
          // 
Dynamically import 
ACTION_MAP to avoid 
circular 
dependencies\r\n     
       const { 
ACTION_MAP } = await 
import('./sync-action
s');\r\n            
const action = ACTION
_MAP[actionKey];\r\n\
r\n            if 
(!action) {\r\n      
          console.err
or(`[SyncEngine] No 
action found for 
${actionKey}`);\r\n  
              await r
emoveMutation(item.id
);\r\n               
 continue;\r\n       
     }\r\n\r\n       
     try {\r\n       
         console.log(
`[SyncEngine] 
Processing 
${actionKey} (${item.
id})`);\r\n\r\n      
          // Execute 
Server Action\r\n    
            const 
result = await action
(item.payload);\r\n\r
\n                if 
(result.success) 
{\r\n                
    // Success! 
Remove from 
queue\r\n            
        await removeM
utation(item.id);\r\n
                    c
onsole.log(`[SyncEngi
ne] Synced 
${item.id}`);\r\n    
            } else 
{\r\n                
    // Server 
returned failure\r\n 
                   co
nsole.error(`[SyncEng
ine] Server error 
for ${item.id}:`, res
ult.message);\r\n\r\n
                    
if (isV2) {\r\n      
                  // 
V2: Handle 
Retries\r\n          
              if 
(item.retryCount < 
3) {\r\n             
               item.r
etryCount++;\r\n     
                     
  item.error = 
result.message;\r\n  
                     
     await enqueueMut
ation(item); // 
Update in DB\r\n     
                     
  console.log(`[SyncE
ngine] Retrying 
${item.id} (Attempt $
{item.retryCount}/3)`
);\r\n\r\n           
                 // 
Exponential Backoff: 
1s, 2s, 4s\r\n       
                     
const delay = 
Math.pow(2, 
item.retryCount) * 
1000;\r\n            
                
await new 
Promise(resolve => 
setTimeout(resolve, 
delay));\r\n         
                   
continue; // Try 
again (or move to 
next if we want to 
skip head-of-line 
blocking, but FIFO 
implies we should 
probably stop or 
retry this one)\r\n  
                     
     // Actually, if 
we continue, we 
process the next 
item. But if this 
one failed, 
dependent items 
might fail.\r\n      
                     
 // For V2, let's 
stop processing to 
preserve order.\r\n  
                     
     break;\r\n      
                  } 
else {\r\n           
                 // 
Max retries 
reached\r\n          
                  con
sole.error(`[SyncEngi
ne] Max retries 
reached for 
${item.id}. Moving 
to DLQ.`);\r\n       
                     
await addFailedMutati
on(item);\r\n        
                    
await removeMutation(
item.id);\r\n        
                
}\r\n                
    } else {\r\n     
                   
throw new Error(resul
t.message);\r\n      
              }\r\n  
              
}\r\n\r\n            
} catch (error) 
{\r\n                
console.error(`[SyncE
ngine] 
Network/System error 
for ${item.id}:`, 
error);\r\n\r\n      
          if (isV2) 
{\r\n                
    if 
(item.retryCount < 
3) {\r\n             
           item.retry
Count++;\r\n         
               
item.error = 
String(error);\r\n   
                     
await enqueueMutation
(item);\r\n          
              break; 
// Stop processing 
on network error\r\n 
                   } 
else {\r\n           
             await re
moveMutation(item.id)
;\r\n                
    }\r\n            
    }\r\n            
    break;\r\n       
     }\r\n        
}\r\n    
}\r\n}\r\n\r\nexport 
const syncEngine = 
new SyncEngine();\r\n
\r\n// Auto-start 
sync when coming 
online\r\nif (typeof 
window !== 
'undefined') {\r\n   
 window.addEventListe
ner('online', () => 
{\r\n        console.
log('[SyncEngine] 
Online detected, 
triggering 
sync...');\r\n       
 syncEngine.triggerSy
nc();\r\n    });\r\n}
\r\n","usedDeprecated
Rules":[]},{"filePath
":"C:\\Users\\shaun\\
Antigrabity Workspace
\\auditforecaster\\sr
c\\lib\\task-claiming
.ts","messages":[{"ru
leId":"@typescript-es
lint/no-unused-vars",
"severity":1,"message
":"'FeatureFlags' is 
defined but never use
d.","line":2,"column"
:10,"nodeType":null,"
messageId":"unusedVar
","endLine":2,"endCol
umn":22},{"ruleId":"@
typescript-eslint/no-
unused-vars","severit
y":1,"message":"'erro
r' is defined but 
never used.","line":3
0,"column":14,"nodeTy
pe":null,"messageId":
"unusedVar","endLine"
:30,"endColumn":19}],
"suppressedMessages":
[],"errorCount":0,"fa
talErrorCount":0,"war
ningCount":2,"fixable
ErrorCount":0,"fixabl
eWarningCount":0,"sou
rce":"import { 
prisma } from \"@/lib
/prisma\";\r\nimport 
{ FeatureFlags, 
isFeatureEnabled } 
from \"@/lib/feature-
flags\";\r\n\r\nexpor
t type 
ClaimTaskResult 
=\r\n    | { 
success: true; 
claimed: boolean; 
expiresAt?: Date 
}\r\n    | { 
success: false; 
message: string 
}\r\n    | { 
success: false; 
claimedBy?: string; 
expiresAt?: Date; 
message?: string 
}\r\n\r\nexport 
async function 
claimTask(taskId: 
string, userId: 
string, 
durationSeconds = 
300): Promise<ClaimTa
skResult> {\r\n    
if (!isFeatureEnabled
('ENABLE_TASK_CLAIMIN
G')) {\r\n        
return { success: 
true, claimed: false 
}; // Feature 
disabled, allow 
access\r\n    
}\r\n\r\n    // 
Cleanup expired 
claims first (lazy 
cleanup)\r\n    
await prisma.taskClai
m.deleteMany({\r\n   
     where: { 
expiresAt: { lt: new 
Date() } }\r\n    
});\r\n\r\n    try 
{\r\n        const 
expiresAt = new 
Date(Date.now() + 
durationSeconds * 
1000);\r\n\r\n       
 await prisma.taskCla
im.create({\r\n      
      data: {\r\n    
            
taskId,\r\n          
      userId,\r\n    
            
expiresAt\r\n        
    }\r\n        
});\r\n        
return { success: 
true, claimed: true, 
expiresAt };\r\n    
} catch (error) 
{\r\n        // 
Unique constraint 
violation means it's 
already claimed\r\n  
      const existing 
= await prisma.taskCl
aim.findUnique({\r\n 
           where: { 
taskId },\r\n        
    include: { user: 
true }\r\n        
});\r\n\r\n        
if (existing && 
existing.userId === 
userId) {\r\n        
    // Extend own 
claim\r\n            
const expiresAt = 
new Date(Date.now() 
+ durationSeconds * 
1000);\r\n           
 await prisma.taskCla
im.update({\r\n      
          where: { 
id: existing.id 
},\r\n               
 data: { expiresAt 
}\r\n            
});\r\n            
return { success: 
true, claimed: true, 
expiresAt };\r\n     
   }\r\n\r\n        
return {\r\n         
   success: 
false,\r\n           
 claimedBy: 
existing?.user.name 
|| 'Unknown',\r\n    
        expiresAt: ex
isting?.expiresAt\r\n
        };\r\n    
}\r\n}\r\n\r\nexport 
async function 
releaseTask(taskId: 
string, userId: 
string) {\r\n    if (
!isFeatureEnabled('EN
ABLE_TASK_CLAIMING'))
 return;\r\n\r\n    
try {\r\n        
await prisma.taskClai
m.deleteMany({\r\n   
         where: 
{\r\n                
taskId,\r\n          
      userId\r\n     
       }\r\n        
});\r\n    } catch 
(error) {\r\n        
console.error(\"Faile
d to release task 
claim:\", 
error);\r\n    }\r\n}
\r\n","usedDeprecated
Rules":[]},{"filePath
":"C:\\Users\\shaun\\
Antigrabity Workspace
\\auditforecaster\\sr
c\\stories\\Page.tsx"
,"messages":[{"ruleId
":"react/no-unescaped
-entities","severity"
:2,"message":"`\"` 
can be escaped with 
`&quot;`, `&ldquo;`, 
`&#34;`, `&rdquo;`.",
"line":39,"column":13
,"nodeType":"JSXText"
,"messageId":"unescap
edEntityAlts","sugges
tions":[{"messageId":
"replaceWithAlt","dat
a":{"alt":"&quot;"},"
fix":{"range":[1096,1
252],"text":"\n      
      Use a 
higher-level 
connected component. 
Storybook helps you 
compose such data 
from the\n           
 &quot;args\" of 
child component 
stories\n          
"},"desc":"Replace 
with `&quot;`."},{"me
ssageId":"replaceWith
Alt","data":{"alt":"&
ldquo;"},"fix":{"rang
e":[1096,1252],"text"
:"\n            Use 
a higher-level 
connected component. 
Storybook helps you 
compose such data 
from the\n           
 &ldquo;args\" of 
child component 
stories\n          
"},"desc":"Replace 
with `&ldquo;`."},{"m
essageId":"replaceWit
hAlt","data":{"alt":"
&#34;"},"fix":{"range
":[1096,1252],"text":
"\n            Use a 
higher-level 
connected component. 
Storybook helps you 
compose such data 
from the\n           
 &#34;args\" of 
child component 
stories\n          
"},"desc":"Replace 
with `&#34;`."},{"mes
sageId":"replaceWithA
lt","data":{"alt":"&r
dquo;"},"fix":{"range
":[1096,1252],"text":
"\n            Use a 
higher-level 
connected component. 
Storybook helps you 
compose such data 
from the\n           
 &rdquo;args\" of 
child component 
stories\n          
"},"desc":"Replace 
with `&rdquo;`."}]},{
"ruleId":"react/no-un
escaped-entities","se
verity":2,"message":"
`\"` can be escaped 
with `&quot;`, 
`&ldquo;`, `&#34;`, `
&rdquo;`.","line":39,
"column":18,"nodeType
":"JSXText","messageI
d":"unescapedEntityAl
ts","suggestions":[{"
messageId":"replaceWi
thAlt","data":{"alt":
"&quot;"},"fix":{"ran
ge":[1096,1252],"text
":"\n            Use 
a higher-level 
connected component. 
Storybook helps you 
compose such data 
from the\n           
 \"args&quot; of 
child component 
stories\n          
"},"desc":"Replace 
with `&quot;`."},{"me
ssageId":"replaceWith
Alt","data":{"alt":"&
ldquo;"},"fix":{"rang
e":[1096,1252],"text"
:"\n            Use 
a higher-level 
connected component. 
Storybook helps you 
compose such data 
from the\n           
 \"args&ldquo; of 
child component 
stories\n          
"},"desc":"Replace 
with `&ldquo;`."},{"m
essageId":"replaceWit
hAlt","data":{"alt":"
&#34;"},"fix":{"range
":[1096,1252],"text":
"\n            Use a 
higher-level 
connected component. 
Storybook helps you 
compose such data 
from the\n           
 \"args&#34; of 
child component 
stories\n          
"},"desc":"Replace 
with `&#34;`."},{"mes
sageId":"replaceWithA
lt","data":{"alt":"&r
dquo;"},"fix":{"range
":[1096,1252],"text":
"\n            Use a 
higher-level 
connected component. 
Storybook helps you 
compose such data 
from the\n           
 \"args&rdquo; of 
child component 
stories\n          
"},"desc":"Replace 
with `&rdquo;`."}]}],
"suppressedMessages":
[],"errorCount":2,"fa
talErrorCount":0,"war
ningCount":0,"fixable
ErrorCount":0,"fixabl
eWarningCount":0,"sou
rce":"import React 
from 
'react';\n\nimport { 
Header } from 
'./Header';\nimport '
./page.css';\n\ntype 
User = {\n  name: str
ing;\n};\n\nexport 
const Page: React.FC 
= () => {\n  const 
[user, setUser] = Rea
ct.useState<User>();\
n\n  return (\n    
<article>\n      
<Header\n        
user={user}\n        
onLogin={() => 
setUser({ name: 
'Jane Doe' })}\n     
   onLogout={() => se
tUser(undefined)}\n  
      
onCreateAccount={() 
=> setUser({ name: 
'Jane Doe' })}\n     
 />\n\n      
<section className=\"
storybook-page\">\n  
      <h2>Pages in 
Storybook</h2>\n     
   <p>\n          We 
recommend building 
UIs with a{' '}\n    
      <a href=\"https
://componentdriven.or
g\" 
target=\"_blank\" 
rel=\"noopener 
noreferrer\">\n      
      <strong>compone
nt-driven</strong>\n 
         </a>{' '}\n 
         process 
starting with atomic 
components and 
ending with pages.\n 
       </p>\n        
<p>\n          
Render pages with 
mock data. This 
makes it easy to 
build and review 
page states 
without\n          
needing to navigate 
to them in your app. 
Here are some handy 
patterns for 
managing page\n      
    data in 
Storybook:\n        
</p>\n        <ul>\n 
         <li>\n      
      Use a 
higher-level 
connected component. 
Storybook helps you 
compose such data 
from the\n           
 \"args\" of child 
component stories\n  
        </li>\n      
    <li>\n           
 Assemble data in 
the page component 
from your services. 
You can mock these 
services out\n       
     using 
Storybook.\n         
 </li>\n        
</ul>\n        <p>\n 
         Get a 
guided tutorial on 
component-driven 
development at{' 
'}\n          <a href
=\"https://storybook.
js.org/tutorials/\" 
target=\"_blank\" 
rel=\"noopener 
noreferrer\">\n      
      Storybook 
tutorials\n          
</a>\n          . 
Read more in the{' 
'}\n          <a href
=\"https://storybook.
js.org/docs\" 
target=\"_blank\" 
rel=\"noopener 
noreferrer\">\n      
      docs\n         
 </a>\n          .\n 
       </p>\n        
<div className=\"tip-
wrapper\">\n         
 <span className=\"ti
p\">Tip</span> 
Adjust the width of 
the canvas with 
the{' '}\n          
<svg width=\"10\" 
height=\"10\" 
viewBox=\"0 0 12 
12\" xmlns=\"http://w
ww.w3.org/2000/svg\">
\n            <g 
fill=\"none\" fillRul
e=\"evenodd\">\n     
         <path\n     
           d=\"M1.5 
5.2h4.8c.3 0 .5.2.5.4
v5.1c-.1.2-.3.3-.4.3H
1.4a.5.5 0 01-.5-.4V5
.7c0-.3.2-.5.5-.5zm0-
2.1h6.9c.3 0 
.5.2.5.4v7a.5.5 0 
01-1 0V4H1.5a.5.5 0 
010-1zm0-2.1h9c.3 0 
.5.2.5.4v9.1a.5.5 0 
01-1 0V2H1.5a.5.5 0 
010-1zm4.3 5.2H2V10h3
.8V6.2z\"\n          
      id=\"a\"\n     
           
fill=\"#999\"\n      
        />\n         
   </g>\n          
</svg>\n          
Viewports addon in 
the toolbar\n        
</div>\n      
</section>\n    
</article>\n  );\n};\
n","usedDeprecatedRul
es":[]}]

info  - Need to 
disable some ESLint 
rules? Learn more 
here: https://nextjs.
org/docs/app/api-refe
rence/config/eslint#d
isabling-rules
