# ESLint Configuration Guide

## Overview

This project uses ESLint with TypeScript, React, and accessibility plugins to maintain code quality and prevent common issues like console statement leakage to production.

**Key Configuration Highlights:**
- ‚úÖ TypeScript support with `@typescript-eslint`
- ‚úÖ React and React Hooks rules
- ‚úÖ JSX accessibility (a11y) checks
- ‚úÖ Import statement ordering
- ‚ö†Ô∏è **Console statements blocked** (except `console.error` and `console.warn`)
- üì¶ Flat config format (ESLint 9+)

---

## Running ESLint

### Basic Commands

**Lint entire codebase:**
```bash
npx eslint .
```

**Lint specific directories:**
```bash
npx eslint client/src server shared
```

**Lint with caching (faster on subsequent runs):**
```bash
npx eslint --cache client/src server shared
```

**Auto-fix issues:**
```bash
npx eslint --fix client/src server shared
```

**Check specific file:**
```bash
npx eslint client/src/App.tsx
```

### Recommended Daily Workflow

```bash
# Quick check with cache before committing
npx eslint --cache .

# Fix auto-fixable issues
npx eslint --fix --cache .
```

---

## Console Statement Rules

### ‚ùå Blocked (will error)
```typescript
console.log('debug info');       // ERROR
console.info('information');     // ERROR
console.debug('debugging');      // ERROR
console.trace('trace info');     // ERROR
```

### ‚úÖ Allowed
```typescript
console.error('Critical error'); // OK - needed for error boundaries
console.warn('Warning message'); // OK - needed for logging
```

### Why This Rule?

- **Production Safety:** Prevents debug logs from leaking to production
- **Performance:** Excessive logging can impact performance
- **Security:** Prevents accidental exposure of sensitive data
- **Error Handling:** Allows proper error logging with `console.error`

---

## VSCode Integration

### Setup Instructions

1. **Install ESLint Extension:**
   - Open VSCode Extensions (Ctrl+Shift+X / Cmd+Shift+X)
   - Search for "ESLint" by Microsoft
   - Click Install

2. **Add to VSCode Settings:**

Create or update `.vscode/settings.json`:

```json
{
  "eslint.enable": true,
  "eslint.validate": [
    "javascript",
    "javascriptreact",
    "typescript",
    "typescriptreact"
  ],
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": "explicit"
  },
  "eslint.format.enable": true
}
```

3. **Restart VSCode** for changes to take effect

### Expected Behavior

- Red squiggly lines under errors
- Yellow squiggly lines under warnings
- Auto-fix on save (if configured)
- Problems panel shows ESLint issues

---

## CI/CD Integration

### GitHub Actions Example

Add to `.github/workflows/lint.yml`:

```yaml
name: ESLint

on: [push, pull_request]

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '20'
      - run: npm ci
      - run: npx eslint . --max-warnings 0
```

### Pre-commit Hook (Husky)

**Install Husky:**
```bash
npm install --save-dev husky lint-staged
npx husky init
```

**Add to `package.json`:**
```json
{
  "lint-staged": {
    "*.{ts,tsx}": [
      "eslint --fix",
      "git add"
    ]
  }
}
```

**Create `.husky/pre-commit`:**
```bash
#!/bin/sh
npx lint-staged
```

---

## Configuration Details

### File Structure

```
eslint.config.js          # Main ESLint configuration (flat config)
.eslintrc.md             # This documentation file
```

### Ignored Files/Folders

The following are automatically ignored:
- `node_modules/`
- `dist/`
- `build/`
- `coverage/`
- `playwright-report/`
- `test-results/`
- Config files (`*.config.js`, `*.config.ts`)

### Lint Targets

- **Client:** `client/src/**/*.{ts,tsx}` (React + Browser)
- **Server:** `server/**/*.ts` (Node.js)
- **Shared:** `shared/**/*.ts` (Common code)
- **Tests:** `**/*.test.{ts,tsx}`, `**/*.spec.{ts,tsx}` (Test files with relaxed rules)

---

## Rule Customization

### Temporarily Disable Rule

**For a single line:**
```typescript
// eslint-disable-next-line no-console
console.log('Temporarily needed for debugging');
```

**For entire file:**
```typescript
/* eslint-disable no-console */
console.log('Multiple logs here');
console.log('Another log');
/* eslint-enable no-console */
```

**‚ö†Ô∏è Warning:** Use sparingly and always re-enable rules after temporary use!

### Override Rules (Advanced)

To modify rules, edit `eslint.config.js`:

```javascript
rules: {
  'no-console': ['error', {
    allow: ['warn', 'error', 'info']  // Add 'info' if needed
  }],
}
```

---

## Common Issues & Troubleshooting

### Issue: "Cannot find module 'eslint-plugin-react'"

**Solution:**
```bash
npm install
```

Ensure all ESLint plugins are installed.

---

### Issue: ESLint not working in VSCode

**Solutions:**
1. Restart VSCode
2. Check Output panel ‚Üí ESLint for errors
3. Verify ESLint extension is installed and enabled
4. Run `npx eslint --version` to confirm installation

---

### Issue: "Parsing error: Cannot read file"

**Solution:**
Check that `tsconfig.json` exists and is valid. ESLint uses TypeScript parser which requires proper TS config.

---

### Issue: Too many warnings/errors

**Solution:**
Auto-fix what you can:
```bash
npx eslint --fix .
```

Then address remaining issues manually or disable specific rules if justified.

---

## Testing the Configuration

### Verify Console Rule Works

Create a test file `test-console.ts`:

```typescript
// This should ERROR
console.log('test');

// This should be OK
console.error('error test');
console.warn('warning test');
```

Run:
```bash
npx eslint test-console.ts
```

Expected output:
```
test-console.ts
  2:1  error  Unexpected console statement  no-console

‚úñ 1 problem (1 error, 0 warnings)
```

Delete the test file after verification.

---

## Best Practices

1. **Run ESLint before committing:**
   ```bash
   npx eslint --cache .
   ```

2. **Use auto-fix for simple issues:**
   ```bash
   npx eslint --fix .
   ```

3. **Keep warnings at zero:** Warnings tend to accumulate. Treat them as errors:
   ```bash
   npx eslint . --max-warnings 0
   ```

4. **Integrate with editor:** Use VSCode ESLint extension for real-time feedback

5. **Don't ignore rules casually:** Every disable comment should have a justifying comment

---

## Performance Tips

- Use `--cache` flag for faster linting (stores cache in `.eslintcache`)
- Lint only changed files in CI using tools like `lint-staged`
- Consider splitting lint job from tests in CI for parallel execution

---

## Additional Resources

- [ESLint Documentation](https://eslint.org/docs/latest/)
- [TypeScript ESLint](https://typescript-eslint.io/)
- [eslint-plugin-react](https://github.com/jsx-eslint/eslint-plugin-react)
- [eslint-plugin-jsx-a11y](https://github.com/jsx-eslint/eslint-plugin-jsx-a11y)

---

## Support

For issues or questions:
1. Check this documentation
2. Review ESLint output for specific error messages
3. Consult team lead or tech lead
4. Review ESLint documentation for specific rules

---

**Last Updated:** October 31, 2025  
**Configuration Format:** ESLint Flat Config (v9+)
