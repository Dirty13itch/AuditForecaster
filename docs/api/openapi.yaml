openapi: 3.0.3
info:
  title: Energy Auditing Platform API
  version: 1.0.0
  description: |
    Production API for the Energy Auditing Platform - a comprehensive field inspection management system for energy efficiency audits, compliance testing, and builder relationship management.
    
    ## Features
    - **Authentication**: Replit OIDC-based authentication with role-based access control
    - **Jobs Management**: Complete lifecycle from creation to completion with assignment workflows
    - **Builder CRM**: Comprehensive builder relationship tracking with contacts, agreements, and programs
    - **Testing**: Blower door, duct leakage, and ventilation compliance testing
    - **Photos**: Advanced photo management with OCR, tagging, and annotation
    - **Reports**: Dynamic report templates with conditional logic and field dependencies
    - **Equipment**: Equipment tracking, calibration, and checkout management
    - **Analytics**: Real-time metrics, KPIs, and business intelligence
    
    ## Base URL
    Production: `https://your-domain.repl.co`
    
    ## Authentication
    All endpoints (except health checks) require authentication via session cookies established through Replit Auth OIDC flow.
    
    ## Rate Limiting
    - Standard endpoints: 100 requests/minute
    - Photo upload endpoints: 20 requests/minute
    - Export endpoints: 10 requests/minute
    
    ## Pagination
    List endpoints support cursor-based pagination with `limit`, `offset`, and `cursor` parameters.
    
  contact:
    name: Platform Team
    email: support@energyaudit.example.com
  license:
    name: Proprietary
    
servers:
  - url: https://your-domain.repl.co
    description: Production server
  - url: http://localhost:5000
    description: Development server

tags:
  - name: Health
    description: System health and status endpoints
  - name: Authentication
    description: User authentication and session management
  - name: Jobs
    description: Inspection job lifecycle management
  - name: Builders
    description: Builder relationship and CRM management
  - name: Photos
    description: Photo upload, management, and processing
  - name: Testing
    description: Compliance testing (blower door, duct leakage, ventilation)
  - name: Equipment
    description: Equipment tracking and calibration
  - name: Reports
    description: Report templates and instances
  - name: Schedule
    description: Calendar and scheduling
  - name: Expenses
    description: Expense tracking and mileage
  - name: Tax Credit
    description: 45L tax credit project management
  - name: QA
    description: Quality assurance and scoring
  - name: Analytics
    description: Business intelligence and metrics
  - name: Export
    description: Data export functionality

paths:
  # ==================== Health & Status ====================
  /healthz:
    get:
      tags: [Health]
      summary: Kubernetes-style health check
      description: Returns 200 if service is alive
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: ok
  
  /readyz:
    get:
      tags: [Health]
      summary: Readiness check
      description: Returns 200 if service is ready to accept traffic
      responses:
        '200':
          description: Service is ready
        '503':
          description: Service not ready
  
  /api/status:
    get:
      tags: [Health]
      summary: Detailed service status
      description: Returns detailed status including dependencies
      responses:
        '200':
          description: Service status
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum: [healthy, degraded, unhealthy]
                  database:
                    type: string
                    enum: [connected, disconnected]
                  objectStorage:
                    type: string
                    enum: [connected, disconnected]
                  uptime:
                    type: number
                    description: Uptime in seconds
  
  /metrics:
    get:
      tags: [Health]
      summary: Prometheus metrics
      description: Returns Prometheus-format metrics for monitoring
      responses:
        '200':
          description: Prometheus metrics
          content:
            text/plain:
              schema:
                type: string
  
  # ==================== Authentication ====================
  /api/csrf-token:
    get:
      tags: [Authentication]
      summary: Get CSRF token
      description: Retrieve CSRF token for form submissions
      security:
        - sessionCookie: []
      responses:
        '200':
          description: CSRF token
          content:
            application/json:
              schema:
                type: object
                properties:
                  csrfToken:
                    type: string
                    example: "abc123..."
        '401':
          $ref: '#/components/responses/Unauthorized'
  
  /api/auth/user:
    get:
      tags: [Authentication]
      summary: Get current user
      description: Retrieve authenticated user profile
      security:
        - sessionCookie: []
      responses:
        '200':
          description: User profile
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/Unauthorized'
  
  /api/users/inspectors:
    get:
      tags: [Authentication]
      summary: List all inspectors
      description: Get list of users with inspector role (admin only)
      security:
        - sessionCookie: []
      responses:
        '200':
          description: List of inspectors
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
  
  # ==================== Jobs ====================
  /api/jobs:
    get:
      tags: [Jobs]
      summary: List jobs
      description: Retrieve paginated list of inspection jobs with optional filters
      security:
        - sessionCookie: []
      parameters:
        - name: status
          in: query
          schema:
            type: string
            enum: [pending, in_progress, completed, cancelled]
        - name: builderId
          in: query
          schema:
            type: string
        - name: assignedTo
          in: query
          schema:
            type: string
        - name: inspectionType
          in: query
          schema:
            type: string
            enum: [pre_drywall, final, final_special, multifamily]
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
            maximum: 100
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
      responses:
        '200':
          description: Job list with pagination
          content:
            application/json:
              schema:
                type: object
                properties:
                  jobs:
                    type: array
                    items:
                      $ref: '#/components/schemas/Job'
                  total:
                    type: integer
                  limit:
                    type: integer
                  offset:
                    type: integer
        '401':
          $ref: '#/components/responses/Unauthorized'
    
    post:
      tags: [Jobs]
      summary: Create job
      description: Create a new inspection job
      security:
        - sessionCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [name, address, contractor, status, inspectionType]
              properties:
                name:
                  type: string
                  example: "123 Main St - Pre-Drywall"
                address:
                  type: string
                  example: "123 Main St, Minneapolis, MN 55401"
                builderId:
                  type: string
                  format: uuid
                contractor:
                  type: string
                  example: "Smith Construction"
                status:
                  type: string
                  enum: [pending, in_progress, completed, cancelled]
                inspectionType:
                  type: string
                  enum: [pre_drywall, final, final_special, multifamily]
                scheduledDate:
                  type: string
                  format: date-time
                pricing:
                  type: number
                  format: decimal
                notes:
                  type: string
      responses:
        '201':
          description: Job created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Job'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
  
  /api/jobs/{id}:
    get:
      tags: [Jobs]
      summary: Get job by ID
      security:
        - sessionCookie: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Job details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Job'
        '404':
          $ref: '#/components/responses/NotFound'
    
    patch:
      tags: [Jobs]
      summary: Update job
      security:
        - sessionCookie: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                status:
                  type: string
                scheduledDate:
                  type: string
                  format: date-time
                completedDate:
                  type: string
                  format: date-time
                notes:
                  type: string
      responses:
        '200':
          description: Job updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Job'
        '404':
          $ref: '#/components/responses/NotFound'
    
    delete:
      tags: [Jobs]
      summary: Delete job
      security:
        - sessionCookie: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Job deleted
        '404':
          $ref: '#/components/responses/NotFound'
  
  /api/jobs/{id}/assign:
    post:
      tags: [Jobs]
      summary: Assign job to inspector
      security:
        - sessionCookie: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [inspectorId]
              properties:
                inspectorId:
                  type: string
                  format: uuid
      responses:
        '200':
          description: Job assigned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Job'
  
  /api/jobs/{id}/compliance:
    get:
      tags: [Jobs]
      summary: Get job compliance status
      security:
        - sessionCookie: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Compliance status
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum: [compliant, non_compliant, pending]
                  flags:
                    type: array
                    items:
                      type: object
                  lastChecked:
                    type: string
                    format: date-time
  
  # ==================== Builders ====================
  /api/builders:
    get:
      tags: [Builders]
      summary: List builders
      security:
        - sessionCookie: []
      parameters:
        - name: volumeTier
          in: query
          schema:
            type: string
            enum: [low, medium, high, premium]
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
      responses:
        '200':
          description: Builder list
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Builder'
    
    post:
      tags: [Builders]
      summary: Create builder
      security:
        - sessionCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BuilderInput'
      responses:
        '201':
          description: Builder created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Builder'
  
  /api/builders/{id}:
    get:
      tags: [Builders]
      summary: Get builder by ID
      security:
        - sessionCookie: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Builder details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Builder'
  
  /api/builders/{builderId}/contacts:
    get:
      tags: [Builders]
      summary: List builder contacts
      security:
        - sessionCookie: []
      parameters:
        - name: builderId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Contact list
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/BuilderContact'
    
    post:
      tags: [Builders]
      summary: Create builder contact
      security:
        - sessionCookie: []
      parameters:
        - name: builderId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [name, role]
              properties:
                name:
                  type: string
                role:
                  type: string
                  enum: [superintendent, project_manager, owner, estimator, office_manager, other]
                email:
                  type: string
                  format: email
                phone:
                  type: string
      responses:
        '201':
          description: Contact created
  
  # ==================== Photos ====================
  /api/photos:
    get:
      tags: [Photos]
      summary: List photos
      description: Get paginated list of photos with cursor-based pagination
      security:
        - sessionCookie: []
      parameters:
        - name: jobId
          in: query
          schema:
            type: string
            format: uuid
        - name: tags
          in: query
          schema:
            type: array
            items:
              type: string
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
        - name: cursor
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Photo list with cursor
          content:
            application/json:
              schema:
                type: object
                properties:
                  photos:
                    type: array
                    items:
                      $ref: '#/components/schemas/Photo'
                  nextCursor:
                    type: string
                    nullable: true
                  hasMore:
                    type: boolean
    
    post:
      tags: [Photos]
      summary: Upload photo
      description: Upload a new photo with metadata
      security:
        - sessionCookie: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [file, jobId]
              properties:
                file:
                  type: string
                  format: binary
                jobId:
                  type: string
                  format: uuid
                tags:
                  type: array
                  items:
                    type: string
                notes:
                  type: string
      responses:
        '201':
          description: Photo uploaded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Photo'
  
  /api/photos/{id}:
    get:
      tags: [Photos]
      summary: Get photo by ID
      security:
        - sessionCookie: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Photo details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Photo'
  
  /api/photos/{id}/ocr:
    post:
      tags: [Photos]
      summary: Run OCR on photo
      security:
        - sessionCookie: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OCR results
          content:
            application/json:
              schema:
                type: object
                properties:
                  text:
                    type: string
                  confidence:
                    type: number
  
  /api/photos/bulk-tag:
    post:
      tags: [Photos]
      summary: Bulk tag photos
      security:
        - sessionCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [photoIds, tags]
              properties:
                photoIds:
                  type: array
                  items:
                    type: string
                    format: uuid
                tags:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: Photos tagged
  
  # ==================== Testing ====================
  /api/blower-door-tests:
    get:
      tags: [Testing]
      summary: List blower door tests
      security:
        - sessionCookie: []
      parameters:
        - name: jobId
          in: query
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Test list
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/BlowerDoorTest'
    
    post:
      tags: [Testing]
      summary: Create blower door test
      security:
        - sessionCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BlowerDoorTestInput'
      responses:
        '201':
          description: Test created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BlowerDoorTest'
  
  /api/duct-leakage-tests:
    get:
      tags: [Testing]
      summary: List duct leakage tests
      security:
        - sessionCookie: []
      responses:
        '200':
          description: Test list
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DuctLeakageTest'
  
  /api/ventilation-tests:
    get:
      tags: [Testing]
      summary: List ventilation tests
      security:
        - sessionCookie: []
      responses:
        '200':
          description: Test list
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/VentilationTest'
  
  # ==================== Equipment ====================
  /api/equipment:
    get:
      tags: [Equipment]
      summary: List equipment
      security:
        - sessionCookie: []
      parameters:
        - name: type
          in: query
          schema:
            type: string
            enum: [blower_door, duct_tester, multimeter, camera, other]
        - name: status
          in: query
          schema:
            type: string
            enum: [available, in_use, maintenance, retired]
      responses:
        '200':
          description: Equipment list
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Equipment'
    
    post:
      tags: [Equipment]
      summary: Add equipment
      security:
        - sessionCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EquipmentInput'
      responses:
        '201':
          description: Equipment added
  
  /api/equipment/{id}/checkout:
    post:
      tags: [Equipment]
      summary: Checkout equipment
      security:
        - sessionCookie: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                jobId:
                  type: string
                  format: uuid
      responses:
        '200':
          description: Equipment checked out
  
  # ==================== Reports ====================
  /api/report-templates:
    get:
      tags: [Reports]
      summary: List report templates
      security:
        - sessionCookie: []
      responses:
        '200':
          description: Template list
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ReportTemplate'
  
  /api/report-instances:
    get:
      tags: [Reports]
      summary: List report instances
      security:
        - sessionCookie: []
      parameters:
        - name: jobId
          in: query
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Instance list
    
    post:
      tags: [Reports]
      summary: Create report instance
      security:
        - sessionCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [templateId, jobId]
              properties:
                templateId:
                  type: string
                  format: uuid
                jobId:
                  type: string
                  format: uuid
      responses:
        '201':
          description: Report created
  
  # ==================== Schedule ====================
  /api/schedule:
    get:
      tags: [Schedule]
      summary: Get schedule events
      security:
        - sessionCookie: []
      parameters:
        - name: startDate
          in: query
          schema:
            type: string
            format: date
        - name: endDate
          in: query
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Schedule events
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ScheduleEvent'
  
  # ==================== Expenses ====================
  /api/expenses:
    get:
      tags: [Expenses]
      summary: List expenses
      security:
        - sessionCookie: []
      parameters:
        - name: jobId
          in: query
          schema:
            type: string
            format: uuid
        - name: category
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Expense list
    
    post:
      tags: [Expenses]
      summary: Create expense
      security:
        - sessionCookie: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [category, amount]
              properties:
                category:
                  type: string
                amount:
                  type: number
                receipt:
                  type: string
                  format: binary
      responses:
        '201':
          description: Expense created
  
  /api/mileage:
    get:
      tags: [Expenses]
      summary: List mileage logs
      security:
        - sessionCookie: []
      responses:
        '200':
          description: Mileage logs
  
  # ==================== Analytics ====================
  /api/analytics/overview:
    get:
      tags: [Analytics]
      summary: Get analytics overview
      security:
        - sessionCookie: []
      responses:
        '200':
          description: Analytics data
          content:
            application/json:
              schema:
                type: object
                properties:
                  totalJobs:
                    type: integer
                  completedJobs:
                    type: integer
                  revenue:
                    type: number
                  expenses:
                    type: number
  
  /api/analytics/kpis:
    get:
      tags: [Analytics]
      summary: Get KPI metrics
      security:
        - sessionCookie: []
      responses:
        '200':
          description: KPI data
  
  # ==================== Export ====================
  /api/export/jobs:
    post:
      tags: [Export]
      summary: Export jobs to CSV/Excel
      security:
        - sessionCookie: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                format:
                  type: string
                  enum: [csv, xlsx]
                filters:
                  type: object
      responses:
        '200':
          description: Export file
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary

components:
  securitySchemes:
    sessionCookie:
      type: apiKey
      in: cookie
      name: connect.sid
      description: Session cookie from Replit Auth OIDC flow
  
  schemas:
    User:
      type: object
      properties:
        id:
          type: string
          format: uuid
        email:
          type: string
          format: email
        firstName:
          type: string
        lastName:
          type: string
        role:
          type: string
          enum: [admin, inspector, manager, viewer]
        profileImageUrl:
          type: string
          format: uri
        createdAt:
          type: string
          format: date-time
      example:
        id: "123e4567-e89b-12d3-a456-426614174000"
        email: "inspector@example.com"
        firstName: "John"
        lastName: "Doe"
        role: "inspector"
    
    Job:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        address:
          type: string
        builderId:
          type: string
          format: uuid
        contractor:
          type: string
        status:
          type: string
          enum: [pending, in_progress, completed, cancelled]
        inspectionType:
          type: string
          enum: [pre_drywall, final, final_special, multifamily]
        scheduledDate:
          type: string
          format: date-time
        completedDate:
          type: string
          format: date-time
        assignedTo:
          type: string
          format: uuid
        pricing:
          type: number
        completedItems:
          type: integer
        totalItems:
          type: integer
        priority:
          type: string
          enum: [low, medium, high, urgent]
        complianceStatus:
          type: string
          enum: [compliant, non_compliant, pending]
      example:
        id: "123e4567-e89b-12d3-a456-426614174001"
        name: "123 Main St - Pre-Drywall"
        address: "123 Main St, Minneapolis, MN 55401"
        status: "in_progress"
        inspectionType: "pre_drywall"
        completedItems: 15
        totalItems: 52
    
    Builder:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        companyName:
          type: string
        email:
          type: string
        phone:
          type: string
        volumeTier:
          type: string
          enum: [low, medium, high, premium]
        totalJobs:
          type: integer
        rating:
          type: integer
          minimum: 1
          maximum: 5
    
    BuilderInput:
      type: object
      required: [name, companyName]
      properties:
        name:
          type: string
        companyName:
          type: string
        email:
          type: string
          format: email
        phone:
          type: string
        volumeTier:
          type: string
          enum: [low, medium, high, premium]
    
    BuilderContact:
      type: object
      properties:
        id:
          type: string
          format: uuid
        builderId:
          type: string
          format: uuid
        name:
          type: string
        role:
          type: string
          enum: [superintendent, project_manager, owner, estimator, office_manager, other]
        email:
          type: string
        phone:
          type: string
        isPrimary:
          type: boolean
    
    Photo:
      type: object
      properties:
        id:
          type: string
          format: uuid
        jobId:
          type: string
          format: uuid
        objectKey:
          type: string
        publicUrl:
          type: string
          format: uri
        thumbnailUrl:
          type: string
          format: uri
        tags:
          type: array
          items:
            type: string
        notes:
          type: string
        uploadedAt:
          type: string
          format: date-time
    
    BlowerDoorTest:
      type: object
      properties:
        id:
          type: string
          format: uuid
        jobId:
          type: string
          format: uuid
        testDate:
          type: string
          format: date-time
        houseVolume:
          type: number
        cfm50:
          type: number
        ach50:
          type: number
        compliant:
          type: boolean
        notes:
          type: string
    
    BlowerDoorTestInput:
      type: object
      required: [jobId, houseVolume, cfm50]
      properties:
        jobId:
          type: string
          format: uuid
        houseVolume:
          type: number
        cfm50:
          type: number
        notes:
          type: string
    
    DuctLeakageTest:
      type: object
      properties:
        id:
          type: string
          format: uuid
        jobId:
          type: string
          format: uuid
        testDate:
          type: string
          format: date-time
        totalDuctLeakage:
          type: number
        ductLeakageToOutside:
          type: number
        compliant:
          type: boolean
    
    VentilationTest:
      type: object
      properties:
        id:
          type: string
          format: uuid
        jobId:
          type: string
          format: uuid
        testDate:
          type: string
          format: date-time
        supplyAirflow:
          type: number
        exhaustAirflow:
          type: number
        compliant:
          type: boolean
    
    Equipment:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        type:
          type: string
          enum: [blower_door, duct_tester, multimeter, camera, other]
        serialNumber:
          type: string
        status:
          type: string
          enum: [available, in_use, maintenance, retired]
        lastCalibrationDate:
          type: string
          format: date
        nextCalibrationDue:
          type: string
          format: date
    
    EquipmentInput:
      type: object
      required: [name, type]
      properties:
        name:
          type: string
        type:
          type: string
          enum: [blower_door, duct_tester, multimeter, camera, other]
        serialNumber:
          type: string
    
    ReportTemplate:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
        inspectionType:
          type: string
        version:
          type: integer
    
    ScheduleEvent:
      type: object
      properties:
        id:
          type: string
          format: uuid
        jobId:
          type: string
          format: uuid
        title:
          type: string
        startTime:
          type: string
          format: date-time
        endTime:
          type: string
          format: date-time
    
    Error:
      type: object
      properties:
        message:
          type: string
        code:
          type: string
        details:
          type: object
  
  responses:
    Unauthorized:
      description: Authentication required
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            message: "Authentication required"
    
    Forbidden:
      description: Insufficient permissions
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            message: "Insufficient permissions"
    
    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            message: "Resource not found"
    
    BadRequest:
      description: Invalid request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            message: "Invalid request parameters"

security:
  - sessionCookie: []
